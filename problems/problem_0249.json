{
  "description": "SW4gcHJvZHVjdGlvbiBNTCBzeXN0ZW1zLCBtb25pdG9yaW5nIHRoZSBoZWFsdGggb2YgYmF0Y2ggcHJlZGljdGlvbiBqb2JzIGlzIGVzc2VudGlhbCBmb3IgbWFpbnRhaW5pbmcgc2VydmljZSByZWxpYWJpbGl0eS4gR2l2ZW4gYSBsaXN0IG9mIHByZWRpY3Rpb24gcmVzdWx0cyBmcm9tIGEgYmF0Y2ggam9iLCBjb21wdXRlIGtleSBoZWFsdGggbWV0cmljcyB0aGF0IGFyZSBjb21tb25seSB0cmFja2VkIGluIE1MT3BzIGRhc2hib2FyZHMuCgpFYWNoIHByZWRpY3Rpb24gcmVzdWx0IGlzIGEgZGljdGlvbmFyeSB3aXRoOgotICdzdGF0dXMnOiBFaXRoZXIgJ3N1Y2Nlc3MnIG9yICdlcnJvcicKLSAnY29uZmlkZW5jZSc6IEEgZmxvYXQgYmV0d2VlbiAwIGFuZCAxIChvbmx5IHByZXNlbnQgd2hlbiBzdGF0dXMgaXMgJ3N1Y2Nlc3MnKQoKV3JpdGUgYSBmdW5jdGlvbiBgY2FsY3VsYXRlX2JhdGNoX2hlYWx0aChwcmVkaWN0aW9ucywgY29uZmlkZW5jZV90aHJlc2hvbGQpYCB0aGF0IGNvbXB1dGVzOgoKMS4gKipTdWNjZXNzIFJhdGUqKjogUGVyY2VudGFnZSBvZiBwcmVkaWN0aW9ucyB0aGF0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkKMi4gKipBdmVyYWdlIENvbmZpZGVuY2UqKjogTWVhbiBjb25maWRlbmNlIHNjb3JlIG9mIHN1Y2Nlc3NmdWwgcHJlZGljdGlvbnMgKGFzIGEgcGVyY2VudGFnZSkKMy4gKipMb3cgQ29uZmlkZW5jZSBSYXRlKio6IFBlcmNlbnRhZ2Ugb2Ygc3VjY2Vzc2Z1bCBwcmVkaWN0aW9ucyB3aXRoIGNvbmZpZGVuY2UgYmVsb3cgdGhlIHRocmVzaG9sZAoKVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBkaWN0aW9uYXJ5IHdpdGggdGhlc2UgdGhyZWUgbWV0cmljcy4gSWYgdGhlIGlucHV0IGxpc3QgaXMgZW1wdHksIHJldHVybiBhbiBlbXB0eSBkaWN0aW9uYXJ5LiBJZiB0aGVyZSBhcmUgbm8gc3VjY2Vzc2Z1bCBwcmVkaWN0aW9ucywgcmV0dXJuIHN1Y2Nlc3NfcmF0ZSBhcyBjYWxjdWxhdGVkIGFuZCBib3RoIGNvbmZpZGVuY2UgbWV0cmljcyBhcyAwLjAuCgpBbGwgcmV0dXJuZWQgdmFsdWVzIHNob3VsZCBiZSByb3VuZGVkIHRvIDIgZGVjaW1hbCBwbGFjZXMu",
  "id": "249",
  "test_cases": [
    {
      "test": "print(calculate_batch_health([{'status': 'success', 'confidence': 0.9}, {'status': 'success', 'confidence': 0.8}, {'status': 'error'}, {'status': 'success', 'confidence': 0.4}, {'status': 'success', 'confidence': 0.7}]))",
      "expected_output": "{'success_rate': 80.0, 'avg_confidence': 70.0, 'low_confidence_rate': 25.0}"
    },
    {
      "test": "print(calculate_batch_health([{'status': 'success', 'confidence': 0.95}, {'status': 'success', 'confidence': 0.85}]))",
      "expected_output": "{'success_rate': 100.0, 'avg_confidence': 90.0, 'low_confidence_rate': 0.0}"
    }
  ],
  "difficulty": "easy",
  "video": "",
  "likes": "0",
  "dislikes": "0",
  "example": {
    "input": "predictions = [{'status': 'success', 'confidence': 0.9}, {'status': 'success', 'confidence': 0.8}, {'status': 'error'}, {'status': 'success', 'confidence': 0.4}, {'status': 'success', 'confidence': 0.7}], confidence_threshold = 0.5",
    "output": "{'success_rate': 80.0, 'avg_confidence': 70.0, 'low_confidence_rate': 25.0}",
    "reasoning": "Out of 5 predictions, 4 succeeded (80% success rate). The successful predictions have confidences [0.9, 0.8, 0.4, 0.7], averaging to 0.7 (70%). Only one prediction (0.4) is below the 0.5 threshold, giving a low confidence rate of 1/4 = 25%."
  },
  "category": "MLOps",
  "starter_code": "def calculate_batch_health(predictions: list, confidence_threshold: float = 0.5) -> dict:\n    \"\"\"\n    Calculate health metrics for a batch prediction job.\n    \n    Args:\n        predictions: list of prediction results, each a dict with 'status' and optionally 'confidence'\n        confidence_threshold: threshold below which a prediction is considered low confidence\n    \n    Returns:\n        dict with keys: 'success_rate', 'avg_confidence', 'low_confidence_rate'\n        All values as percentages (0-100), rounded to 2 decimal places.\n    \"\"\"\n    pass",
  "title": "Calculate Batch Prediction Health Metrics",
  "createdAt": "December 14, 2025 at 11:47:18â€¯AM UTC-0500",
  "contributor": [
    {
      "profile_link": "https://github.com/Open-Deep-ML",
      "name": "Deep-ML"
    }
  ],
  "learn_section": "IyMgQmF0Y2ggUHJlZGljdGlvbiBIZWFsdGggTW9uaXRvcmluZyBpbiBNTE9wcwoKTW9uaXRvcmluZyBiYXRjaCBwcmVkaWN0aW9uIGpvYnMgaXMgYSBjcml0aWNhbCBjb21wb25lbnQgb2YgcHJvZHVjdGlvbiBNTCBzeXN0ZW1zLiBVbmxpa2UgcmVhbC10aW1lIGluZmVyZW5jZSwgYmF0Y2ggcHJlZGljdGlvbnMgcHJvY2VzcyBsYXJnZSB2b2x1bWVzIG9mIGRhdGEgaW4gc2NoZWR1bGVkIHJ1bnMsIG1ha2luZyBpdCBlc3NlbnRpYWwgdG8gdHJhY2sgYWdncmVnYXRlIGhlYWx0aCBtZXRyaWNzLgoKIyMjIEtleSBIZWFsdGggTWV0cmljcwoKIyMjIyAxLiBTdWNjZXNzIFJhdGUKVGhlIHN1Y2Nlc3MgcmF0ZSBtZWFzdXJlcyB0aGUgcmVsaWFiaWxpdHkgb2YgeW91ciBwcmVkaWN0aW9uIHBpcGVsaW5lOgoKJCRcdGV4dHtTdWNjZXNzIFJhdGV9ID0gXGZyYWN7XHRleHR7U3VjY2Vzc2Z1bCBQcmVkaWN0aW9uc319e1x0ZXh0e1RvdGFsIFByZWRpY3Rpb25zfX0gXHRpbWVzIDEwMFwlJCQKCkEgZHJvcHBpbmcgc3VjY2VzcyByYXRlIG1heSBpbmRpY2F0ZToKLSBEYXRhIHF1YWxpdHkgaXNzdWVzCi0gTW9kZWwgZXJyb3JzIG9uIGVkZ2UgY2FzZXMKLSBJbmZyYXN0cnVjdHVyZSBwcm9ibGVtcwoKIyMjIyAyLiBBdmVyYWdlIENvbmZpZGVuY2UKTW9kZWwgY29uZmlkZW5jZSAob2Z0ZW4gZnJvbSBzb2Z0bWF4IG9yIHByb2JhYmlsaXR5IG91dHB1dHMpIGluZGljYXRlcyBwcmVkaWN0aW9uIGNlcnRhaW50eToKCiQkXHRleHR7QXZnIENvbmZpZGVuY2V9ID0gXGZyYWN7MX17bn1cc3VtX3tpPTF9XntufSBjX2kgXHRpbWVzIDEwMFwlJCQKCndoZXJlICRjX2kkIGlzIHRoZSBjb25maWRlbmNlIHNjb3JlIGZvciBlYWNoIHN1Y2Nlc3NmdWwgcHJlZGljdGlvbiBhbmQgJG4kIGlzIHRoZSBudW1iZXIgb2Ygc3VjY2Vzc2Z1bCBwcmVkaWN0aW9ucy4KCkRlY3JlYXNpbmcgYXZlcmFnZSBjb25maWRlbmNlIG92ZXIgdGltZSBtYXkgc2lnbmFsOgotIERhdGEgZHJpZnQgZnJvbSB0cmFpbmluZyBkaXN0cmlidXRpb24KLSBNb2RlbCBzdGFsZW5lc3MKLSBOZXcgZWRnZSBjYXNlcyBpbiBwcm9kdWN0aW9uIGRhdGEKCiMjIyMgMy4gTG93IENvbmZpZGVuY2UgUmF0ZQpUaGlzIG1ldHJpYyB0cmFja3MgcHJlZGljdGlvbnMgYmVsb3cgYSByZWxpYWJpbGl0eSB0aHJlc2hvbGQgJFx0YXUkOgoKJCRcdGV4dHtMb3cgQ29uZmlkZW5jZSBSYXRlfSA9IFxmcmFje3xce2NfaSA6IGNfaSA8IFx0YXVcfXx9e259IFx0aW1lcyAxMDBcJSQkCgpIaWdoIGxvdy1jb25maWRlbmNlIHJhdGVzIG1heSByZXF1aXJlOgotIEh1bWFuIHJldmlldyBvZiB1bmNlcnRhaW4gcHJlZGljdGlvbnMKLSBNb2RlbCByZXRyYWluaW5nCi0gRmVhdHVyZSBlbmdpbmVlcmluZyBpbXByb3ZlbWVudHMKCiMjIyBTZXR0aW5nIFRocmVzaG9sZHMKClRoZSBjb25maWRlbmNlIHRocmVzaG9sZCAkXHRhdSQgc2hvdWxkIGJlIHNldCBiYXNlZCBvbjoKLSBCdXNpbmVzcyByZXF1aXJlbWVudHMgZm9yIHByZWRpY3Rpb24gcmVsaWFiaWxpdHkKLSBIaXN0b3JpY2FsIGFuYWx5c2lzIG9mIHByZWRpY3Rpb24gYWNjdXJhY3kgdnMuIGNvbmZpZGVuY2UKLSBDb3N0IG9mIGluY29ycmVjdCBwcmVkaWN0aW9ucyB2cy4gY29zdCBvZiBtYW51YWwgcmV2aWV3CgojIyMgQWxlcnRpbmcgU3RyYXRlZ3kKClR5cGljYWwgTUxPcHMgYWxlcnRpbmcgdGhyZXNob2xkczoKLSAqKkNyaXRpY2FsKio6IFN1Y2Nlc3MgcmF0ZSA8IDk1JQotICoqV2FybmluZyoqOiBBdmVyYWdlIGNvbmZpZGVuY2UgZHJvcHMgPiAxMCUgZnJvbSBiYXNlbGluZQotICoqSW5mbyoqOiBMb3cgY29uZmlkZW5jZSByYXRlID4gMjAlCgpUaGVzZSBtZXRyaWNzLCB3aGVuIHRyYWNrZWQgb3ZlciB0aW1lLCBmb3JtIHRoZSBmb3VuZGF0aW9uIG9mIGEgcm9idXN0IG1vZGVsIG1vbml0b3Jpbmcgc3lzdGVtLg==",
  "description_decoded": "In production ML systems, monitoring the health of batch prediction jobs is essential for maintaining service reliability. Given a list of prediction results from a batch job, compute key health metrics that are commonly tracked in MLOps dashboards.\n\nEach prediction result is a dictionary with:\n- 'status': Either 'success' or 'error'\n- 'confidence': A float between 0 and 1 (only present when status is 'success')\n\nWrite a function `calculate_batch_health(predictions, confidence_threshold)` that computes:\n\n1. **Success Rate**: Percentage of predictions that completed successfully\n2. **Average Confidence**: Mean confidence score of successful predictions (as a percentage)\n3. **Low Confidence Rate**: Percentage of successful predictions with confidence below the threshold\n\nThe function should return a dictionary with these three metrics. If the input list is empty, return an empty dictionary. If there are no successful predictions, return success_rate as calculated and both confidence metrics as 0.0.\n\nAll returned values should be rounded to 2 decimal places.",
  "learn_section_decoded": "## Batch Prediction Health Monitoring in MLOps\n\nMonitoring batch prediction jobs is a critical component of production ML systems. Unlike real-time inference, batch predictions process large volumes of data in scheduled runs, making it essential to track aggregate health metrics.\n\n### Key Health Metrics\n\n#### 1. Success Rate\nThe success rate measures the reliability of your prediction pipeline:\n\n$$\\text{Success Rate} = \\frac{\\text{Successful Predictions}}{\\text{Total Predictions}} \\times 100\\%$$\n\nA dropping success rate may indicate:\n- Data quality issues\n- Model errors on edge cases\n- Infrastructure problems\n\n#### 2. Average Confidence\nModel confidence (often from softmax or probability outputs) indicates prediction certainty:\n\n$$\\text{Avg Confidence} = \\frac{1}{n}\\sum_{i=1}^{n} c_i \\times 100\\%$$\n\nwhere $c_i$ is the confidence score for each successful prediction and $n$ is the number of successful predictions.\n\nDecreasing average confidence over time may signal:\n- Data drift from training distribution\n- Model staleness\n- New edge cases in production data\n\n#### 3. Low Confidence Rate\nThis metric tracks predictions below a reliability threshold $\\tau$:\n\n$$\\text{Low Confidence Rate} = \\frac{|\\{c_i : c_i < \\tau\\}|}{n} \\times 100\\%$$\n\nHigh low-confidence rates may require:\n- Human review of uncertain predictions\n- Model retraining\n- Feature engineering improvements\n\n### Setting Thresholds\n\nThe confidence threshold $\\tau$ should be set based on:\n- Business requirements for prediction reliability\n- Historical analysis of prediction accuracy vs. confidence\n- Cost of incorrect predictions vs. cost of manual review\n\n### Alerting Strategy\n\nTypical MLOps alerting thresholds:\n- **Critical**: Success rate < 95%\n- **Warning**: Average confidence drops > 10% from baseline\n- **Info**: Low confidence rate > 20%\n\nThese metrics, when tracked over time, form the foundation of a robust model monitoring system."
}