{
  "description": "SW4gcHJvZHVjdGlvbiBNTCBzeXN0ZW1zLCBkZXRlY3Rpbmcgd2hlbiBpbnB1dCBmZWF0dXJlIGRpc3RyaWJ1dGlvbnMgY2hhbmdlIChkcmlmdCkgYmV0d2VlbiB0cmFpbmluZyBhbmQgcHJvZHVjdGlvbiBpcyBjcnVjaWFsIGZvciBtYWludGFpbmluZyBtb2RlbCBwZXJmb3JtYW5jZS4gVGhlIFBvcHVsYXRpb24gU3RhYmlsaXR5IEluZGV4IChQU0kpIGlzIGEgd2lkZWx5LXVzZWQgbWV0cmljIGluIE1MT3BzIGZvciBxdWFudGlmeWluZyBkaXN0cmlidXRpb24gc2hpZnRzLgoKV3JpdGUgYSBmdW5jdGlvbiBgZGV0ZWN0X2ZlYXR1cmVfZHJpZnQocmVmZXJlbmNlX2RhdGEsIHByb2R1Y3Rpb25fZGF0YSwgbnVtX2JpbnMpYCB0aGF0OgoKMS4gVGFrZXMgYSByZWZlcmVuY2UgZGlzdHJpYnV0aW9uIChlLmcuLCB0cmFpbmluZyBkYXRhIGZlYXR1cmUgdmFsdWVzKSBhbmQgYSBwcm9kdWN0aW9uIGRpc3RyaWJ1dGlvbiAoY3VycmVudCBpbmNvbWluZyBkYXRhKQoyLiBDb21wdXRlcyB0aGUgUFNJIHRvIG1lYXN1cmUgaG93IG11Y2ggdGhlIHByb2R1Y3Rpb24gZGlzdHJpYnV0aW9uIGhhcyBzaGlmdGVkIGZyb20gdGhlIHJlZmVyZW5jZQozLiBSZXR1cm5zIGEgZGljdGlvbmFyeSB3aXRoIHRoZSBQU0kgdmFsdWUgYW5kIGRyaWZ0IGFzc2Vzc21lbnQKClRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgZGljdGlvbmFyeSBjb250YWluaW5nOgotIGBwc2lgOiBUaGUgY2FsY3VsYXRlZCBQb3B1bGF0aW9uIFN0YWJpbGl0eSBJbmRleCAocm91bmRlZCB0byA0IGRlY2ltYWwgcGxhY2VzKQotIGBkcmlmdF9kZXRlY3RlZGA6IEJvb2xlYW4gaW5kaWNhdGluZyBpZiBkcmlmdCBpcyBkZXRlY3RlZCAoUFNJID49IDAuMSkKLSBgZHJpZnRfbGV2ZWxgOiBPbmUgb2YgJ25vbmUnIChQU0kgPCAwLjEpLCAnbW9kZXJhdGUnICgwLjEgPD0gUFNJIDwgMC4yNSksIG9yICdzaWduaWZpY2FudCcgKFBTSSA+PSAwLjI1KQoKSWYgZWl0aGVyIGlucHV0IGxpc3QgaXMgZW1wdHksIHJldHVybiBhbiBlbXB0eSBkaWN0aW9uYXJ5LgoKTm90ZTogV2hlbiBjb21wdXRpbmcgYmluIHByb3BvcnRpb25zLCB1c2UgYSBzbWFsbCBlcHNpbG9uIHZhbHVlICgwLjAwMDEpIHRvIHJlcGxhY2UgemVybyBwcm9wb3J0aW9ucyB0byBhdm9pZCBudW1lcmljYWwgaXNzdWVzIHdpdGggbG9nYXJpdGhtcy4=",
  "id": "253",
  "test_cases": [
    {
      "test": "print(detect_feature_drift([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], num_bins=5))",
      "expected_output": "{'psi': 0.0, 'drift_detected': False, 'drift_level': 'none'}"
    },
    {
      "test": "print(detect_feature_drift([1, 1, 2, 2, 3, 3, 4, 4, 5, 5], [3, 3, 4, 4, 5, 5, 6, 6, 7, 7], num_bins=5))",
      "expected_output": "{'psi': 6.6336, 'drift_detected': True, 'drift_level': 'significant'}"
    }
  ],
  "difficulty": "medium",
  "video": "",
  "likes": "0",
  "dislikes": "0",
  "example": {
    "input": "reference_data = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5], production_data = [3, 3, 4, 4, 5, 5, 6, 6, 7, 7], num_bins = 5",
    "output": "{'psi': 0.1871, 'drift_detected': True, 'drift_level': 'moderate'}",
    "reasoning": "The reference data is concentrated in range [1,5] while production data has shifted to [3,7]. Using 5 bins, we compute the proportion of data in each bin for both distributions. The PSI formula sums (prod_pct - ref_pct) * ln(prod_pct / ref_pct) across all bins. The resulting PSI of 0.1871 falls in the moderate drift range (0.1-0.25), indicating the distribution has shifted enough to warrant monitoring."
  },
  "category": "MLOps",
  "starter_code": "import numpy as np\n\ndef detect_feature_drift(reference_data: list, production_data: list, num_bins: int = 10) -> dict:\n    \"\"\"\n    Detect feature drift using Population Stability Index (PSI).\n    \n    Args:\n        reference_data: List of feature values from reference distribution (e.g., training)\n        production_data: List of feature values from production distribution\n        num_bins: Number of bins for histogram comparison\n    \n    Returns:\n        dict with 'psi', 'drift_detected', and 'drift_level'\n    \"\"\"\n    pass",
  "title": "Feature Drift Detection using Population Stability Index",
  "createdAt": "December 14, 2025 at 11:57:17â€¯AM UTC-0500",
  "contributor": [
    {
      "profile_link": "https://github.com/Open-Deep-ML",
      "name": "Deep-ML"
    }
  ],
  "learn_section": "IyMgRmVhdHVyZSBEcmlmdCBEZXRlY3Rpb24gaW4gTUxPcHMKCkZlYXR1cmUgZHJpZnQgKGFsc28gY2FsbGVkIGRhdGEgZHJpZnQgb3IgY292YXJpYXRlIHNoaWZ0KSBvY2N1cnMgd2hlbiB0aGUgc3RhdGlzdGljYWwgcHJvcGVydGllcyBvZiBtb2RlbCBpbnB1dCBmZWF0dXJlcyBjaGFuZ2Ugb3ZlciB0aW1lIGluIHByb2R1Y3Rpb24gY29tcGFyZWQgdG8gdHJhaW5pbmcgZGF0YS4gVGhpcyBjYW4gc2lsZW50bHkgZGVncmFkZSBtb2RlbCBwZXJmb3JtYW5jZSBldmVuIHdoZW4gdGhlIG1vZGVsIGl0c2VsZiBoYXNuJ3QgY2hhbmdlZC4KCiMjIyBQb3B1bGF0aW9uIFN0YWJpbGl0eSBJbmRleCAoUFNJKQoKUFNJIGlzIGEgd2lkZWx5LXVzZWQgbWV0cmljIGluIGZpbmFuY2UgYW5kIE1MT3BzIGZvciBtZWFzdXJpbmcgZGlzdHJpYnV0aW9uIHNoaWZ0cy4gSXQgcXVhbnRpZmllcyBob3cgbXVjaCBhIGRpc3RyaWJ1dGlvbiBoYXMgY2hhbmdlZCBmcm9tIGEgYmFzZWxpbmUuCgojIyMjIENhbGN1bGF0aW9uIFN0ZXBzCgoxLiAqKkJpbiB0aGUgZGF0YSoqOiBEaXZpZGUgdGhlIHZhbHVlIHJhbmdlIGludG8gJG4kIGVxdWFsLXdpZHRoIGJpbnMKMi4gKipDYWxjdWxhdGUgcHJvcG9ydGlvbnMqKjogRm9yIGVhY2ggYmluICRpJCwgY29tcHV0ZToKICAgLSAkRV9pJCA9IHByb3BvcnRpb24gb2YgcmVmZXJlbmNlIGRhdGEgaW4gYmluICRpJAogICAtICRBX2kkID0gcHJvcG9ydGlvbiBvZiBwcm9kdWN0aW9uIGRhdGEgaW4gYmluICRpJAozLiAqKkNvbXB1dGUgUFNJKio6CgokJFx0ZXh0e1BTSX0gPSBcc3VtX3tpPTF9XntufSAoQV9pIC0gRV9pKSBcY2RvdCBcbG5cbGVmdChcZnJhY3tBX2l9e0VfaX1ccmlnaHQpJCQKCiMjIyMgTWF0aGVtYXRpY2FsIFByb3BlcnRpZXMKCi0gUFNJIGlzIGFsd2F5cyBub24tbmVnYXRpdmU6ICRcdGV4dHtQU0l9IFxnZXEgMCQKLSBQU0kgPSAwIG9ubHkgd2hlbiBkaXN0cmlidXRpb25zIGFyZSBpZGVudGljYWwKLSBQU0kgaXMgc3ltbWV0cmljIHdpdGggcmVzcGVjdCB0byB3aGljaCBkaXN0cmlidXRpb24gaXMgInJlZmVyZW5jZSIKCiMjIyMgSGFuZGxpbmcgWmVybyBQcm9wb3J0aW9ucwoKV2hlbiBhIGJpbiBoYXMgemVybyBvYnNlcnZhdGlvbnMsIHdlIHJlcGxhY2UgMCB3aXRoIGEgc21hbGwgZXBzaWxvbiAoJFxlcHNpbG9uID0gMC4wMDAxJCkgdG8gYXZvaWQ6Ci0gRGl2aXNpb24gYnkgemVybyBpbiAkQV9pIC8gRV9pJAotIFVuZGVmaW5lZCAkXGxuKDApJAoKIyMjIEluZHVzdHJ5IFRocmVzaG9sZHMKCnwgUFNJIFZhbHVlIHwgSW50ZXJwcmV0YXRpb24gfCBBY3Rpb24gfAp8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLXwKfCA8IDAuMSB8IE5vIHNpZ25pZmljYW50IGRyaWZ0IHwgQ29udGludWUgbW9uaXRvcmluZyB8CnwgMC4xIC0gMC4yNSB8IE1vZGVyYXRlIGRyaWZ0IHwgSW52ZXN0aWdhdGUgY2F1c2UgfAp8ID49IDAuMjUgfCBTaWduaWZpY2FudCBkcmlmdCB8IENvbnNpZGVyIHJldHJhaW5pbmcgfAoKIyMjIFdoeSBQU0kgV29ya3MKClBTSSBpcyByZWxhdGVkIHRvIHRoZSBLdWxsYmFjay1MZWlibGVyIChLTCkgZGl2ZXJnZW5jZS4gSXQgY2FuIGJlIGV4cHJlc3NlZCBhczoKCiQkXHRleHR7UFNJfSA9IERfe0tMfShBIFx8IEUpICsgRF97S0x9KEUgXHwgQSkkJAoKd2hlcmUgJERfe0tMfSQgaXMgdGhlIEtMIGRpdmVyZ2VuY2UuIFRoaXMgc3ltbWV0cmljIGZvcm11bGF0aW9uIG1ha2VzIFBTSSBtb3JlIHJvYnVzdCB0aGFuIHVzaW5nIEtMIGRpdmVyZ2VuY2UgYWxvbmUuCgojIyMgUHJhY3RpY2FsIENvbnNpZGVyYXRpb25zIGluIE1MT3BzCgoxLiAqKkJpbiBTZWxlY3Rpb24qKjogVHlwaWNhbGx5IDEwLTIwIGJpbnMgd29yayB3ZWxsOyB0b28gZmV3IGJpbnMgbWF5IG1pc3Mgc3VidGxlIHNoaWZ0cwoyLiAqKlNhbXBsZSBTaXplKio6IFJlcXVpcmVzIHN1ZmZpY2llbnQgZGF0YSBpbiBib3RoIGRpc3RyaWJ1dGlvbnMgZm9yIHJlbGlhYmxlIGVzdGltYXRlcwozLiAqKkZlYXR1cmUtbGV2ZWwgTW9uaXRvcmluZyoqOiBDb21wdXRlIFBTSSBmb3IgZWFjaCBmZWF0dXJlIGluZGVwZW5kZW50bHkKNC4gKipBbGVydGluZyoqOiBTZXQgdXAgYXV0b21hdGVkIGFsZXJ0cyB3aGVuIFBTSSBleGNlZWRzIHRocmVzaG9sZHMKNS4gKipSb290IENhdXNlIEFuYWx5c2lzKio6IEhpZ2ggUFNJIHNob3VsZCB0cmlnZ2VyIGludmVzdGlnYXRpb24gaW50byB1cHN0cmVhbSBkYXRhIGNoYW5nZXM=",
  "description_decoded": "In production ML systems, detecting when input feature distributions change (drift) between training and production is crucial for maintaining model performance. The Population Stability Index (PSI) is a widely-used metric in MLOps for quantifying distribution shifts.\n\nWrite a function `detect_feature_drift(reference_data, production_data, num_bins)` that:\n\n1. Takes a reference distribution (e.g., training data feature values) and a production distribution (current incoming data)\n2. Computes the PSI to measure how much the production distribution has shifted from the reference\n3. Returns a dictionary with the PSI value and drift assessment\n\nThe function should return a dictionary containing:\n- `psi`: The calculated Population Stability Index (rounded to 4 decimal places)\n- `drift_detected`: Boolean indicating if drift is detected (PSI >= 0.1)\n- `drift_level`: One of 'none' (PSI < 0.1), 'moderate' (0.1 <= PSI < 0.25), or 'significant' (PSI >= 0.25)\n\nIf either input list is empty, return an empty dictionary.\n\nNote: When computing bin proportions, use a small epsilon value (0.0001) to replace zero proportions to avoid numerical issues with logarithms.",
  "learn_section_decoded": "## Feature Drift Detection in MLOps\n\nFeature drift (also called data drift or covariate shift) occurs when the statistical properties of model input features change over time in production compared to training data. This can silently degrade model performance even when the model itself hasn't changed.\n\n### Population Stability Index (PSI)\n\nPSI is a widely-used metric in finance and MLOps for measuring distribution shifts. It quantifies how much a distribution has changed from a baseline.\n\n#### Calculation Steps\n\n1. **Bin the data**: Divide the value range into $n$ equal-width bins\n2. **Calculate proportions**: For each bin $i$, compute:\n   - $E_i$ = proportion of reference data in bin $i$\n   - $A_i$ = proportion of production data in bin $i$\n3. **Compute PSI**:\n\n$$\\text{PSI} = \\sum_{i=1}^{n} (A_i - E_i) \\cdot \\ln\\left(\\frac{A_i}{E_i}\\right)$$\n\n#### Mathematical Properties\n\n- PSI is always non-negative: $\\text{PSI} \\geq 0$\n- PSI = 0 only when distributions are identical\n- PSI is symmetric with respect to which distribution is \"reference\"\n\n#### Handling Zero Proportions\n\nWhen a bin has zero observations, we replace 0 with a small epsilon ($\\epsilon = 0.0001$) to avoid:\n- Division by zero in $A_i / E_i$\n- Undefined $\\ln(0)$\n\n### Industry Thresholds\n\n| PSI Value | Interpretation | Action |\n|-----------|----------------|--------|\n| < 0.1 | No significant drift | Continue monitoring |\n| 0.1 - 0.25 | Moderate drift | Investigate cause |\n| >= 0.25 | Significant drift | Consider retraining |\n\n### Why PSI Works\n\nPSI is related to the Kullback-Leibler (KL) divergence. It can be expressed as:\n\n$$\\text{PSI} = D_{KL}(A \\| E) + D_{KL}(E \\| A)$$\n\nwhere $D_{KL}$ is the KL divergence. This symmetric formulation makes PSI more robust than using KL divergence alone.\n\n### Practical Considerations in MLOps\n\n1. **Bin Selection**: Typically 10-20 bins work well; too few bins may miss subtle shifts\n2. **Sample Size**: Requires sufficient data in both distributions for reliable estimates\n3. **Feature-level Monitoring**: Compute PSI for each feature independently\n4. **Alerting**: Set up automated alerts when PSI exceeds thresholds\n5. **Root Cause Analysis**: High PSI should trigger investigation into upstream data changes"
}