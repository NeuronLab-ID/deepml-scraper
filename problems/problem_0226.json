{
  "description": "SW1wbGVtZW50IGV2YWx1YXRpb24gbWV0cmljcyBmb3IgcmVhc29uaW5nIG1vZGVsczogcGFzc0AxIGFuZCBtYWpvcml0eSB2b3RpbmcgKGNvbnNlbnN1cykuIFRoZXNlIG1ldHJpY3MgYXJlIGVzc2VudGlhbCBmb3IgZXZhbHVhdGluZyBtb2RlbHMgd2hlcmUgbXVsdGlwbGUgc2FtcGxlcyBhcmUgZ2VuZXJhdGVkIHBlciBwcm9ibGVtLiBQYXNzQDEgbWVhc3VyZXMgdGhlIGF2ZXJhZ2UgY29ycmVjdG5lc3MgYWNyb3NzIHNhbXBsZXMsIHdoaWxlIG1ham9yaXR5IHZvdGluZyBzZWxlY3RzIHRoZSBtb3N0IGNvbW1vbiBhbnN3ZXIsIG9mdGVuIGltcHJvdmluZyBhY2N1cmFjeSBieSBmaWx0ZXJpbmcgb3V0IGluY29uc2lzdGVudCBlcnJvcnMu",
  "id": "226",
  "test_cases": [
    {
      "test": "import numpy as np\ncorrect = np.array([True, False, True, False, True])\nresult = pass_at_1(correct)\nprint(round(result, 4))",
      "expected_output": "0.6"
    },
    {
      "test": "import numpy as np\ncorrect = np.array([True, True, True, True])\nresult = pass_at_1(correct)\nprint(round(result, 4))",
      "expected_output": "1.0"
    }
  ],
  "difficulty": "easy",
  "pytorch_difficulty": "easy",
  "video": "",
  "likes": "0",
  "dislikes": "0",
  "example": {
    "input": "responses_correct = np.array([True, False, True, False])",
    "output": "0.5",
    "reasoning": "2 out of 4 responses are correct, so pass@1 = 2/4 = 0.5. This represents a 50% chance of getting a correct answer when sampling once."
  },
  "category": "Reinforcement Learning",
  "pytorch_starter_code": "aW1wb3J0IHRvcmNoCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IENvdW50ZXIKCmRlZiBwYXNzX2F0XzEocmVzcG9uc2VzX2NvcnJlY3Q6IHRvcmNoLlRlbnNvcikgLT4gZmxvYXQ6CgkiIiIKCUNvbXB1dGUgcGFzc0AxIHVzaW5nIFB5VG9yY2guCgkKCUFyZ3M6CgkJcmVzcG9uc2VzX2NvcnJlY3Q6IEJvb2xlYW4gdGVuc29yCgkJCglSZXR1cm5zOgoJCXBhc3NAMSBzY29yZQoJIiIiCgkjIFlvdXIgY29kZSBoZXJlCglwYXNzCgoKZGVmIG1ham9yaXR5X3ZvdGluZyhyZXNwb25zZXM6IGxpc3Rbc3RyXSkgLT4gc3RyOgoJIiIiCglSZXR1cm4gbW9zdCBjb21tb24gcmVzcG9uc2UuCgkiIiIKCSMgWW91ciBjb2RlIGhlcmUKCXBhc3MKCgpkZWYgcGFzc19hdF9rKG46IGludCwgYzogaW50LCBrOiBpbnQpIC0+IGZsb2F0OgoJIiIiCglDb21wdXRlIHVuYmlhc2VkIHBhc3NAayBlc3RpbWF0b3IuCgkiIiIKCSMgWW91ciBjb2RlIGhlcmUKCXBhc3M=",
  "title": "Pass@k and Majority Voting Evaluation Metrics",
  "createdAt": "December 9, 2025 at 5:20:14â€¯PM UTC-0500",
  "contributor": [
    {
      "profile_link": "https://github.com/Open-Deep-ML",
      "name": "Deep-ML"
    }
  ],
  "pytorch_test_cases": [
    {
      "test": "import torch\ncorrect = torch.tensor([True, False, True, False, True])\nresult = pass_at_1(correct)\nprint(round(result, 4))",
      "expected_output": "0.6"
    },
    {
      "test": "import torch\ncorrect = torch.tensor([True, True, True, True])\nresult = pass_at_1(correct)\nprint(round(result, 4))",
      "expected_output": "1.0"
    },
    {
      "test": "responses = ['A', 'A', 'A', 'B', 'B']\nresult = majority_voting(responses)\nprint(result)",
      "expected_output": "A"
    },
    {
      "test": "result = pass_at_k(n=10, c=3, k=5)\nprint(round(result, 4))",
      "expected_output": "0.9167"
    }
  ],
  "learn_section": "IyMgRXZhbHVhdGlvbiBNZXRyaWNzIGZvciBSZWFzb25pbmcgTW9kZWxzCgojIyMgVGhlIENoYWxsZW5nZQoKUmVhc29uaW5nIG1vZGVscyBnZW5lcmF0ZSBsb25nIGNoYWlucyBvZiB0aG91Z2h0IHdpdGggcG90ZW50aWFsIGZvciB2YXJpYW5jZS4gQSBzaW5nbGUgc2FtcGxlIG1pZ2h0IG5vdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdHJ1ZSBjYXBhYmlsaXR5LiBUd28gY29tcGxlbWVudGFyeSBtZXRyaWNzIGFkZHJlc3MgdGhpcy4KCiMjIyBQYXNzQDEKClRoZSBzaW1wbGVzdCBtZXRyaWM6IHNhbXBsZSBrIHJlc3BvbnNlcyBhbmQgY29tcHV0ZSBhdmVyYWdlIGFjY3VyYWN5LgoKJCRcdGV4dHtwYXNzQDF9ID0gXGZyYWN7MX17a30gXHN1bV97aT0xfV57a30gcF9pJCQKCndoZXJlICRwX2kgPSAxJCBpZiByZXNwb25zZSAkaSQgaXMgY29ycmVjdCwgZWxzZSAkMCQuCgojIyMgTWFqb3JpdHkgVm90aW5nIChjb25zQGspCgpBbHNvIGNhbGxlZCAiY29uc2Vuc3VzIiAtIHNlbGVjdCB0aGUgbW9zdCBmcmVxdWVudCBhbnN3ZXIgYW1vbmcgayBzYW1wbGVzLgoKVGhpcyBsZXZlcmFnZXMgdGhlIGluc2lnaHQgdGhhdCBjb3JyZWN0IHJlYXNvbmluZyB0ZW5kcyB0byBjb252ZXJnZSB0byB0aGUgc2FtZSBhbnN3ZXIsIHdoaWxlIGVycm9ycyBhcmUgb2Z0ZW4gaW5jb25zaXN0ZW50LgoKRXhhbXBsZSBpbXByb3ZlbWVudCBvbiBBSU1FIDIwMjQ6Ci0gcGFzc0AxOiA3MS4wJQotIGNvbnNANjQ6IDg2LjclCgpNYWpvcml0eSB2b3RpbmcgaW1wcm92ZWQgYWNjdXJhY3kgYnkgMTUuNyBwZXJjZW50YWdlIHBvaW50cyEKCiMjIyBVbmJpYXNlZCBQYXNzQGsgRXN0aW1hdG9yCgpGb3IgY29kZSBnZW5lcmF0aW9uIGJlbmNobWFya3MsIHdlIG9mdGVuIHdhbnQgcGFzc0BrIGZvciBrID4gMS4gVGhlIHVuYmlhc2VkIGVzdGltYXRvcjoKCiQkXHRleHR7cGFzc0BrfSA9IDEgLSBcZnJhY3tcYmlub217bi1jfXtrfX17XGJpbm9te259e2t9fSQkCgp3aGVyZToKLSAkbiQgPSB0b3RhbCBzYW1wbGVzIGdlbmVyYXRlZAotICRjJCA9IG51bWJlciBvZiBjb3JyZWN0IHNhbXBsZXMKLSAkayQgPSBudW1iZXIgb2YgYXR0ZW1wdHMgYWxsb3dlZAoKVGhpcyBjb21wdXRlcyB0aGUgcHJvYmFiaWxpdHkgdGhhdCBhdCBsZWFzdCBvbmUgb2YgayByYW5kb20gc2FtcGxlcyBpcyBjb3JyZWN0LgoKIyMjIEVmZmljaWVudCBDb21wdXRhdGlvbgoKVG8gYXZvaWQgbGFyZ2UgZmFjdG9yaWFscywgY29tcHV0ZSB0aGUgcmF0aW8gaXRlcmF0aXZlbHk6CgokJFxmcmFje1xiaW5vbXtuLWN9e2t9fXtcYmlub217bn17a319ID0gXHByb2Rfe2k9MH1ee2stMX0gXGZyYWN7bi1jLWl9e24taX0kJAoKIyMjIFdoZW4gdG8gVXNlIEVhY2gKCioqUGFzc0AxKio6IFN0YW5kYXJkIG1ldHJpYyBmb3IgY29tcGFyaW5nIG1vZGVscy4gUmVwb3J0cyBleHBlY3RlZCBhY2N1cmFjeSBmcm9tIGEgc2luZ2xlIHNhbXBsZS4KCioqTWFqb3JpdHkgVm90aW5nKio6IFVzZSB3aGVuIHlvdSBjYW4gYWZmb3JkIG11bHRpcGxlIHNhbXBsZXMgYXQgaW5mZXJlbmNlIHRpbWUuIFBhcnRpY3VsYXJseSBlZmZlY3RpdmUgZm9yIG1hdGggcHJvYmxlbXMgd2hlcmUgdGhlIGZpbmFsIGFuc3dlciBpcyB1bmFtYmlndW91cy4KCioqUGFzc0BrIChrPjEpKio6IFVzZSBmb3IgY29kZSBnZW5lcmF0aW9uIHdoZXJlIHlvdSBtaWdodCBydW4gbXVsdGlwbGUgYXR0ZW1wdHMuIFJlcG9ydHMgcHJvYmFiaWxpdHkgb2Ygc3VjY2VzcyB3aXRoaW4gayB0cmllcy4=",
  "starter_code": "import numpy as np\nfrom collections import Counter\n\ndef pass_at_1(responses_correct: np.ndarray) -> float:\n\t\"\"\"\n\tCompute pass@1 by averaging correctness.\n\t\n\tArgs:\n\t\tresponses_correct: Boolean array for each response\n\t\t\n\tReturns:\n\t\tpass@1 score\n\t\"\"\"\n\t# Your code here\n\tpass\n\n\ndef majority_voting(responses: list[str]) -> str:\n\t\"\"\"\n\tReturn the most common response.\n\t\n\tArgs:\n\t\tresponses: List of response strings\n\t\t\n\tReturns:\n\t\tMost frequent response\n\t\"\"\"\n\t# Your code here\n\tpass\n\n\ndef pass_at_k(n: int, c: int, k: int) -> float:\n\t\"\"\"\n\tCompute unbiased pass@k from n samples with c correct.\n\t\n\tFormula: pass@k = 1 - C(n-c, k) / C(n, k)\n\t\n\tArgs:\n\t\tn: Total samples\n\t\tc: Correct samples\n\t\tk: k in pass@k\n\t\t\n\tReturns:\n\t\tEstimated pass@k\n\t\"\"\"\n\t# Your code here\n\tpass",
  "description_decoded": "Implement evaluation metrics for reasoning models: pass@1 and majority voting (consensus). These metrics are essential for evaluating models where multiple samples are generated per problem. Pass@1 measures the average correctness across samples, while majority voting selects the most common answer, often improving accuracy by filtering out inconsistent errors.",
  "learn_section_decoded": "## Evaluation Metrics for Reasoning Models\n\n### The Challenge\n\nReasoning models generate long chains of thought with potential for variance. A single sample might not represent the model's true capability. Two complementary metrics address this.\n\n### Pass@1\n\nThe simplest metric: sample k responses and compute average accuracy.\n\n$$\\text{pass@1} = \\frac{1}{k} \\sum_{i=1}^{k} p_i$$\n\nwhere $p_i = 1$ if response $i$ is correct, else $0$.\n\n### Majority Voting (cons@k)\n\nAlso called \"consensus\" - select the most frequent answer among k samples.\n\nThis leverages the insight that correct reasoning tends to converge to the same answer, while errors are often inconsistent.\n\nExample improvement on AIME 2024:\n- pass@1: 71.0%\n- cons@64: 86.7%\n\nMajority voting improved accuracy by 15.7 percentage points!\n\n### Unbiased Pass@k Estimator\n\nFor code generation benchmarks, we often want pass@k for k > 1. The unbiased estimator:\n\n$$\\text{pass@k} = 1 - \\frac{\\binom{n-c}{k}}{\\binom{n}{k}}$$\n\nwhere:\n- $n$ = total samples generated\n- $c$ = number of correct samples\n- $k$ = number of attempts allowed\n\nThis computes the probability that at least one of k random samples is correct.\n\n### Efficient Computation\n\nTo avoid large factorials, compute the ratio iteratively:\n\n$$\\frac{\\binom{n-c}{k}}{\\binom{n}{k}} = \\prod_{i=0}^{k-1} \\frac{n-c-i}{n-i}$$\n\n### When to Use Each\n\n**Pass@1**: Standard metric for comparing models. Reports expected accuracy from a single sample.\n\n**Majority Voting**: Use when you can afford multiple samples at inference time. Particularly effective for math problems where the final answer is unambiguous.\n\n**Pass@k (k>1)**: Use for code generation where you might run multiple attempts. Reports probability of success within k tries."
}