{
  "problem_id": 38,
  "title": "Implement AdaBoost Fit Method",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useEffect } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n    red: '#f87171',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [dragging, setDragging] = useState(null);\n\n  const [points, setPoints] = useState([\n    { x: 2, y: 7, label: 1 },\n    { x: 3, y: 6, label: 1 },\n    { x: 7.5, y: 7, label: 1 },\n    { x: 8, y: 6, label: 1 },\n    { x: 5, y: 4, label: -1 },\n    { x: 4.5, y: 3, label: -1 },\n    { x: 5.5, y: 5, label: -1 },\n    { x: 5, y: 7, label: -1 },\n  ]);\n\n  const numSteps = 5;\n\n  // Fixed rules\n  const rules = [\n    { test: (d) => d.x < 4, color: theme.colors.blue, desc: 'x < 4 ‚Üí green', side: 'left of blue line' },\n    { test: (d) => d.x > 6.5, color: theme.colors.pink, desc: 'x > 6.5 ‚Üí green', side: 'right of pink line' },\n    { test: (d) => d.y > 5.5, color: theme.colors.orange, desc: 'y > 5.5 ‚Üí green', side: 'above orange line' },\n  ];\n\n  // Count correct/wrong for a rule\n  const getRuleStats = (ruleIndex) => {\n    const rule = rules[ruleIndex];\n    let greenCorrect = 0, greenWrong = 0, redCorrect = 0, redWrong = 0;\n    points.forEach(d => {\n      const pred = rule.test(d);\n      if (d.label === 1) {\n        if (pred) greenCorrect++; else greenWrong++;\n      } else {\n        if (!pred) redCorrect++; else redWrong++;\n      }\n    });\n    return { greenCorrect, greenWrong, redCorrect, redWrong, total: greenCorrect + redCorrect };\n  };\n\n  // Get votes for ensemble\n  const getVotes = (d) => rules.filter(r => r.test(d)).length;\n\n  const getEnsembleAccuracy = () => {\n    return points.filter(d => {\n      const votes = getVotes(d);\n      const pred = votes >= 2 ? 1 : -1;\n      return pred === d.label;\n    }).length;\n  };\n\n  // Auto-play\n  useEffect(() => {\n    if (!playing) return;\n    const timer = setTimeout(() => {\n      if (step < numSteps - 1) setStep(s => s + 1);\n      else setPlaying(false);\n    }, 2500);\n    return () => clearTimeout(timer);\n  }, [playing, step]);\n\n  const play = () => { setStep(0); setPlaying(true); };\n  const reset = () => { \n    setStep(0); \n    setPlaying(false);\n    setPoints([\n      { x: 2, y: 7, label: 1 },\n      { x: 3, y: 6, label: 1 },\n      { x: 7.5, y: 7, label: 1 },\n      { x: 8, y: 6, label: 1 },\n      { x: 5, y: 4, label: -1 },\n      { x: 4.5, y: 3, label: -1 },\n      { x: 5.5, y: 5, label: -1 },\n      { x: 5, y: 7, label: -1 },\n    ]);\n  };\n\n  const plotSize = 260;\n  const pad = 25;\n  const toX = (x) => pad + (x / 10) * (plotSize - 2 * pad);\n  const toY = (y) => plotSize - pad - (y / 10) * (plotSize - 2 * pad);\n  const fromX = (px) => Math.max(0.5, Math.min(9.5, ((px - pad) / (plotSize - 2 * pad)) * 10));\n  const fromY = (py) => Math.max(0.5, Math.min(9.5, ((plotSize - pad - py) / (plotSize - 2 * pad)) * 10));\n\n  const handleMouseMove = (e) => {\n    if (dragging === null) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const x = fromX(e.clientX - rect.left);\n    const y = fromY(e.clientY - rect.top);\n    const newPoints = [...points];\n    newPoints[dragging] = { ...newPoints[dragging], x: Math.round(x * 2) / 2, y: Math.round(y * 2) / 2 };\n    setPoints(newPoints);\n  };\n\n  const stepInfo = [\n    { title: 'The Challenge', desc: 'Drag points! Can one line separate green from red?', color: theme.colors.primary },\n    { title: 'Rule 1', desc: 'x < 4 ‚Üí predict green', color: theme.colors.blue },\n    { title: 'Rule 2', desc: 'x > 6.5 ‚Üí predict green', color: theme.colors.pink },\n    { title: 'Rule 3', desc: 'y > 5.5 ‚Üí predict green', color: theme.colors.orange },\n    { title: 'Vote!', desc: '2+ votes ‚Üí green. Majority wins!', color: theme.colors.green },\n  ];\n\n  const currentStats = step >= 1 && step <= 3 ? getRuleStats(step - 1) : null;\n  const ensembleAcc = getEnsembleAccuracy();\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '8px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>AdaBoost</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>Weak rules vote together ‚Üí strong classifier</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '4px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '16px' : '8px', height: '8px', borderRadius: '4px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer',\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '10px 14px', background: theme.colors.surface, borderLeft: `4px solid ${stepInfo[step].color}`,\n        borderRadius: '0 8px 8px 0', marginBottom: '12px' }}>\n        <span style={{ fontWeight: '700', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title} </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>‚Äî {stepInfo[step].desc}</span>\n      </div>\n\n      <div style={{ display: 'flex', gap: '16px' }}>\n        \n        {/* Plot */}\n        <div style={{ background: theme.colors.surface, borderRadius: '12px', padding: '16px' }}>\n          \n          <svg width={plotSize} height={plotSize} \n            style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', cursor: dragging !== null ? 'grabbing' : 'default' }}\n            onMouseMove={handleMouseMove}\n            onMouseUp={() => setDragging(null)}\n            onMouseLeave={() => setDragging(null)}>\n            \n            {/* Lines */}\n            {step >= 1 && (\n              <line x1={toX(4)} y1={pad} x2={toX(4)} y2={plotSize - pad}\n                stroke={theme.colors.blue} strokeWidth={step === 1 ? 3 : 2}\n                opacity={step === 1 ? 1 : 0.3} strokeDasharray={step === 1 ? \"0\" : \"6\"} />\n            )}\n            {step >= 2 && (\n              <line x1={toX(6.5)} y1={pad} x2={toX(6.5)} y2={plotSize - pad}\n                stroke={theme.colors.pink} strokeWidth={step === 2 ? 3 : 2}\n                opacity={step === 2 ? 1 : 0.3} strokeDasharray={step === 2 ? \"0\" : \"6\"} />\n            )}\n            {step >= 3 && (\n              <line x1={pad} y1={toY(5.5)} x2={plotSize - pad} y2={toY(5.5)}\n                stroke={theme.colors.orange} strokeWidth={step === 3 ? 3 : 2}\n                opacity={step === 3 ? 1 : 0.3} strokeDasharray={step === 3 ? \"0\" : \"6\"} />\n            )}\n            \n            {/* Points */}\n            {points.map((d, i) => {\n              const isGreen = d.label === 1;\n              let marker = null;\n              let markerColor = theme.colors.text;\n              \n              if (step >= 1 && step <= 3) {\n                const rule = rules[step - 1];\n                const pred = rule.test(d);\n                const correct = (isGreen && pred) || (!isGreen && !pred);\n                marker = correct ? '‚úì' : '‚úó';\n                markerColor = correct ? theme.colors.green : theme.colors.red;\n              }\n              \n              if (step === 4) {\n                const votes = getVotes(d);\n                const pred = votes >= 2 ? 1 : -1;\n                const correct = pred === d.label;\n                marker = correct ? '‚úì' : '‚úó';\n                markerColor = correct ? theme.colors.green : theme.colors.red;\n              }\n              \n              return (\n                <g key={i}>\n                  {marker && (\n                    <text x={toX(d.x)} y={toY(d.y) - 18} textAnchor=\"middle\" fontSize=\"16\"\n                      fill={markerColor} fontWeight=\"bold\">{marker}</text>\n                  )}\n                  <circle cx={toX(d.x)} cy={toY(d.y)} r=\"14\"\n                    fill={isGreen ? theme.colors.green : theme.colors.red}\n                    stroke={theme.colors.text} strokeWidth=\"2\"\n                    style={{ cursor: 'grab' }}\n                    onMouseDown={() => setDragging(i)} />\n                  {step === 4 && (\n                    <text x={toX(d.x)} y={toY(d.y) + 5} textAnchor=\"middle\" fontSize=\"12\"\n                      fill={theme.colors.background} fontWeight=\"bold\" style={{ pointerEvents: 'none' }}>\n                      {getVotes(d)}\n                    </text>\n                  )}\n                </g>\n              );\n            })}\n          </svg>\n\n          {/* Rule indicators */}\n          <div style={{ marginTop: '12px', display: 'flex', gap: '8px' }}>\n            {rules.map((r, i) => (\n              <div key={i} style={{\n                flex: 1, padding: '6px', borderRadius: '6px', textAlign: 'center',\n                background: step > i ? r.color + '20' : theme.colors.surfaceAlt,\n                border: `2px solid ${step > i ? r.color : theme.colors.border}`,\n                opacity: step > i ? 1 : 0.3,\n              }}>\n                <div style={{ fontSize: '10px', color: step > i ? r.color : theme.colors.textMuted }}>\n                  {i + 1}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Right panel */}\n        <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '12px' }}>\n          \n          <div style={{ background: theme.colors.surface, borderRadius: '12px', padding: '16px', flex: 1 }}>\n            {step === 0 && (\n              <div style={{ fontSize: '13px', color: theme.colors.textSecondary, lineHeight: 1.8 }}>\n                <div style={{ color: theme.colors.text, fontWeight: '600', marginBottom: '8px' }}>\n                  Can one line separate üü¢ from üî¥?\n                </div>\n                Drag the points around! Green and red are mixed ‚Äî no single straight line can perfectly separate them.\n                <br/><br/>\n                <span style={{ color: theme.colors.yellow }}>Solution:</span> Use 3 simple rules that vote together!\n              </div>\n            )}\n            \n            {step >= 1 && step <= 3 && currentStats && (\n              <div>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '12px' }}>\n                  <div style={{ width: '36px', height: '36px', borderRadius: '50%', background: rules[step-1].color,\n                    display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '16px', fontWeight: '700', color: theme.colors.background }}>\n                    {step}\n                  </div>\n                  <div>\n                    <div style={{ fontSize: '14px', fontWeight: '600', color: rules[step-1].color }}>{rules[step-1].desc}</div>\n                    <div style={{ fontSize: '11px', color: theme.colors.textMuted }}>{rules[step-1].side}</div>\n                  </div>\n                </div>\n                \n                {/* Score card */}\n                <div style={{ display: 'flex', gap: '12px', marginBottom: '12px' }}>\n                  <div style={{ flex: 1, padding: '10px', background: theme.colors.green + '15', borderRadius: '8px', textAlign: 'center' }}>\n                    <div style={{ fontSize: '20px', fontWeight: '700', color: theme.colors.green }}>\n                      {currentStats.greenCorrect}/4\n                    </div>\n                    <div style={{ fontSize: '10px', color: theme.colors.textMuted }}>üü¢ correct</div>\n                  </div>\n                  <div style={{ flex: 1, padding: '10px', background: theme.colors.red + '15', borderRadius: '8px', textAlign: 'center' }}>\n                    <div style={{ fontSize: '20px', fontWeight: '700', color: theme.colors.red }}>\n                      {currentStats.redCorrect}/4\n                    </div>\n                    <div style={{ fontSize: '10px', color: theme.colors.textMuted }}>üî¥ correct</div>\n                  </div>\n                </div>\n                \n                <div style={{ fontSize: '13px', color: theme.colors.textSecondary, padding: '10px', background: theme.colors.surfaceAlt, borderRadius: '6px' }}>\n                  Total: <span style={{ color: theme.colors.text, fontWeight: '600' }}>{currentStats.total}/8</span> ‚Äî \n                  {currentStats.total >= 7 ? ' Great rule!' : currentStats.total >= 5 ? ' Okay, but not perfect.' : ' Weak alone, but still helps!'}\n                </div>\n              </div>\n            )}\n            \n            {step === 4 && (\n              <div>\n                <div style={{ fontSize: '15px', fontWeight: '700', color: theme.colors.green, marginBottom: '12px' }}>\n                  üó≥Ô∏è Majority Vote\n                </div>\n                <div style={{ fontSize: '13px', color: theme.colors.textSecondary, marginBottom: '12px' }}>\n                  Numbers inside = votes. If 2+ say green ‚Üí predict green!\n                </div>\n                <div style={{ padding: '14px', background: ensembleAcc === 8 ? theme.colors.green + '20' : theme.colors.yellow + '20', \n                  borderRadius: '8px', border: `2px solid ${ensembleAcc === 8 ? theme.colors.green : theme.colors.yellow}` }}>\n                  <div style={{ fontSize: '28px', fontWeight: '700', color: ensembleAcc === 8 ? theme.colors.green : theme.colors.yellow }}>\n                    {ensembleAcc}/8 correct!\n                  </div>\n                  <div style={{ fontSize: '12px', color: theme.colors.textSecondary, marginTop: '4px' }}>\n                    {ensembleAcc === 8 ? 'Perfect! Drag points to see when it breaks.' : 'Move points to get 8/8!'}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Insight */}\n          <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '12px', fontSize: '12px', color: theme.colors.textSecondary }}>\n            <span style={{ color: theme.colors.primary, fontWeight: '600' }}>üí° </span>\n            {step === 0 && \"Drag points anywhere. Notice greens in corners, reds in middle.\"}\n            {step === 1 && \"Rule 1 catches left-side greens. What about the right side?\"}\n            {step === 2 && \"Rule 2 catches right-side greens! But some reds slip through.\"}\n            {step === 3 && \"Rule 3 adds a third perspective. Each rule is weak alone!\"}\n            {step === 4 && \"Together: 3 weak rules ‚Üí 1 strong classifier. That's boosting!\"}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}