{
  "problem_id": 45,
  "title": "Linear Kernel Function",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useRef, useEffect } from 'react';\n\n// --- THEME ---\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    cyan: '#22d3ee',\n    pink: '#f472b6',\n    yellow: '#fbbf24',\n    green: '#4ade80',\n    grid: '#333333',\n    axis: '#555555'\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nexport default function LinearKernelPlayground() {\n  // State for Vector heads (coordinates in our custom grid units)\n  // Grid goes from -5 to 5\n  const [v1, setV1] = useState({ x: 3, y: 1 });\n  const [v2, setV2] = useState({ x: 1, y: 4 });\n  const [hovered, setHovered] = useState(null);\n  const [dragging, setDragging] = useState(null);\n\n  // Math Computations\n  const dotProduct = (v1.x * v2.x) + (v1.y * v2.y);\n  const mag1 = Math.sqrt(v1.x**2 + v1.y**2);\n  const mag2 = Math.sqrt(v2.x**2 + v2.y**2);\n  \n  // Angle calculation\n  const angleRad = Math.acos(Math.min(Math.max(dotProduct / (mag1 * mag2), -1), 1));\n  const angleDeg = (angleRad * 180 / Math.PI) || 0;\n\n  return (\n    <div style={styles.container}>\n      {/* HEADER */}\n      <header style={styles.header}>\n        <div>\n          <h1 style={styles.title}>Linear Kernel (Dot Product)</h1>\n          <p style={styles.subtitle}>Measuring similarity via projection.</p>\n        </div>\n        <div style={styles.resultBox}>\n           <div style={{fontSize: 12, color: theme.colors.textMuted}}>KERNEL OUTPUT</div>\n           <div style={{fontSize: 24, fontWeight: 'bold', color: dotProduct >= 0 ? theme.colors.green : theme.colors.yellow}}>\n             {dotProduct.toFixed(2)}\n           </div>\n        </div>\n      </header>\n\n      <div style={styles.mainLayout}>\n        {/* LEFT: MATH & VALUES */}\n        <div style={styles.sidebar}>\n          \n          {/* 1. Algebraic Definition */}\n          <div style={styles.card}>\n            <div style={styles.cardHeader}>Algebraic Calculation</div>\n            <div style={styles.mathBlock}>\n               <div style={{marginBottom: 8, fontSize: 12, color: theme.colors.textMuted}}>Sum of element-wise products</div>\n               <div style={{display:'flex', alignItems:'center', justifyContent:'center', fontSize: 16}}>\n                  <span style={{color: theme.colors.cyan}}>({v1.x.toFixed(1)}</span>\n                  <span style={{margin: '0 4px'}}>×</span>\n                  <span style={{color: theme.colors.pink}}>{v2.x.toFixed(1)})</span>\n                  <span style={{margin: '0 8px'}}>+</span>\n                  <span style={{color: theme.colors.cyan}}>({v1.y.toFixed(1)}</span>\n                  <span style={{margin: '0 4px'}}>×</span>\n                  <span style={{color: theme.colors.pink}}>{v2.y.toFixed(1)})</span>\n               </div>\n               <div style={{marginTop: 8, textAlign:'center', fontWeight:'bold', fontSize: 18}}>\n                  = {dotProduct.toFixed(2)}\n               </div>\n            </div>\n          </div>\n\n          {/* 2. Geometric Definition */}\n          <div style={styles.card}>\n            <div style={styles.cardHeader}>Geometric Interpretation</div>\n            <div style={styles.mathBlock}>\n               <div style={{marginBottom: 8, fontSize: 12, color: theme.colors.textMuted}}>Magnitude × Projection</div>\n               <div style={{fontSize: 14, lineHeight: '1.8'}}>\n                 <div>\n                   <span style={{color: theme.colors.textSecondary}}>|x₁| = </span>\n                   <span style={{color: theme.colors.cyan}}>{mag1.toFixed(2)}</span>\n                 </div>\n                 <div>\n                   <span style={{color: theme.colors.textSecondary}}>|x₂| = </span>\n                   <span style={{color: theme.colors.pink}}>{mag2.toFixed(2)}</span>\n                 </div>\n                 <div>\n                   <span style={{color: theme.colors.textSecondary}}>cos(θ) = </span>\n                   <span style={{color: theme.colors.yellow}}>{Math.cos(angleRad).toFixed(2)} ({angleDeg.toFixed(0)}°)</span>\n                 </div>\n               </div>\n               <div style={{marginTop: 8, borderTop:`1px solid ${theme.colors.border}`, paddingTop: 8, textAlign:'center'}}>\n                  <span style={{color: theme.colors.cyan}}>{mag1.toFixed(1)}</span>\n                  <span> × </span>\n                  <span style={{color: theme.colors.pink}}>{mag2.toFixed(1)}</span>\n                  <span> × </span>\n                  <span style={{color: theme.colors.yellow}}>{Math.cos(angleRad).toFixed(2)}</span>\n                  <strong> = {dotProduct.toFixed(2)}</strong>\n               </div>\n            </div>\n          </div>\n\n          {/* 3. Explanation */}\n          <div style={styles.infoBox}>\n             <div style={{fontWeight: 'bold', marginBottom: 4, color: theme.colors.text}}>What does it mean?</div>\n             <p style={{margin:0, fontSize: 12, lineHeight: 1.4, color: theme.colors.textSecondary}}>\n               The Linear Kernel is a measure of <strong>alignment</strong>.\n             </p>\n             <ul style={{margin:'8px 0 0 16px', padding:0, fontSize: 12, color: theme.colors.textMuted}}>\n               <li><strong>Positive:</strong> Vectors point in similar direction.</li>\n               <li><strong>Zero:</strong> Vectors are perpendicular (Orthogonal).</li>\n               <li><strong>Negative:</strong> Vectors point in opposite directions.</li>\n             </ul>\n          </div>\n\n        </div>\n\n        {/* RIGHT: INTERACTIVE GRAPH */}\n        <div style={styles.canvasContainer}>\n          <VectorCanvas \n             v1={v1} setV1={setV1} \n             v2={v2} setV2={setV2}\n             hovered={hovered} setHovered={setHovered}\n             dragging={dragging} setDragging={setDragging}\n             theme={theme}\n          />\n          <div style={styles.overlayInstruction}>\n             Drag the vector heads to explore\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// --- SVG CANVAS COMPONENT ---\nconst VectorCanvas = ({ v1, setV1, v2, setV2, hovered, setHovered, dragging, setDragging, theme }) => {\n  const svgRef = useRef(null);\n  \n  // Canvas Configuration\n  const width = 500;\n  const height = 400;\n  const gridSize = 10; // -5 to 5\n  const scale = width / gridSize / 1.5; // pixels per unit\n  const originX = width / 2;\n  const originY = height / 2;\n\n  // Transform Grid -> Pixel\n  const toPx = (x, y) => ({\n    x: originX + x * scale,\n    y: originY - y * scale\n  });\n\n  // Transform Pixel -> Grid (for dragging)\n  const toGrid = (px, py) => ({\n    x: (px - originX) / scale,\n    y: (originY - py) / scale\n  });\n\n  // Interaction Handlers\n  const handlePointerDown = (id, e) => {\n    e.target.setPointerCapture(e.pointerId);\n    setDragging(id);\n  };\n\n  const handlePointerMove = (e) => {\n    if (!dragging) return;\n    const rect = svgRef.current.getBoundingClientRect();\n    const rawX = e.clientX - rect.left;\n    const rawY = e.clientY - rect.top;\n    \n    // Snap to 0.1 increments\n    let { x, y } = toGrid(rawX, rawY);\n    x = Math.round(x * 10) / 10;\n    y = Math.round(y * 10) / 10;\n    \n    // Clamp to canvas view\n    x = Math.max(-6, Math.min(6, x));\n    y = Math.max(-5, Math.min(5, y));\n\n    if (dragging === 'v1') setV1({ x, y });\n    else setV2({ x, y });\n  };\n\n  const handlePointerUp = (e) => {\n    setDragging(null);\n  };\n\n  // -- Computations for Visuals --\n  const p1 = toPx(v1.x, v1.y);\n  const p2 = toPx(v2.x, v2.y);\n  const p0 = toPx(0, 0);\n\n  // Projection Logic: Project V1 onto V2\n  // proj = (v1 . v2) / |v2|^2 * v2\n  const dot = v1.x * v2.x + v1.y * v2.y;\n  const mag2Sq = v2.x**2 + v2.y**2;\n  const scalarProj = mag2Sq === 0 ? 0 : dot / mag2Sq;\n  const projX = scalarProj * v2.x;\n  const projY = scalarProj * v2.y;\n  const pProj = toPx(projX, projY);\n\n  return (\n    <svg \n      ref={svgRef}\n      width=\"100%\" height=\"100%\" viewBox={`0 0 ${width} ${height}`} \n      style={{background: theme.colors.surfaceAlt, cursor: dragging ? 'grabbing' : 'default'}}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n      onPointerLeave={handlePointerUp}\n    >\n      <defs>\n        <marker id=\"arrow-cyan\" markerWidth=\"10\" markerHeight=\"10\" refX=\"9\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n          <path d=\"M0,0 L0,6 L9,3 z\" fill={theme.colors.cyan} />\n        </marker>\n        <marker id=\"arrow-pink\" markerWidth=\"10\" markerHeight=\"10\" refX=\"9\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n          <path d=\"M0,0 L0,6 L9,3 z\" fill={theme.colors.pink} />\n        </marker>\n      </defs>\n\n      {/* Grid */}\n      {Array.from({ length: 21 }).map((_, i) => {\n        const val = i - 10;\n        const pos = toPx(val, val);\n        return (\n          <React.Fragment key={i}>\n             {/* Vertical Lines */}\n             <line x1={pos.x} y1={0} x2={pos.x} y2={height} stroke={val===0 ? theme.colors.axis : theme.colors.grid} strokeWidth={val===0?2:1} />\n             {/* Horizontal Lines */}\n             <line x1={0} y1={pos.y} x2={width} y2={pos.y} stroke={val===0 ? theme.colors.axis : theme.colors.grid} strokeWidth={val===0?2:1} />\n          </React.Fragment>\n        )\n      })}\n\n      {/* Projection Line (Shadow) */}\n      <line \n        x1={p1.x} y1={p1.y} \n        x2={pProj.x} y2={pProj.y} \n        stroke={theme.colors.textSecondary} \n        strokeWidth=\"1\" \n        strokeDasharray=\"4,4\"\n        opacity=\"0.6\"\n      />\n      <line \n        x1={p0.x} y1={p0.y} \n        x2={pProj.x} y2={pProj.y} \n        stroke={theme.colors.yellow} \n        strokeWidth=\"4\" \n        opacity=\"0.3\"\n      />\n\n      {/* Vectors */}\n      {/* V1 - Cyan */}\n      <line \n        x1={p0.x} y1={p0.y} x2={p1.x} y2={p1.y} \n        stroke={theme.colors.cyan} strokeWidth=\"3\" \n        markerEnd=\"url(#arrow-cyan)\" \n      />\n      \n      {/* V2 - Pink */}\n      <line \n        x1={p0.x} y1={p0.y} x2={p2.x} y2={p2.y} \n        stroke={theme.colors.pink} strokeWidth=\"3\" \n        markerEnd=\"url(#arrow-pink)\" \n      />\n\n      {/* Draggable Handles */}\n      {/* Handle V1 */}\n      <circle \n        cx={p1.x} cy={p1.y} r=\"12\" \n        fill={theme.colors.cyan} fillOpacity={dragging === 'v1' || hovered === 'v1' ? 0.3 : 0} \n        stroke={theme.colors.cyan} strokeWidth=\"2\"\n        onPointerDown={(e) => handlePointerDown('v1', e)}\n        onMouseEnter={() => setHovered('v1')}\n        onMouseLeave={() => setHovered(null)}\n        style={{cursor: 'grab', transition: 'fill-opacity 0.2s'}}\n      />\n      {/* Handle V2 */}\n      <circle \n        cx={p2.x} cy={p2.y} r=\"12\" \n        fill={theme.colors.pink} fillOpacity={dragging === 'v2' || hovered === 'v2' ? 0.3 : 0} \n        stroke={theme.colors.pink} strokeWidth=\"2\"\n        onPointerDown={(e) => handlePointerDown('v2', e)}\n        onMouseEnter={() => setHovered('v2')}\n        onMouseLeave={() => setHovered(null)}\n        style={{cursor: 'grab', transition: 'fill-opacity 0.2s'}}\n      />\n\n      {/* Labels */}\n      <text x={p1.x + 10} y={p1.y - 10} fill={theme.colors.cyan} fontSize=\"12\" fontWeight=\"bold\">x₁</text>\n      <text x={p2.x + 10} y={p2.y - 10} fill={theme.colors.pink} fontSize=\"12\" fontWeight=\"bold\">x₂</text>\n\n    </svg>\n  );\n};\n\n// --- STYLES ---\nconst styles = {\n  container: {\n    fontFamily: theme.font,\n    background: theme.colors.background,\n    color: theme.colors.text,\n    minHeight: '100vh',\n    padding: 20,\n    display: 'flex', flexDirection: 'column',\n  },\n  header: {\n    display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n    borderBottom: `1px solid ${theme.colors.border}`, paddingBottom: 16, marginBottom: 20\n  },\n  title: {\n    margin: 0, fontSize: 24, fontWeight: '700',\n    background: `linear-gradient(90deg, ${theme.colors.cyan}, ${theme.colors.primary})`,\n    WebkitBackgroundClip: 'text',\n    WebkitTextFillColor: 'transparent',\n  },\n  subtitle: { margin: '4px 0 0', fontSize: 13, color: theme.colors.textSecondary },\n  resultBox: {\n    background: theme.colors.surfaceAlt, border: `1px solid ${theme.colors.border}`,\n    borderRadius: 8, padding: '8px 16px', textAlign: 'right'\n  },\n  mainLayout: {\n    display: 'grid', gridTemplateColumns: '320px 1fr', gap: 24, flex: 1\n  },\n  sidebar: { display: 'flex', flexDirection: 'column', gap: 16 },\n  canvasContainer: {\n    position: 'relative', background: theme.colors.surfaceAlt,\n    borderRadius: 12, border: `1px solid ${theme.colors.border}`,\n    overflow: 'hidden', boxShadow: '0 4px 20px rgba(0,0,0,0.3)',\n    minHeight: 400\n  },\n  card: {\n    background: theme.colors.surface, borderRadius: 8,\n    border: `1px solid ${theme.colors.border}`, padding: 16\n  },\n  cardHeader: {\n    fontSize: 11, fontWeight: 'bold', color: theme.colors.textSecondary,\n    textTransform: 'uppercase', letterSpacing: 1, marginBottom: 12\n  },\n  mathBlock: {\n    background: theme.colors.background, padding: 12, borderRadius: 6,\n    border: `1px solid ${theme.colors.border}`, fontFamily: theme.font\n  },\n  infoBox: {\n    padding: 12, background: `${theme.colors.primary}15`, borderRadius: 8,\n    border: `1px solid ${theme.colors.primary}40`\n  },\n  overlayInstruction: {\n    position: 'absolute', bottom: 12, left: '50%', transform: 'translateX(-50%)',\n    background: 'rgba(0,0,0,0.7)', padding: '4px 12px', borderRadius: 20,\n    fontSize: 11, color: '#fff', pointerEvents: 'none'\n  }\n};\n",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}