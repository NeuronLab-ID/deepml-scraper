{
  "problem_id": 31,
  "title": "Divide Dataset Based on Feature Threshold",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [featureIdx, setFeatureIdx] = useState(0);\n  const [threshold, setThreshold] = useState(5);\n\n  const numSteps = 4;\n\n  // Sample data points\n  const X = [\n    [1, 2], [3, 4], [5, 6], [7, 8], [9, 10]\n  ];\n\n  // Compute split\n  const { left, right } = useMemo(() => {\n    const leftGroup = [];\n    const rightGroup = [];\n    X.forEach((sample, i) => {\n      if (sample[featureIdx] >= threshold) {\n        leftGroup.push({ sample, idx: i });\n      } else {\n        rightGroup.push({ sample, idx: i });\n      }\n    });\n    return { left: leftGroup, right: rightGroup };\n  }, [featureIdx, threshold]);\n\n  const stepInfo = [\n    { title: 'The Data', desc: `${X.length} samples with 2 features each`, color: theme.colors.primary },\n    { title: 'Choose Feature', desc: `Split on feature ${featureIdx} (column ${featureIdx})`, color: theme.colors.blue },\n    { title: 'Set Threshold', desc: `threshold = ${threshold}. Check: feature[${featureIdx}] ≥ ${threshold}?`, color: theme.colors.yellow },\n    { title: 'Result', desc: `${left.length} samples ≥ ${threshold}, ${right.length} samples < ${threshold}`, color: theme.colors.green },\n  ];\n\n  const play = async () => {\n    setPlaying(true);\n    for (let s = 0; s < numSteps; s++) {\n      setStep(s);\n      await new Promise(r => setTimeout(r, 1800));\n    }\n    setPlaying(false);\n  };\n\n  const reset = () => { setStep(0); setPlaying(false); setFeatureIdx(0); setThreshold(5); };\n\n  // SVG setup for scatter plot\n  const svgW = 400, svgH = 280;\n  const pad = 50;\n  const plotW = svgW - 2 * pad, plotH = svgH - 2 * pad;\n  const maxVal = 12;\n  \n  const toSvg = (x, y) => [\n    pad + (x / maxVal) * plotW,\n    svgH - pad - (y / maxVal) * plotH\n  ];\n\n  const thresholdPos = featureIdx === 0 \n    ? pad + (threshold / maxVal) * plotW  // vertical line\n    : svgH - pad - (threshold / maxVal) * plotH;  // horizontal line\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '10px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>Divide on Feature</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>Split data by threshold (decision tree basis)</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '5px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '18px' : '10px', height: '10px', borderRadius: '5px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer'\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '8px 12px', background: theme.colors.surface, borderLeft: `3px solid ${stepInfo[step].color}`,\n        borderRadius: '0 6px 6px 0', marginBottom: '12px' }}>\n        <span style={{ fontWeight: '600', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title}: </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>{stepInfo[step].desc}</span>\n      </div>\n\n      <div style={{ display: 'flex', gap: '16px', marginBottom: '12px' }}>\n        \n        {/* Scatter plot */}\n        <div style={{ background: theme.colors.surface, borderRadius: '10px', padding: '12px', flex: 1 }}>\n          <svg viewBox={`0 0 ${svgW} ${svgH}`} style={{ width: '100%', height: '280px' }}>\n            <rect x=\"0\" y=\"0\" width={svgW} height={svgH} fill={theme.colors.surfaceAlt} rx=\"8\" />\n            \n            {/* Grid */}\n            {[0, 2, 4, 6, 8, 10].map(v => {\n              const [x] = toSvg(v, 0);\n              const [, y] = toSvg(0, v);\n              return (\n                <g key={v}>\n                  <line x1={x} y1={pad} x2={x} y2={svgH - pad} stroke={theme.colors.border} strokeWidth=\"1\" />\n                  <line x1={pad} y1={y} x2={svgW - pad} y2={y} stroke={theme.colors.border} strokeWidth=\"1\" />\n                  <text x={x} y={svgH - pad + 18} textAnchor=\"middle\" fill={theme.colors.textMuted} fontSize=\"11\">{v}</text>\n                  <text x={pad - 12} y={y + 4} textAnchor=\"end\" fill={theme.colors.textMuted} fontSize=\"11\">{v}</text>\n                </g>\n              );\n            })}\n\n            {/* Axis labels */}\n            <text x={svgW / 2} y={svgH - 8} textAnchor=\"middle\" fill={featureIdx === 0 ? theme.colors.yellow : theme.colors.textMuted} fontSize=\"13\" fontWeight=\"600\">\n              Feature 0 {featureIdx === 0 && '←'}\n            </text>\n            <text x=\"14\" y={svgH / 2} textAnchor=\"middle\" fill={featureIdx === 1 ? theme.colors.yellow : theme.colors.textMuted} fontSize=\"13\" fontWeight=\"600\" transform={`rotate(-90, 14, ${svgH/2})`}>\n              Feature 1 {featureIdx === 1 && '←'}\n            </text>\n\n            {/* Threshold line */}\n            {step >= 2 && (\n              featureIdx === 0 ? (\n                <g>\n                  <line x1={thresholdPos} y1={pad} x2={thresholdPos} y2={svgH - pad}\n                    stroke={theme.colors.yellow} strokeWidth=\"3\" strokeDasharray=\"8,4\" />\n                  <text x={thresholdPos} y={pad - 8} textAnchor=\"middle\" fill={theme.colors.yellow} fontSize=\"13\" fontWeight=\"bold\">\n                    x ≥ {threshold}\n                  </text>\n                </g>\n              ) : (\n                <g>\n                  <line x1={pad} y1={thresholdPos} x2={svgW - pad} y2={thresholdPos}\n                    stroke={theme.colors.yellow} strokeWidth=\"3\" strokeDasharray=\"8,4\" />\n                  <text x={svgW - pad + 8} y={thresholdPos + 4} textAnchor=\"start\" fill={theme.colors.yellow} fontSize=\"13\" fontWeight=\"bold\">\n                    y ≥ {threshold}\n                  </text>\n                </g>\n              )\n            )}\n\n            {/* Shaded regions */}\n            {step >= 3 && (\n              featureIdx === 0 ? (\n                <>\n                  <rect x={thresholdPos} y={pad} width={svgW - pad - thresholdPos} height={plotH} fill={theme.colors.green + '15'} />\n                  <rect x={pad} y={pad} width={thresholdPos - pad} height={plotH} fill={theme.colors.pink + '15'} />\n                </>\n              ) : (\n                <>\n                  <rect x={pad} y={pad} width={plotW} height={thresholdPos - pad} fill={theme.colors.green + '15'} />\n                  <rect x={pad} y={thresholdPos} width={plotW} height={svgH - pad - thresholdPos} fill={theme.colors.pink + '15'} />\n                </>\n              )\n            )}\n\n            {/* Data points */}\n            {X.map((pt, i) => {\n              const [cx, cy] = toSvg(pt[0], pt[1]);\n              const meetsCondition = pt[featureIdx] >= threshold;\n              const color = step >= 3 \n                ? (meetsCondition ? theme.colors.green : theme.colors.pink)\n                : theme.colors.blue;\n              \n              return (\n                <g key={i}>\n                  <circle cx={cx} cy={cy} r=\"14\" fill={color} />\n                  <text x={cx} y={cy + 5} textAnchor=\"middle\" fill={theme.colors.background} fontSize=\"12\" fontWeight=\"bold\">\n                    {i}\n                  </text>\n                </g>\n              );\n            })}\n\n            {/* Legend */}\n            {step >= 3 && (\n              <g transform=\"translate(60, 60)\">\n                <circle cx=\"0\" cy=\"0\" r=\"8\" fill={theme.colors.green} />\n                <text x=\"14\" y=\"4\" fill={theme.colors.green} fontSize=\"12\" fontWeight=\"600\">≥ {threshold} ({left.length})</text>\n                <circle cx=\"0\" cy=\"22\" r=\"8\" fill={theme.colors.pink} />\n                <text x=\"14\" y=\"26\" fill={theme.colors.pink} fontSize=\"12\" fontWeight=\"600\">&lt; {threshold} ({right.length})</text>\n              </g>\n            )}\n          </svg>\n        </div>\n\n        {/* Controls & Results */}\n        <div style={{ width: '240px', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n          \n          {/* Feature selector */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px',\n            border: step === 1 ? `2px solid ${theme.colors.blue}` : `1px solid ${theme.colors.border}` }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>\n              feature_i {step === 1 && <span style={{ color: theme.colors.blue }}>(select)</span>}\n            </div>\n            <div style={{ display: 'flex', gap: '8px' }}>\n              {[0, 1].map(f => (\n                <button key={f} onClick={() => setFeatureIdx(f)}\n                  style={{\n                    flex: 1, padding: '10px', borderRadius: '6px',\n                    background: featureIdx === f ? theme.colors.blue : theme.colors.surfaceAlt,\n                    border: 'none', cursor: 'pointer',\n                    color: featureIdx === f ? theme.colors.background : theme.colors.text,\n                    fontSize: '14px', fontWeight: '600',\n                  }}>\n                  {f}\n                </button>\n              ))}\n            </div>\n            <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginTop: '6px' }}>\n              Split on {featureIdx === 0 ? 'x-axis' : 'y-axis'}\n            </div>\n          </div>\n\n          {/* Threshold slider */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px',\n            border: step === 2 ? `2px solid ${theme.colors.yellow}` : `1px solid ${theme.colors.border}` }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>\n              threshold {step === 2 && <span style={{ color: theme.colors.yellow }}>(adjust)</span>}\n            </div>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n              <input type=\"range\" min={1} max={10} value={threshold} onChange={e => setThreshold(+e.target.value)}\n                style={{ flex: 1, accentColor: theme.colors.yellow }} />\n              <span style={{ fontSize: '18px', color: theme.colors.yellow, fontWeight: '700', width: '28px' }}>{threshold}</span>\n            </div>\n          </div>\n\n          {/* Data table */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px' }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>Data</div>\n            <div style={{ fontSize: '12px' }}>\n              {X.map((row, i) => {\n                const meetsCondition = row[featureIdx] >= threshold;\n                const color = step >= 3 ? (meetsCondition ? theme.colors.green : theme.colors.pink) : theme.colors.textSecondary;\n                return (\n                  <div key={i} style={{ display: 'flex', gap: '8px', marginBottom: '4px', color }}>\n                    <span style={{ width: '20px' }}>[{i}]</span>\n                    <span>[{row.join(', ')}]</span>\n                    {step >= 3 && (\n                      <span style={{ marginLeft: 'auto' }}>\n                        {meetsCondition ? '✓' : '✗'}\n                      </span>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Result */}\n          {step >= 3 && (\n            <div style={{ background: theme.colors.green + '15', borderRadius: '8px', padding: '12px',\n              border: `2px solid ${theme.colors.green}` }}>\n              <div style={{ fontSize: '12px', color: theme.colors.green, fontWeight: '600', marginBottom: '6px' }}>Output</div>\n              <div style={{ fontSize: '11px', color: theme.colors.textSecondary }}>\n                <div><span style={{ color: theme.colors.green }}>X_1</span> = [{left.map(l => `[${l.sample.join(',')}]`).join(', ')}]</div>\n                <div><span style={{ color: theme.colors.pink }}>X_2</span> = [{right.map(r => `[${r.sample.join(',')}]`).join(', ')}]</div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Key Insight */}\n      <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '10px 14px',\n        fontSize: '12px', color: theme.colors.textSecondary, borderLeft: `3px solid ${theme.colors.primary}` }}>\n        <span style={{ color: theme.colors.primary, fontWeight: '600' }}>Key: </span>\n        {step === 0 && 'This split operation is the foundation of decision trees! Each node asks: \"Is feature[i] ≥ threshold?\"'}\n        {step === 1 && 'Choose which feature (column) to split on. feature_i=0 splits vertically, feature_i=1 splits horizontally.'}\n        {step === 2 && `The threshold draws a line. Points on one side go to X_1 (≥${threshold}), others to X_2 (<${threshold}).`}\n        {step === 3 && 'Decision trees recursively apply this split to find the best feature & threshold that separates classes!'}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}