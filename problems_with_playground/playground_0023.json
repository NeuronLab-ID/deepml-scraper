{
  "problem_id": 23,
  "title": "Softmax Activation Function Implementation ",
  "category": "Deep Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    positive: '#10b981',\n    negative: '#f43f5e',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nconst classColors = ['#f472b6', '#38bdf8', '#a3e635'];\nconst classes = ['Cat', 'Dog', 'Bird'];\n\nconst icons = {\n  cat: <svg viewBox=\"0 0 100 100\" width=\"100%\" height=\"100%\"><ellipse cx=\"50\" cy=\"55\" rx=\"35\" ry=\"30\" fill=\"#a78bfa\"/><polygon points=\"20,35 15,5 35,25\" fill=\"#a78bfa\"/><polygon points=\"80,35 85,5 65,25\" fill=\"#a78bfa\"/><circle cx=\"35\" cy=\"50\" r=\"5\" fill=\"#1a1a1a\"/><circle cx=\"65\" cy=\"50\" r=\"5\" fill=\"#1a1a1a\"/><ellipse cx=\"50\" cy=\"62\" rx=\"5\" ry=\"3\" fill=\"#f472b6\"/></svg>,\n  dog: <svg viewBox=\"0 0 100 100\" width=\"100%\" height=\"100%\"><ellipse cx=\"50\" cy=\"55\" rx=\"30\" ry=\"28\" fill=\"#60a5fa\"/><ellipse cx=\"25\" cy=\"35\" rx=\"12\" ry=\"18\" fill=\"#60a5fa\"/><ellipse cx=\"75\" cy=\"35\" rx=\"12\" ry=\"18\" fill=\"#60a5fa\"/><circle cx=\"38\" cy=\"50\" r=\"4\" fill=\"#1a1a1a\"/><circle cx=\"62\" cy=\"50\" r=\"4\" fill=\"#1a1a1a\"/><ellipse cx=\"50\" cy=\"62\" rx=\"8\" ry=\"6\" fill=\"#1a1a1a\"/></svg>,\n  bird: <svg viewBox=\"0 0 100 100\" width=\"100%\" height=\"100%\"><ellipse cx=\"50\" cy=\"50\" rx=\"25\" ry=\"22\" fill=\"#86efac\"/><circle cx=\"55\" cy=\"42\" r=\"12\" fill=\"#86efac\"/><circle cx=\"60\" cy=\"40\" r=\"3\" fill=\"#1a1a1a\"/><polygon points=\"72,42 90,38 72,46\" fill=\"#fbbf24\"/></svg>,\n  confused: <svg viewBox=\"0 0 100 100\" width=\"100%\" height=\"100%\"><text x=\"50\" y=\"60\" textAnchor=\"middle\" fontSize=\"40\" fill=\"#52525b\">?</text></svg>,\n};\n\nconst images = [\n  { id: 'bird', scores: [0.5, 0.3, 2.8] },\n  { id: 'cat', scores: [2.5, 0.8, 0.2] },\n  { id: 'dog', scores: [0.4, 3.1, 0.1] },\n  { id: 'confused', scores: [1.2, 1.1, 1.0] },\n];\n\nconst stepInfo = [\n  { title: 'Choose Image', desc: 'Pick an image. Network outputs raw scores for each class.', color: theme.colors.primary },\n  { title: 'Exponentiate', desc: 'Compute e^score to make values positive and amplify differences.', color: theme.colors.blue },\n  { title: 'Normalize', desc: 'Divide each by sum to get probabilities that sum to 1.', color: theme.colors.pink },\n  { title: 'Predict', desc: 'Highest probability wins! We get prediction + confidence.', color: theme.colors.green },\n];\n\nexport default function App() {\n  const [imageIdx, setImageIdx] = useState(0);\n  const [scores, setScores] = useState([...images[0].scores]);\n  const [step, setStep] = useState(0);\n  const totalSteps = 3;\n\n  const selectImage = (idx) => { setImageIdx(idx); setScores([...images[idx].scores]); };\n\n  const rawExpScores = scores.map(s => Math.exp(s));\n  const rawSumExp = rawExpScores.reduce((a, b) => a + b, 0);\n  const probs = rawExpScores.map(e => e / rawSumExp);\n  const maxProbIdx = probs.indexOf(Math.max(...probs));\n\n  const handleScoreChange = (idx, value) => {\n    const newScores = [...scores];\n    newScores[idx] = parseFloat(value);\n    setScores(newScores);\n  };\n\n  const next = () => step < totalSteps && setStep(step + 1);\n  const prev = () => step > 0 && setStep(step - 1);\n  const fmt = (n, d = 2) => n.toFixed(d);\n\n  return (\n    <div style={{ background: theme.colors.background, padding: '12px', fontFamily: theme.font, color: theme.colors.text, minHeight: '100vh' }}>\n      \n      {/* Header + Controls */}\n      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '10px' }}>\n        <div style={{ flex: 1 }}>\n          <div style={{ fontSize: '16px', fontWeight: '700' }}>Softmax</div>\n          <div style={{ fontSize: '10px', color: theme.colors.textSecondary }}>Scores to probabilities</div>\n        </div>\n        <div style={{ display: 'flex', gap: '4px', alignItems: 'center' }}>\n          {Array.from({ length: totalSteps + 1 }).map((_, i) => (\n            <div key={i} onClick={() => setStep(i)} style={{\n              width: i === step ? '16px' : '8px', height: '8px', borderRadius: '4px',\n              background: i <= step ? theme.colors.primary : theme.colors.border, cursor: 'pointer',\n            }} />\n          ))}\n        </div>\n        <button onClick={prev} disabled={step <= 0} style={{\n          padding: '6px 10px', background: step <= 0 ? theme.colors.border : theme.colors.surface,\n          border: 'none', borderRadius: '6px', color: step <= 0 ? theme.colors.textMuted : theme.colors.text,\n          fontFamily: theme.font, fontSize: '12px', cursor: step <= 0 ? 'not-allowed' : 'pointer',\n        }}>{'<'}</button>\n        <button onClick={next} disabled={step >= totalSteps} style={{\n          padding: '6px 14px', background: theme.colors.primary, border: 'none', borderRadius: '6px',\n          color: '#fff', fontFamily: theme.font, fontSize: '11px', fontWeight: '600',\n          cursor: step >= totalSteps ? 'not-allowed' : 'pointer', opacity: step >= totalSteps ? 0.5 : 1,\n        }}>{step < totalSteps ? 'Next' : 'Done'}</button>\n        <button onClick={() => { setStep(0); selectImage(0); }} style={{\n          padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n          color: theme.colors.text, fontFamily: theme.font, fontSize: '12px', cursor: 'pointer',\n        }}>~</button>\n      </div>\n\n      {/* Step Explanation */}\n      <div style={{\n        padding: '8px 10px', background: theme.colors.surface, borderRadius: '6px',\n        borderLeft: `3px solid ${stepInfo[step].color}`, marginBottom: '10px',\n      }}>\n        <span style={{ fontSize: '11px', fontWeight: '600', color: stepInfo[step].color }}>{stepInfo[step].title}: </span>\n        <span style={{ fontSize: '10px', color: theme.colors.textSecondary }}>{stepInfo[step].desc}</span>\n      </div>\n\n      {/* Main Content: Image + Scores side by side */}\n      <div style={{ display: 'flex', gap: '12px', marginBottom: '10px' }}>\n        \n        {/* Left: Image Selection */}\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n          <div style={{ display: 'flex', gap: '6px' }}>\n            {images.map((img, idx) => (\n              <div key={img.id} onClick={() => selectImage(idx)} style={{\n                width: '44px', height: '44px', borderRadius: '8px',\n                border: `2px solid ${imageIdx === idx ? theme.colors.primary : theme.colors.border}`,\n                background: theme.colors.surface, cursor: 'pointer', padding: '6px',\n                opacity: imageIdx === idx ? 1 : 0.5,\n              }}>\n                {icons[img.id]}\n              </div>\n            ))}\n          </div>\n          <div style={{\n            width: '100px', height: '100px', borderRadius: '12px',\n            background: theme.colors.surface, border: `2px solid ${theme.colors.border}`,\n            padding: '12px', boxSizing: 'border-box',\n          }}>\n            {icons[images[imageIdx].id]}\n          </div>\n        </div>\n\n        {/* Right: Scores */}\n        <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '10px' }}>\n          <div style={{ fontSize: '9px', color: theme.colors.textMuted, marginBottom: '8px' }}>Input Scores (logits)</div>\n          {scores.map((score, i) => (\n            <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '6px' }}>\n              <div style={{ width: '32px', fontSize: '10px', color: classColors[i], fontWeight: '600' }}>{classes[i]}</div>\n              <input type=\"range\" min=\"-2\" max=\"5\" step=\"0.1\" value={score}\n                onChange={(e) => handleScoreChange(i, e.target.value)}\n                style={{ flex: 1, accentColor: classColors[i], height: '4px' }} />\n              <div style={{ width: '32px', fontSize: '12px', fontWeight: '700', color: classColors[i], textAlign: 'right' }}>\n                {fmt(score, 1)}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Calculation Steps */}\n      {step >= 1 && (\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '10px' }}>\n          \n          {/* Step 1: Exp */}\n          <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '8px' }}>\n            <div style={{ fontSize: '9px', color: theme.colors.blue, fontWeight: '600', marginBottom: '6px' }}>e^score</div>\n            <div style={{ display: 'flex', gap: '6px' }}>\n              {rawExpScores.map((exp, i) => (\n                <div key={i} style={{\n                  flex: 1, padding: '4px', background: theme.colors.surfaceAlt,\n                  borderRadius: '4px', border: `1px solid ${classColors[i]}`, textAlign: 'center',\n                }}>\n                  <div style={{ fontSize: '8px', color: theme.colors.textMuted }}>e^{fmt(scores[i],1)}</div>\n                  <div style={{ fontSize: '11px', fontWeight: '600', color: classColors[i] }}>{fmt(exp)}</div>\n                </div>\n              ))}\n              <div style={{\n                padding: '4px 8px', background: theme.colors.surfaceAlt,\n                borderRadius: '4px', textAlign: 'center',\n              }}>\n                <div style={{ fontSize: '8px', color: theme.colors.textMuted }}>sum</div>\n                <div style={{ fontSize: '11px', fontWeight: '600', color: theme.colors.text }}>{fmt(rawSumExp)}</div>\n              </div>\n            </div>\n          </div>\n\n          {/* Step 2: Probabilities */}\n          {step >= 2 && (\n            <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '8px' }}>\n              <div style={{ fontSize: '9px', color: theme.colors.pink, fontWeight: '600', marginBottom: '6px' }}>Probabilities</div>\n              {probs.map((p, i) => (\n                <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '4px' }}>\n                  <div style={{ width: '28px', fontSize: '9px', color: classColors[i] }}>{classes[i]}</div>\n                  <div style={{ flex: 1, height: '14px', background: theme.colors.surfaceAlt, borderRadius: '3px', overflow: 'hidden' }}>\n                    <div style={{\n                      width: `${p * 100}%`, height: '100%',\n                      background: classColors[i], borderRadius: '3px',\n                    }} />\n                  </div>\n                  <div style={{ width: '36px', fontSize: '10px', fontWeight: '600', color: classColors[i], textAlign: 'right' }}>\n                    {(p * 100).toFixed(1)}%\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Prediction */}\n      {step >= 3 && (\n        <div style={{\n          background: classColors[maxProbIdx] + '20', borderRadius: '8px', padding: '12px',\n          border: `2px solid ${classColors[maxProbIdx]}`, textAlign: 'center', marginBottom: '10px',\n        }}>\n          <span style={{ fontSize: '10px', color: theme.colors.textMuted }}>Prediction: </span>\n          <span style={{ fontSize: '18px', fontWeight: '700', color: classColors[maxProbIdx] }}>{classes[maxProbIdx]}</span>\n          <span style={{ fontSize: '11px', color: theme.colors.textSecondary, marginLeft: '8px' }}>\n            ({(probs[maxProbIdx] * 100).toFixed(1)}% confidence)\n          </span>\n        </div>\n      )}\n\n      {/* Formula */}\n      <div style={{\n        padding: '8px', background: theme.colors.surface, borderRadius: '6px',\n        fontSize: '10px', color: theme.colors.textSecondary, textAlign: 'center',\n      }}>\n        <span style={{ color: theme.colors.pink }}>softmax</span>(z<sub>i</sub>) = e<sup>z<sub>i</sub></sup> / Σe<sup>z<sub>j</sub></sup>\n        <span style={{ color: theme.colors.textMuted, marginLeft: '12px' }}>• Outputs always sum to 1</span>\n      </div>\n    </div>\n  );\n}\n",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}