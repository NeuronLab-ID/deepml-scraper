{
  "problem_id": 35,
  "title": "Convert Vector to Diagonal Matrix",
  "category": "Linear Algebra",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useEffect } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nconst elementColors = ['#38bdf8', '#a3e635', '#f472b6', '#fbbf24'];\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [currentIdx, setCurrentIdx] = useState(-1);\n  const [values, setValues] = useState([1, 2, 3, 4]);\n\n  const n = values.length;\n  const numSteps = 4;\n\n  const stepInfo = [\n    { title: 'Input Vector', desc: `x = [${values.join(', ')}] — ${n} elements`, color: theme.colors.primary },\n    { title: 'Create n×n Matrix', desc: `${n}×${n} matrix of zeros`, color: theme.colors.blue },\n    { title: 'Place on Diagonal', desc: 'x[i] goes to position (i, i)', color: theme.colors.yellow },\n    { title: 'Result', desc: 'Diagonal matrix D where D[i,i] = x[i]', color: theme.colors.green },\n  ];\n\n  // Animate diagonal placement in step 2\n  useEffect(() => {\n    if (step === 2 && currentIdx < n - 1) {\n      const timer = setTimeout(() => {\n        setCurrentIdx(i => i + 1);\n      }, 600);\n      return () => clearTimeout(timer);\n    }\n  }, [step, currentIdx, n]);\n\n  useEffect(() => {\n    if (step === 2) setCurrentIdx(0);\n    else if (step === 3) setCurrentIdx(n - 1);\n    else setCurrentIdx(-1);\n  }, [step, n]);\n\n  const play = async () => {\n    setPlaying(true);\n    setCurrentIdx(-1);\n    for (let s = 0; s < numSteps; s++) {\n      setStep(s);\n      if (s === 2) {\n        await new Promise(r => setTimeout(r, n * 600 + 500));\n      } else {\n        await new Promise(r => setTimeout(r, 1500));\n      }\n    }\n    setPlaying(false);\n  };\n\n  const reset = () => { \n    setStep(0); \n    setPlaying(false); \n    setCurrentIdx(-1);\n    setValues([1, 2, 3, 4]);\n  };\n\n  const updateValue = (idx, delta) => {\n    const newVals = [...values];\n    newVals[idx] = Math.max(0, Math.min(9, newVals[idx] + delta));\n    setValues(newVals);\n  };\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '10px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>Vector to Diagonal Matrix</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>Place vector elements on the diagonal</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '5px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '18px' : '10px', height: '10px', borderRadius: '5px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer'\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '8px 12px', background: theme.colors.surface, borderLeft: `3px solid ${stepInfo[step].color}`,\n        borderRadius: '0 6px 6px 0', marginBottom: '12px' }}>\n        <span style={{ fontWeight: '600', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title}: </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>{stepInfo[step].desc}</span>\n      </div>\n\n      {/* Main visualization */}\n      <div style={{ display: 'flex', gap: '30px', justifyContent: 'center', alignItems: 'center', marginBottom: '16px' }}>\n        \n        {/* Input vector (vertical) */}\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n          <div style={{ fontSize: '13px', color: theme.colors.textMuted, marginBottom: '10px', fontWeight: '600' }}>\n            Vector x\n          </div>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n            {values.map((val, i) => {\n              const isActive = step >= 2 && i <= currentIdx;\n              const isCurrent = step === 2 && i === currentIdx;\n              return (\n                <div key={i} style={{\n                  display: 'flex', alignItems: 'center', gap: '6px',\n                }}>\n                  <div style={{\n                    width: '50px', height: '50px', borderRadius: '8px',\n                    background: isActive ? elementColors[i] : theme.colors.surfaceAlt,\n                    border: `2px solid ${elementColors[i]}`,\n                    display: 'flex', alignItems: 'center', justifyContent: 'center',\n                    fontSize: '22px', fontWeight: '700',\n                    color: isActive ? theme.colors.background : elementColors[i],\n                    transform: isCurrent ? 'scale(1.1)' : 'scale(1)',\n                    boxShadow: isCurrent ? `0 0 15px ${elementColors[i]}` : 'none',\n                    transition: 'all 0.3s ease',\n                  }}>\n                    {val}\n                  </div>\n                  <div style={{ fontSize: '11px', color: theme.colors.textMuted }}>x[{i}]</div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Arrow */}\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n          <div style={{ fontSize: '36px', color: step >= 2 ? theme.colors.yellow : theme.colors.textMuted }}>→</div>\n          <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginTop: '4px' }}>diag(x)</div>\n        </div>\n\n        {/* Output matrix */}\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n          <div style={{ fontSize: '13px', color: theme.colors.textMuted, marginBottom: '10px', fontWeight: '600' }}>\n            Diagonal Matrix D\n          </div>\n          \n          {/* Matrix */}\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n            {Array.from({ length: n }, (_, row) => (\n              <div key={row} style={{ display: 'flex', gap: '4px' }}>\n                {Array.from({ length: n }, (_, col) => {\n                  const isDiagonal = row === col;\n                  const isActive = step >= 2 && isDiagonal && row <= currentIdx;\n                  const isCurrent = step === 2 && row === currentIdx && isDiagonal;\n                  const showZero = step >= 1 && !isDiagonal;\n                  const showValue = step >= 2 && isDiagonal && row <= currentIdx;\n                  \n                  return (\n                    <div key={col} style={{\n                      width: '50px', height: '50px', borderRadius: '6px',\n                      background: isActive ? elementColors[row] : \n                                 showZero ? theme.colors.surface : theme.colors.surfaceAlt,\n                      border: isDiagonal ? `2px solid ${elementColors[row]}40` : `1px solid ${theme.colors.border}`,\n                      display: 'flex', alignItems: 'center', justifyContent: 'center',\n                      fontSize: '20px', fontWeight: '700',\n                      color: isActive ? theme.colors.background : \n                             showZero ? theme.colors.textMuted : theme.colors.border,\n                      transform: isCurrent ? 'scale(1.1)' : 'scale(1)',\n                      boxShadow: isCurrent ? `0 0 12px ${elementColors[row]}` : 'none',\n                      transition: 'all 0.3s ease',\n                    }}>\n                      {showValue ? values[row] : showZero ? '0' : '·'}\n                    </div>\n                  );\n                })}\n              </div>\n            ))}\n          </div>\n          \n          {/* Position labels */}\n          {step >= 2 && (\n            <div style={{ marginTop: '10px', fontSize: '11px', color: theme.colors.textMuted }}>\n              D[i,i] = x[i], D[i,j] = 0 for i≠j\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Value controls */}\n      <div style={{ display: 'flex', gap: '12px', justifyContent: 'center', marginBottom: '12px' }}>\n        <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px',\n          border: step === 0 ? `2px solid ${theme.colors.primary}` : `1px solid ${theme.colors.border}` }}>\n          <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginBottom: '8px' }}>\n            Adjust values {step === 0 && <span style={{ color: theme.colors.primary }}>(click ±)</span>}\n          </div>\n          <div style={{ display: 'flex', gap: '8px' }}>\n            {values.map((val, i) => (\n              <div key={i} style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '4px' }}>\n                <button onClick={() => updateValue(i, 1)} \n                  style={{ width: '32px', height: '24px', background: theme.colors.surfaceAlt, border: 'none',\n                    borderRadius: '4px', color: theme.colors.text, cursor: 'pointer', fontSize: '14px' }}>+</button>\n                <div style={{ \n                  width: '32px', height: '32px', borderRadius: '6px',\n                  background: elementColors[i], display: 'flex', alignItems: 'center', justifyContent: 'center',\n                  fontSize: '16px', fontWeight: '700', color: theme.colors.background\n                }}>\n                  {val}\n                </div>\n                <button onClick={() => updateValue(i, -1)}\n                  style={{ width: '32px', height: '24px', background: theme.colors.surfaceAlt, border: 'none',\n                    borderRadius: '4px', color: theme.colors.text, cursor: 'pointer', fontSize: '14px' }}>−</button>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Use cases */}\n        <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px', width: '200px' }}>\n          <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginBottom: '6px' }}>Used in:</div>\n          <div style={{ fontSize: '11px', color: theme.colors.textSecondary, lineHeight: 1.6 }}>\n            • Scaling transformations<br/>\n            • Eigenvalue decomposition<br/>\n            • Covariance matrices<br/>\n            • SVD (Σ matrix)\n          </div>\n        </div>\n      </div>\n\n      {/* Key Insight */}\n      <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '10px 14px',\n        fontSize: '12px', color: theme.colors.textSecondary, borderLeft: `3px solid ${theme.colors.primary}` }}>\n        <span style={{ color: theme.colors.primary, fontWeight: '600' }}>Key: </span>\n        {step === 0 && 'A diagonal matrix has non-zero elements only on the main diagonal (top-left to bottom-right).'}\n        {step === 1 && `Start with an n×n matrix of zeros. Here n=${n}, so we have a ${n}×${n} grid.`}\n        {step === 2 && `Placing x[${Math.max(0, currentIdx)}]=${values[Math.max(0, currentIdx)]} at position (${Math.max(0, currentIdx)}, ${Math.max(0, currentIdx)}). Each element goes to row=col=index.`}\n        {step === 3 && 'Diagonal matrices are special: D×v scales each component of v independently. Easy to invert (just 1/d for each diagonal).'}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}