{
  "problem_id": 34,
  "title": "One-Hot Encoding of Nominal Values",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useEffect } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nconst wordColors = ['#38bdf8', '#a3e635', '#f472b6', '#fbbf24', '#fb923c', '#8b5cf6'];\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [currentWord, setCurrentWord] = useState(-1);\n\n  const numSteps = 5;\n\n  // The sentence\n  const sentence = \"the cat sat on the mat\";\n  const words = sentence.split(' ');\n  \n  // Build vocabulary (unique words → indices)\n  const vocab = {};\n  const uniqueWords = [];\n  words.forEach(w => {\n    if (!(w in vocab)) {\n      vocab[w] = uniqueWords.length;\n      uniqueWords.push(w);\n    }\n  });\n  \n  const vocabSize = uniqueWords.length;\n\n  // Convert words to indices\n  const indices = words.map(w => vocab[w]);\n\n  // Generate one-hot matrix\n  const oneHot = indices.map(idx => {\n    const row = Array(vocabSize).fill(0);\n    row[idx] = 1;\n    return row;\n  });\n\n  const stepInfo = [\n    { title: 'The Sentence', desc: `\"${sentence}\" — ${words.length} words`, color: theme.colors.primary },\n    { title: 'Build Vocabulary', desc: `${vocabSize} unique words → assign each an index`, color: theme.colors.blue },\n    { title: 'Words → Indices', desc: 'Replace each word with its vocabulary index', color: theme.colors.yellow },\n    { title: 'One-Hot Encode', desc: 'Each index becomes a vector with 1 at that position', color: theme.colors.pink },\n    { title: 'Result', desc: `${words.length} × ${vocabSize} matrix — each word is now a unique vector`, color: theme.colors.green },\n  ];\n\n  // Animate word-by-word in step 3\n  useEffect(() => {\n    if (step === 3 && currentWord < words.length - 1) {\n      const timer = setTimeout(() => {\n        setCurrentWord(w => w + 1);\n      }, 600);\n      return () => clearTimeout(timer);\n    }\n  }, [step, currentWord]);\n\n  useEffect(() => {\n    if (step === 3) setCurrentWord(0);\n    else if (step === 4) setCurrentWord(words.length - 1);\n    else setCurrentWord(-1);\n  }, [step]);\n\n  const play = async () => {\n    setPlaying(true);\n    setCurrentWord(-1);\n    for (let s = 0; s < numSteps; s++) {\n      setStep(s);\n      if (s === 3) {\n        await new Promise(r => setTimeout(r, words.length * 600 + 500));\n      } else {\n        await new Promise(r => setTimeout(r, 1800));\n      }\n    }\n    setPlaying(false);\n  };\n\n  const reset = () => { \n    setStep(0); \n    setPlaying(false); \n    setCurrentWord(-1);\n  };\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '10px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>One-Hot Encoding</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>Convert words to binary vectors</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '5px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '18px' : '10px', height: '10px', borderRadius: '5px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer'\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '8px 12px', background: theme.colors.surface, borderLeft: `3px solid ${stepInfo[step].color}`,\n        borderRadius: '0 6px 6px 0', marginBottom: '12px' }}>\n        <span style={{ fontWeight: '600', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title}: </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>{stepInfo[step].desc}</span>\n      </div>\n\n      {/* Main content */}\n      <div style={{ display: 'flex', gap: '16px', marginBottom: '12px' }}>\n        \n        {/* Left: Sentence & Vocabulary */}\n        <div style={{ width: '200px', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n          \n          {/* Sentence as words */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px' }}>\n            <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginBottom: '8px' }}>Sentence</div>\n            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>\n              {words.map((word, i) => {\n                const vocabIdx = vocab[word];\n                const isActive = step >= 2 && (step > 3 || i <= currentWord);\n                const isCurrent = step === 3 && i === currentWord;\n                return (\n                  <div key={i} style={{\n                    padding: '6px 10px', borderRadius: '6px',\n                    background: isActive ? wordColors[vocabIdx] + '30' : theme.colors.surfaceAlt,\n                    border: `2px solid ${isActive ? wordColors[vocabIdx] : theme.colors.border}`,\n                    transform: isCurrent ? 'scale(1.1)' : 'scale(1)',\n                    boxShadow: isCurrent ? `0 0 12px ${wordColors[vocabIdx]}` : 'none',\n                    transition: 'all 0.3s ease',\n                  }}>\n                    <div style={{ fontSize: '14px', fontWeight: '600', color: isActive ? wordColors[vocabIdx] : theme.colors.text }}>\n                      {word}\n                    </div>\n                    {step >= 2 && (\n                      <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginTop: '2px' }}>\n                        idx: {vocabIdx}\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Vocabulary */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px',\n            border: step === 1 ? `2px solid ${theme.colors.blue}` : `1px solid ${theme.colors.border}` }}>\n            <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginBottom: '8px' }}>\n              Vocabulary ({vocabSize} unique)\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n              {uniqueWords.map((word, i) => (\n                <div key={i} style={{\n                  display: 'flex', alignItems: 'center', gap: '8px',\n                  padding: '6px 8px', borderRadius: '4px',\n                  background: step >= 1 ? wordColors[i] + '15' : theme.colors.surfaceAlt,\n                  opacity: step >= 1 ? 1 : 0.5,\n                }}>\n                  <div style={{\n                    width: '22px', height: '22px', borderRadius: '4px',\n                    background: wordColors[i], display: 'flex', alignItems: 'center', justifyContent: 'center',\n                    fontSize: '12px', fontWeight: '700', color: theme.colors.background,\n                  }}>\n                    {i}\n                  </div>\n                  <span style={{ fontSize: '13px', color: wordColors[i], fontWeight: '600' }}>\n                    \"{word}\"\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Right: One-hot matrix */}\n        <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '12px' }}>\n          <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginBottom: '10px' }}>\n            One-Hot Matrix ({words.length} × {vocabSize})\n          </div>\n          \n          {/* Column headers (vocabulary words) */}\n          <div style={{ display: 'flex', gap: '4px', marginBottom: '6px', marginLeft: '70px' }}>\n            {uniqueWords.map((word, c) => (\n              <div key={c} style={{\n                width: '52px', padding: '4px', borderRadius: '4px',\n                background: wordColors[c] + '20',\n                textAlign: 'center',\n              }}>\n                <div style={{ fontSize: '10px', color: wordColors[c], fontWeight: '600' }}>{word}</div>\n                <div style={{ fontSize: '9px', color: theme.colors.textMuted }}>col {c}</div>\n              </div>\n            ))}\n          </div>\n          \n          {/* Matrix rows */}\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n            {words.map((word, i) => {\n              const vocabIdx = vocab[word];\n              const isActive = step >= 3 && (step > 3 || i <= currentWord);\n              const isCurrent = step === 3 && i === currentWord;\n              \n              return (\n                <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  {/* Row label */}\n                  <div style={{\n                    width: '60px', padding: '6px', borderRadius: '4px',\n                    background: isActive ? wordColors[vocabIdx] + '20' : theme.colors.surfaceAlt,\n                    border: isCurrent ? `2px solid ${wordColors[vocabIdx]}` : '2px solid transparent',\n                    textAlign: 'center',\n                  }}>\n                    <div style={{ fontSize: '11px', color: isActive ? wordColors[vocabIdx] : theme.colors.textMuted, fontWeight: '600' }}>\n                      {word}\n                    </div>\n                  </div>\n                  \n                  {/* One-hot vector */}\n                  <div style={{ display: 'flex', gap: '4px' }}>\n                    {oneHot[i].map((cell, c) => {\n                      const isOne = cell === 1;\n                      return (\n                        <div key={c} style={{\n                          width: '52px', height: '36px', borderRadius: '6px',\n                          background: !isActive ? theme.colors.surfaceAlt :\n                                     isOne ? wordColors[vocabIdx] : theme.colors.surface,\n                          border: `1px solid ${isActive && isOne ? wordColors[vocabIdx] : theme.colors.border}`,\n                          display: 'flex', alignItems: 'center', justifyContent: 'center',\n                          fontSize: '16px', fontWeight: '700',\n                          color: isActive && isOne ? theme.colors.background : \n                                 isActive ? theme.colors.textMuted : theme.colors.border,\n                          transform: isCurrent && isOne ? 'scale(1.1)' : 'scale(1)',\n                          boxShadow: isCurrent && isOne ? `0 0 10px ${wordColors[vocabIdx]}` : 'none',\n                          transition: 'all 0.3s ease',\n                        }}>\n                          {isActive ? cell : '·'}\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Key Insight */}\n      <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '10px 14px',\n        fontSize: '12px', color: theme.colors.textSecondary, borderLeft: `3px solid ${theme.colors.primary}` }}>\n        <span style={{ color: theme.colors.primary, fontWeight: '600' }}>Key: </span>\n        {step === 0 && 'Computers can\\'t understand words directly. We need to convert text to numbers that neural networks can process.'}\n        {step === 1 && `First, build a vocabulary: find all unique words and assign each an index. \"${uniqueWords.join('\" → ')}\" → 0, 1, 2...`}\n        {step === 2 && 'Now each word becomes its vocabulary index. Notice \"the\" appears twice but both map to index 0.'}\n        {step === 3 && `Encoding \"${words[Math.max(0, currentWord)]}\" (idx=${indices[Math.max(0, currentWord)]}): create vector of ${vocabSize} zeros, put 1 at position ${indices[Math.max(0, currentWord)]}.`}\n        {step === 4 && 'Each word is now a unique direction in 5D space! \"cat\"=[0,1,0,0,0] is perpendicular to \"sat\"=[0,0,1,0,0]. No word is \"greater\" than another.'}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}