{
  "problem_id": 48,
  "title": "Implement Reduced Row Echelon Form (RREF) Function",
  "category": "Linear Algebra",
  "enabled": true,
  "type": "react",
  "code": "\nimport React, { useState, useMemo } from 'react';\n\nconst theme = {\n  colors: {\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    green: '#4ade80',\n    orange: '#fb923c',\n    yellow: '#fbbf24',\n    red: '#f43f5e',\n    purple: '#a78bfa',\n    pink: '#f472b6',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\n// Sample matrices\nconst PRESETS = {\n  simple: [[1, 2, -1, -4], [2, 3, -1, -11], [-2, 0, -3, 22]],\n  identity: [[2, 4, -2], [4, 9, -3], [-2, -3, 7]],\n  zeroStart: [[0, 2, -1, -4], [2, 0, -1, -11], [-2, 0, 0, 22]],\n  dependent: [[1, 2, -1], [2, 4, -1], [-2, -4, -3]],\n};\n\n// Compute RREF with steps\nfunction computeRREFSteps(matrix) {\n  const steps = [];\n  let A = matrix.map(row => [...row]);\n  const n = A.length;\n  const m = A[0].length;\n  \n  steps.push({ matrix: A.map(r => [...r]), description: 'Initial matrix', pivotRow: -1, pivotCol: -1 });\n  \n  let row = 0;\n  \n  for (let col = 0; col < m && row < n; col++) {\n    // Find pivot\n    let pivotRow = -1;\n    for (let i = row; i < n; i++) {\n      if (Math.abs(A[i][col]) > 1e-10) {\n        pivotRow = i;\n        break;\n      }\n    }\n    \n    if (pivotRow === -1) continue; // No pivot in this column\n    \n    // Swap rows if needed\n    if (pivotRow !== row) {\n      [A[row], A[pivotRow]] = [A[pivotRow], A[row]];\n      steps.push({ \n        matrix: A.map(r => [...r]), \n        description: `Swap Row ${row + 1} ‚Üî Row ${pivotRow + 1}`,\n        pivotRow: row, pivotCol: col,\n        highlight: [row, pivotRow]\n      });\n    }\n    \n    // Scale pivot row\n    const pivot = A[row][col];\n    if (Math.abs(pivot - 1) > 1e-10) {\n      A[row] = A[row].map(x => x / pivot);\n      steps.push({\n        matrix: A.map(r => [...r]),\n        description: `Scale Row ${row + 1} by 1/${pivot.toFixed(2)} to make pivot = 1`,\n        pivotRow: row, pivotCol: col,\n        highlight: [row]\n      });\n    }\n    \n    // Eliminate other rows\n    for (let i = 0; i < n; i++) {\n      if (i !== row && Math.abs(A[i][col]) > 1e-10) {\n        const factor = A[i][col];\n        A[i] = A[i].map((x, j) => x - factor * A[row][j]);\n        steps.push({\n          matrix: A.map(r => [...r]),\n          description: `Row ${i + 1} = Row ${i + 1} - (${factor.toFixed(2)}) √ó Row ${row + 1}`,\n          pivotRow: row, pivotCol: col,\n          highlight: [i],\n          eliminateRow: i\n        });\n      }\n    }\n    \n    row++;\n  }\n  \n  steps.push({ \n    matrix: A.map(r => [...r]), \n    description: '‚úì RREF Complete!', \n    pivotRow: -1, pivotCol: -1,\n    done: true\n  });\n  \n  return steps;\n}\n\nexport default function RREFPlayground() {\n  const [preset, setPreset] = useState('simple');\n  const [step, setStep] = useState(0);\n  \n  const matrix = PRESETS[preset];\n  const steps = useMemo(() => computeRREFSteps(matrix), [preset]);\n  const currentStep = steps[Math.min(step, steps.length - 1)];\n  \n  const maxStep = steps.length - 1;\n\n  return (\n    <div style={styles.container}>\n      {/* Header */}\n      <div style={styles.header}>\n        <div style={styles.title}>Reduced Row Echelon Form</div>\n        <div style={styles.subtitle}>Step-by-step matrix transformation</div>\n      </div>\n\n      {/* Preset Selector */}\n      <div style={styles.presetRow}>\n        {Object.keys(PRESETS).map(key => (\n          <button\n            key={key}\n            onClick={() => { setPreset(key); setStep(0); }}\n            style={{\n              ...styles.presetBtn,\n              background: preset === key ? theme.colors.blue : theme.colors.surface,\n              color: preset === key ? '#000' : theme.colors.text,\n            }}\n          >\n            {key === 'simple' && '3√ó4 System'}\n            {key === 'identity' && '3√ó3 ‚Üí Identity'}\n            {key === 'zeroStart' && 'Zero Start'}\n            {key === 'dependent' && 'Dependent'}\n          </button>\n        ))}\n      </div>\n\n      <div style={styles.mainRow}>\n        {/* Matrix Display */}\n        <div style={styles.matrixPanel}>\n          <div style={styles.matrixTitle}>\n            Step {step + 1} / {steps.length}\n          </div>\n          <div style={styles.matrixWrap}>\n            <div style={styles.bracket}>[</div>\n            <div style={styles.matrixInner}>\n              {currentStep.matrix.map((row, i) => (\n                <div key={i} style={styles.matrixRow}>\n                  {row.map((val, j) => {\n                    const isPivot = i === currentStep.pivotRow && j === currentStep.pivotCol;\n                    const isPivotCol = j === currentStep.pivotCol && currentStep.pivotRow >= 0;\n                    const isHighlight = currentStep.highlight?.includes(i);\n                    \n                    return (\n                      <div\n                        key={j}\n                        style={{\n                          ...styles.cell,\n                          background: isPivot ? theme.colors.yellow : \n                                     isHighlight ? `${theme.colors.blue}30` :\n                                     isPivotCol ? `${theme.colors.yellow}15` : 'transparent',\n                          color: isPivot ? '#000' : \n                                 Math.abs(val) < 1e-10 ? theme.colors.textMuted : theme.colors.text,\n                          fontWeight: isPivot ? 'bold' : 'normal',\n                        }}\n                      >\n                        {formatNum(val)}\n                      </div>\n                    );\n                  })}\n                </div>\n              ))}\n            </div>\n            <div style={styles.bracket}>]</div>\n          </div>\n          \n          {/* Step Description */}\n          <div style={{\n            ...styles.stepDesc,\n            background: currentStep.done ? `${theme.colors.green}20` : theme.colors.surfaceAlt,\n            borderColor: currentStep.done ? theme.colors.green : theme.colors.border,\n          }}>\n            {currentStep.description}\n          </div>\n        </div>\n\n        {/* Right Panel */}\n        <div style={styles.infoPanel}>\n          {/* Controls */}\n          <div style={styles.card}>\n            <div style={styles.cardTitle}>Navigation</div>\n            <div style={styles.navRow}>\n              <button \n                onClick={() => setStep(0)} \n                disabled={step === 0}\n                style={{...styles.navBtn, opacity: step === 0 ? 0.3 : 1}}\n              >‚èÆ</button>\n              <button \n                onClick={() => setStep(Math.max(0, step - 1))} \n                disabled={step === 0}\n                style={{...styles.navBtn, opacity: step === 0 ? 0.3 : 1}}\n              >‚óÄ</button>\n              <button \n                onClick={() => setStep(Math.min(maxStep, step + 1))} \n                disabled={step === maxStep}\n                style={{...styles.navBtn, background: theme.colors.blue, color: '#000', opacity: step === maxStep ? 0.3 : 1}}\n              >‚ñ∂</button>\n              <button \n                onClick={() => setStep(maxStep)} \n                disabled={step === maxStep}\n                style={{...styles.navBtn, opacity: step === maxStep ? 0.3 : 1}}\n              >‚è≠</button>\n            </div>\n            <input\n              type=\"range\"\n              min={0}\n              max={maxStep}\n              value={step}\n              onChange={(e) => setStep(parseInt(e.target.value))}\n              style={styles.slider}\n            />\n          </div>\n\n          {/* RREF Rules */}\n          <div style={styles.card}>\n            <div style={styles.cardTitle}>RREF Properties</div>\n            <div style={styles.ruleList}>\n              <div style={styles.rule}>\n                <span style={{color: theme.colors.yellow}}>1.</span> Leading entry in each row is <strong>1</strong>\n              </div>\n              <div style={styles.rule}>\n                <span style={{color: theme.colors.yellow}}>2.</span> Leading 1 is the only non-zero in its column\n              </div>\n              <div style={styles.rule}>\n                <span style={{color: theme.colors.yellow}}>3.</span> Leading 1s move right as you go down\n              </div>\n              <div style={styles.rule}>\n                <span style={{color: theme.colors.yellow}}>4.</span> Zero rows are at the bottom\n              </div>\n            </div>\n          </div>\n\n          {/* Operations Legend */}\n          <div style={styles.card}>\n            <div style={styles.cardTitle}>Row Operations Used</div>\n            <div style={styles.opList}>\n              <div style={styles.op}>\n                <span style={{color: theme.colors.orange}}>Swap:</span> Exchange two rows\n              </div>\n              <div style={styles.op}>\n                <span style={{color: theme.colors.green}}>Scale:</span> Multiply row by constant\n              </div>\n              <div style={styles.op}>\n                <span style={{color: theme.colors.blue}}>Eliminate:</span> Add multiple of one row to another\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Insight */}\n      <div style={styles.insight}>\n        <strong style={{color: theme.colors.yellow}}>üí° Why RREF?</strong> RREF makes it easy to read solutions directly. \n        Each pivot column represents a basic variable, and non-pivot columns are free variables.\n      </div>\n    </div>\n  );\n}\n\nfunction formatNum(x) {\n  if (Math.abs(x) < 1e-10) return '0';\n  if (Math.abs(x - Math.round(x)) < 1e-10) return Math.round(x).toString();\n  return x.toFixed(2);\n}\n\nconst styles = {\n  container: {\n    fontFamily: theme.font,\n    background: theme.colors.background,\n    color: theme.colors.text,\n    padding: 12,\n    minHeight: '100vh',\n  },\n  header: {\n    marginBottom: 10,\n  },\n  title: {\n    fontSize: 18, fontWeight: 'bold',\n    background: `linear-gradient(90deg, ${theme.colors.yellow}, ${theme.colors.orange})`,\n    WebkitBackgroundClip: 'text',\n    WebkitTextFillColor: 'transparent',\n  },\n  subtitle: {\n    fontSize: 10, color: theme.colors.textSecondary, marginTop: 2\n  },\n  presetRow: {\n    display: 'flex', gap: 6, marginBottom: 12, flexWrap: 'wrap'\n  },\n  presetBtn: {\n    padding: '6px 10px', border: 'none', borderRadius: 6,\n    fontSize: 10, cursor: 'pointer', fontFamily: theme.font,\n    transition: 'all 0.2s'\n  },\n  mainRow: {\n    display: 'flex', gap: 12\n  },\n  matrixPanel: {\n    flex: 1\n  },\n  matrixTitle: {\n    fontSize: 10, color: theme.colors.textMuted, marginBottom: 6\n  },\n  matrixWrap: {\n    display: 'flex', alignItems: 'center', gap: 4,\n    background: theme.colors.surface,\n    padding: 12, borderRadius: 10,\n    border: `1px solid ${theme.colors.border}`,\n  },\n  bracket: {\n    fontSize: 48, color: theme.colors.textMuted, fontWeight: 100\n  },\n  matrixInner: {\n    display: 'flex', flexDirection: 'column', gap: 4\n  },\n  matrixRow: {\n    display: 'flex', gap: 4\n  },\n  cell: {\n    width: 44, height: 32,\n    display: 'flex', alignItems: 'center', justifyContent: 'center',\n    borderRadius: 4, fontSize: 12,\n    transition: 'all 0.2s'\n  },\n  stepDesc: {\n    marginTop: 10, padding: 10, borderRadius: 8,\n    border: '1px solid',\n    fontSize: 11, textAlign: 'center'\n  },\n  infoPanel: {\n    width: 200, display: 'flex', flexDirection: 'column', gap: 10, flexShrink: 0\n  },\n  card: {\n    background: theme.colors.surface, border: `1px solid ${theme.colors.border}`,\n    borderRadius: 8, padding: 10\n  },\n  cardTitle: {\n    fontSize: 9, fontWeight: 'bold', color: theme.colors.textSecondary,\n    textTransform: 'uppercase', letterSpacing: 0.5, marginBottom: 8\n  },\n  navRow: {\n    display: 'flex', gap: 6, justifyContent: 'center', marginBottom: 8\n  },\n  navBtn: {\n    width: 36, height: 28, border: 'none', borderRadius: 6,\n    background: theme.colors.surfaceAlt, color: theme.colors.text,\n    cursor: 'pointer', fontSize: 12, fontFamily: theme.font\n  },\n  slider: {\n    width: '100%', accentColor: theme.colors.blue\n  },\n  ruleList: {\n    fontSize: 10, lineHeight: 1.6\n  },\n  rule: {\n    marginBottom: 4\n  },\n  opList: {\n    fontSize: 10, lineHeight: 1.6\n  },\n  op: {\n    marginBottom: 4\n  },\n  insight: {\n    marginTop: 12, padding: 10,\n    background: `${theme.colors.yellow}10`, border: `1px solid ${theme.colors.yellow}25`,\n    borderRadius: 8, fontSize: 10, lineHeight: 1.5, color: theme.colors.textSecondary\n  }\n};\n",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}