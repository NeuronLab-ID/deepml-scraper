{
  "problem_id": 51,
  "title": "Optimal String Alignment Distance",
  "category": "NLP",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useEffect, useMemo } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    purple: '#c084fc',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nexport default function App() {\n  const [s1, setS1] = useState(\"caper\");\n  const [s2, setS2] = useState(\"acer\");\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n\n  // Calculate OSA Matrix and Steps\n  const { matrix, steps, finalDistance } = useMemo(() => {\n    const n = s1.length;\n    const m = s2.length;\n    // Initialize DP matrix with metadata\n    // cell: { value, type, prevCoords: [r, c] }\n    const dp = Array(n + 1).fill().map(() => Array(m + 1).fill(null));\n    \n    // List of coordinates to visit in order for animation\n    const sequence = [];\n\n    // Fill base cases\n    for (let i = 0; i <= n; i++) {\n      dp[i][0] = { value: i, type: 'init', cost: i };\n      sequence.push({ r: i, c: 0 });\n    }\n    for (let j = 1; j <= m; j++) {\n      dp[0][j] = { value: j, type: 'init', cost: j };\n      sequence.push({ r: 0, c: j });\n    }\n\n    // Fill main matrix\n    for (let i = 1; i <= n; i++) {\n      for (let j = 1; j <= m; j++) {\n        const cost = s1[i - 1] === s2[j - 1] ? 0 : 1;\n        \n        const del = dp[i - 1][j].value + 1;\n        const ins = dp[i][j - 1].value + 1;\n        const sub = dp[i - 1][j - 1].value + cost;\n        \n        let minVal = Math.min(del, ins, sub);\n        let type = '';\n        let prev = [];\n\n        // Prioritize Match > Sub > Del > Ins for visual clarity\n        if (minVal === sub) {\n          type = cost === 0 ? 'match' : 'sub';\n          prev = [i - 1, j - 1];\n        } else if (minVal === del) {\n          type = 'del';\n          prev = [i - 1, j];\n        } else {\n          type = 'ins';\n          prev = [i, j - 1];\n        }\n\n        // Check Transposition\n        if (i > 1 && j > 1 && s1[i - 1] === s2[j - 2] && s1[i - 2] === s2[j - 1]) {\n          const trans = dp[i - 2][j - 2].value + 1;\n          if (trans < minVal) {\n            minVal = trans;\n            type = 'trans';\n            prev = [i - 2, j - 2];\n          }\n        }\n\n        dp[i][j] = { value: minVal, type, prev };\n        sequence.push({ r: i, c: j });\n      }\n    }\n\n    // Sort sequence to animate Row by Row cleanly (override base case insert order)\n    const sortedSequence = [];\n    for(let i=0; i<=n; i++) {\n      for(let j=0; j<=m; j++) {\n        sortedSequence.push({r: i, c: j});\n      }\n    }\n\n    return { matrix: dp, steps: sortedSequence, finalDistance: dp[n][m].value };\n  }, [s1, s2]);\n\n  // Animation Loop\n  useEffect(() => {\n    let timer;\n    if (playing && step < steps.length - 1) {\n      timer = setTimeout(() => setStep(s => s + 1), 200);\n    } else if (playing) {\n      setPlaying(false);\n    }\n    return () => clearTimeout(timer);\n  }, [playing, step, steps.length]);\n\n  // Reset when inputs change\n  useEffect(() => {\n    setStep(0);\n    setPlaying(false);\n  }, [s1, s2]);\n\n  const currentCell = steps[step];\n  const cellData = matrix[currentCell.r][currentCell.c];\n\n  // Helper for colors\n  const getTypeColor = (type) => {\n    if (type === 'match') return theme.colors.green;\n    if (type === 'sub') return theme.colors.yellow;\n    if (type === 'ins') return theme.colors.blue;\n    if (type === 'del') return theme.colors.pink;\n    if (type === 'trans') return theme.colors.purple;\n    return theme.colors.textMuted;\n  };\n\n  return (\n    <div style={{ \n      background: theme.colors.background, \n      minHeight: '100vh', \n      padding: '20px', \n      fontFamily: theme.font, \n      color: theme.colors.text,\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '20px'\n    }}>\n      \n      {/* Header & Controls */}\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'end', flexWrap: 'wrap', gap: '10px' }}>\n        <div>\n          <div style={{ fontSize: '20px', fontWeight: 'bold', marginBottom: '10px' }}>OSA Distance</div>\n          <div style={{ display: 'flex', gap: '15px' }}>\n            <div>\n              <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '4px' }}>Source (Vertical)</div>\n              <input \n                value={s1} \n                maxLength={8}\n                onChange={(e) => setS1(e.target.value.toLowerCase().replace(/[^a-z]/g, ''))}\n                style={{ \n                  background: theme.colors.surface, border: `1px solid ${theme.colors.border}`, \n                  color: theme.colors.text, padding: '8px', borderRadius: '6px', width: '100px', letterSpacing: '2px'\n                }}\n              />\n            </div>\n            <div>\n              <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '4px' }}>Target (Horizontal)</div>\n              <input \n                value={s2} \n                maxLength={8}\n                onChange={(e) => setS2(e.target.value.toLowerCase().replace(/[^a-z]/g, ''))}\n                style={{ \n                  background: theme.colors.surface, border: `1px solid ${theme.colors.border}`, \n                  color: theme.colors.text, padding: '8px', borderRadius: '6px', width: '100px', letterSpacing: '2px'\n                }}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div style={{ display: 'flex', gap: '8px' }}>\n           <button onClick={() => setStep(Math.max(0, step - 1))} \n            style={{ padding: '8px 16px', background: theme.colors.surface, border: 'none', borderRadius: '6px', color: theme.colors.text, cursor: 'pointer' }}>\n            {'<'}\n          </button>\n          <button onClick={() => setPlaying(!playing)} \n            style={{ padding: '8px 24px', background: playing ? theme.colors.textMuted : theme.colors.primary, border: 'none', borderRadius: '6px', color: 'white', cursor: 'pointer', fontWeight: 'bold' }}>\n            {playing ? 'Pause' : 'Play'}\n          </button>\n           <button onClick={() => setStep(Math.min(steps.length - 1, step + 1))} \n            style={{ padding: '8px 16px', background: theme.colors.surface, border: 'none', borderRadius: '6px', color: theme.colors.text, cursor: 'pointer' }}>\n            {'>'}\n          </button>\n           <button onClick={() => { setStep(0); setPlaying(false); }} \n            style={{ padding: '8px', background: theme.colors.surface, border: 'none', borderRadius: '6px', color: theme.colors.textSecondary, cursor: 'pointer' }}>\n            Reset\n          </button>\n        </div>\n      </div>\n\n      {/* Grid Container */}\n      <div style={{ overflowX: 'auto', paddingBottom: '10px' }}>\n        <div style={{ \n          display: 'grid', \n          gridTemplateColumns: `30px 30px repeat(${s2.length + 1}, 45px)`,\n          gap: '4px',\n          alignItems: 'center'\n        }}>\n          \n          {/* Top Header Row (Target String) */}\n          <div></div> {/* Corner spacer */}\n          <div></div> {/* Index spacer */}\n          <div style={{ textAlign: 'center', color: theme.colors.textMuted, fontSize: '12px' }}>ε</div>\n          {s2.split('').map((char, i) => (\n            <div key={i} style={{ textAlign: 'center', fontWeight: 'bold', color: theme.colors.primary }}>{char}</div>\n          ))}\n\n          {/* Main Rows */}\n          {Array.from({ length: s1.length + 1 }).map((_, r) => (\n            <React.Fragment key={r}>\n              {/* Left Header Col (Source String) */}\n              <div style={{ fontWeight: 'bold', color: theme.colors.primary, textAlign: 'center' }}>\n                {r === 0 ? 'ε' : s1[r-1]}\n              </div>\n              <div style={{ fontSize: '10px', color: theme.colors.textMuted, textAlign: 'center' }}>{r}</div>\n\n              {/* Matrix Cells */}\n              {Array.from({ length: s2.length + 1 }).map((_, c) => {\n                // Determine state of this cell relative to current animation step\n                // Find index of this cell in the sorted sequence\n                const cellIndex = steps.findIndex(s => s.r === r && s.c === c);\n                const isRevealed = cellIndex <= step;\n                const isCurrent = cellIndex === step;\n                \n                // Is this cell a 'parent' (source of calculation) for the current active cell?\n                let isParent = false;\n                if (currentCell.r > 0 && currentCell.c > 0 && cellData.prev) {\n                   isParent = cellData.prev[0] === r && cellData.prev[1] === c;\n                }\n                // For base cases, the \"parent\" concept is simplified\n                if (cellData.type === 'init') isParent = false;\n\n                const data = matrix[r][c];\n\n                return (\n                  <div key={c} style={{ \n                    width: '45px', height: '45px', \n                    background: isCurrent ? theme.colors.surfaceAlt : theme.colors.surface,\n                    border: isCurrent \n                      ? `2px solid ${theme.colors.text}` \n                      : isParent \n                        ? `2px dashed ${getTypeColor(cellData.type)}`\n                        : `1px solid ${theme.colors.border}`,\n                    borderRadius: '8px',\n                    display: 'flex', alignItems: 'center', justifyContent: 'center',\n                    fontWeight: isRevealed ? 'bold' : 'normal',\n                    color: isRevealed \n                      ? (isCurrent || isParent ? getTypeColor(data.type) : theme.colors.text)\n                      : 'transparent',\n                    transition: 'all 0.2s ease',\n                    position: 'relative',\n                    boxShadow: isCurrent ? `0 0 15px ${getTypeColor(data.type)}40` : 'none'\n                  }}>\n                    {isRevealed ? data.value : ''}\n                  </div>\n                );\n              })}\n            </React.Fragment>\n          ))}\n        </div>\n      </div>\n\n      {/* Logic / Legend */}\n      <div style={{ \n        background: theme.colors.surface, \n        borderRadius: '12px', \n        padding: '16px',\n        borderLeft: `4px solid ${getTypeColor(cellData.type)}`\n      }}>\n        <div style={{ marginBottom: '12px', fontSize: '14px', fontWeight: 'bold', color: theme.colors.textSecondary }}>\n           Step {step}: Cell ({currentCell.r}, {currentCell.c}) \n           {currentCell.r > 0 && currentCell.c > 0 && ` — comparing '${s1[currentCell.r-1]}' & '${s2[currentCell.c-1]}'`}\n        </div>\n        \n        <div style={{ display: 'flex', gap: '20px', flexWrap: 'wrap', fontSize: '13px' }}>\n          {cellData.type === 'init' ? (\n            <span>Initializing base cases (empty string vs string).</span>\n          ) : (\n            <>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '6px', opacity: cellData.type === 'match' ? 1 : 0.4 }}>\n                <div style={{ width: '10px', height: '10px', background: theme.colors.green, borderRadius: '50%' }} />\n                <span>Match (Diag)</span>\n              </div>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '6px', opacity: cellData.type === 'sub' ? 1 : 0.4 }}>\n                <div style={{ width: '10px', height: '10px', background: theme.colors.yellow, borderRadius: '50%' }} />\n                <span>Substitute (Diag + 1)</span>\n              </div>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '6px', opacity: cellData.type === 'ins' ? 1 : 0.4 }}>\n                <div style={{ width: '10px', height: '10px', background: theme.colors.blue, borderRadius: '50%' }} />\n                <span>Insert (Left + 1)</span>\n              </div>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '6px', opacity: cellData.type === 'del' ? 1 : 0.4 }}>\n                <div style={{ width: '10px', height: '10px', background: theme.colors.pink, borderRadius: '50%' }} />\n                <span>Delete (Top + 1)</span>\n              </div>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '6px', opacity: cellData.type === 'trans' ? 1 : 0.4 }}>\n                <div style={{ width: '10px', height: '10px', background: theme.colors.purple, borderRadius: '50%' }} />\n                <span>Transpose (xy becomes yx)</span>\n              </div>\n            </>\n          )}\n        </div>\n\n        {step === steps.length - 1 && (\n           <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: `1px solid ${theme.colors.border}`, color: theme.colors.green, fontWeight: 'bold' }}>\n             Result: Minimum edits required is {finalDistance}.\n           </div>\n        )}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}