{
  "problem_id": 5,
  "title": "Scalar Multiplication of a Matrix",
  "category": "Linear Algebra",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo } from 'react';\n\n// ============================================\n// Inline SVG Icons\n// ============================================\nconst Icons = {\n  X: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/>\n    </svg>\n  ),\n  Equal: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <line x1=\"5\" y1=\"9\" x2=\"19\" y2=\"9\"/><line x1=\"5\" y1=\"15\" x2=\"19\" y2=\"15\"/>\n    </svg>\n  ),\n  Play: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <polygon points=\"5 3 19 12 5 21 5 3\"/>\n    </svg>\n  ),\n  RotateCcw: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\"/><path d=\"M3 3v5h5\"/>\n    </svg>\n  ),\n  Shuffle: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22\"/><path d=\"m18 2 4 4-4 4\"/><path d=\"M2 6h1.9c1.5 0 2.9.9 3.6 2.2\"/><path d=\"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8\"/><path d=\"m18 14 4 4-4 4\"/>\n    </svg>\n  ),\n  Scaling: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"m8 12 4-4 4 4\"/><path d=\"m8 12 4 4 4-4\"/>\n    </svg>\n  ),\n};\n\n// ============================================\n// Design Tokens\n// ============================================\nconst theme = {\n  colors: {\n    primary: '#6366f1',\n    primaryHover: '#4f46e5',\n    secondary: '#ffffff',\n    background: '#000000',\n    surface: '#0a0a0a',\n    surfaceAlt: '#111111',\n    border: '#1f1f1f',\n    borderLight: '#2a2a2a',\n    text: '#ffffff',\n    textSecondary: '#a1a1aa',\n    textMuted: '#71717a',\n    success: '#22c55e',\n    error: '#ef4444',\n    warning: '#f59e0b',\n    scalar: '#f59e0b',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\n// ============================================\n// Card Component\n// ============================================\nfunction Card({ children, style = {} }) {\n  return (\n    <div\n      style={{\n        background: theme.colors.surface,\n        border: `1px solid ${theme.colors.border}`,\n        borderRadius: '12px',\n        padding: '24px',\n        ...style,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\n// ============================================\n// Matrix Cell\n// ============================================\nfunction MatrixCell({ value, onChange, isHighlighted, isResult, animationDelay = 0 }) {\n  const displayValue = Number.isInteger(value) ? value : value.toFixed(1);\n  \n  return (\n    <div style={{ position: 'relative' }}>\n      {isResult ? (\n        <div\n          style={{\n            width: '52px',\n            height: '52px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            background: isHighlighted ? `${theme.colors.primary}20` : theme.colors.surfaceAlt,\n            border: `2px solid ${isHighlighted ? theme.colors.primary : theme.colors.border}`,\n            borderRadius: '8px',\n            color: isHighlighted ? theme.colors.primary : theme.colors.text,\n            fontFamily: theme.font,\n            fontSize: '15px',\n            fontWeight: '600',\n            transition: `all 0.3s ease ${animationDelay}ms`,\n            transform: isHighlighted ? 'scale(1.05)' : 'scale(1)',\n          }}\n        >\n          {displayValue}\n        </div>\n      ) : (\n        <input\n          type=\"number\"\n          value={value}\n          onChange={(e) => onChange(parseFloat(e.target.value) || 0)}\n          style={{\n            width: '52px',\n            height: '52px',\n            background: isHighlighted ? `${theme.colors.primary}20` : theme.colors.surfaceAlt,\n            border: `2px solid ${isHighlighted ? theme.colors.primary : theme.colors.border}`,\n            borderRadius: '8px',\n            color: isHighlighted ? theme.colors.primary : theme.colors.text,\n            fontFamily: theme.font,\n            fontSize: '15px',\n            fontWeight: '600',\n            textAlign: 'center',\n            outline: 'none',\n            transition: `all 0.3s ease ${animationDelay}ms`,\n            transform: isHighlighted ? 'scale(1.05)' : 'scale(1)',\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\n// ============================================\n// Calculation Step\n// ============================================\nfunction CalculationStep({ original, scalar, result, rowIdx, colIdx, isActive }) {\n  if (!isActive) return null;\n  \n  return (\n    <div style={{\n      display: 'inline-flex',\n      alignItems: 'center',\n      gap: '8px',\n      padding: '8px 12px',\n      background: theme.colors.surfaceAlt,\n      borderRadius: '6px',\n      fontSize: '13px',\n      fontFamily: theme.font,\n    }}>\n      <span style={{ color: theme.colors.textMuted }}>[{rowIdx}][{colIdx}]:</span>\n      <span style={{ color: theme.colors.text }}>{original}</span>\n      <span style={{ color: theme.colors.textMuted }}>×</span>\n      <span style={{ color: theme.colors.scalar, fontWeight: '600' }}>{scalar}</span>\n      <span style={{ color: theme.colors.textMuted }}>=</span>\n      <span style={{ \n        color: theme.colors.primary, \n        fontWeight: '700',\n        background: `${theme.colors.primary}20`,\n        padding: '2px 6px',\n        borderRadius: '4px',\n      }}>\n        {Number.isInteger(result) ? result : result.toFixed(1)}\n      </span>\n    </div>\n  );\n}\n\n// ============================================\n// Main Component\n// ============================================\nexport default function ScalarMultiply() {\n  const [matrix, setMatrix] = useState([\n    [1, 2],\n    [3, 4],\n  ]);\n  const [scalar, setScalar] = useState(2);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [highlightedCell, setHighlightedCell] = useState(null);\n  const [showCalculations, setShowCalculations] = useState(false);\n  \n  const rows = matrix.length;\n  const cols = matrix[0].length;\n  \n  // Compute result matrix\n  const resultMatrix = useMemo(() => {\n    return matrix.map(row => row.map(val => val * scalar));\n  }, [matrix, scalar]);\n  \n  // Update matrix cell\n  const updateMatrix = (rowIdx, colIdx, value) => {\n    const newMatrix = matrix.map((row, r) =>\n      row.map((cell, c) => (r === rowIdx && c === colIdx ? value : cell))\n    );\n    setMatrix(newMatrix);\n  };\n  \n  // Dimension controls\n  const addRow = () => {\n    if (rows < 4) {\n      setMatrix([...matrix, Array(cols).fill(0)]);\n    }\n  };\n  \n  const removeRow = () => {\n    if (rows > 1) {\n      setMatrix(matrix.slice(0, -1));\n    }\n  };\n  \n  const addCol = () => {\n    if (cols < 4) {\n      setMatrix(matrix.map(row => [...row, 0]));\n    }\n  };\n  \n  const removeCol = () => {\n    if (cols > 1) {\n      setMatrix(matrix.map(row => row.slice(0, -1)));\n    }\n  };\n  \n  // Animation\n  const animate = async () => {\n    setIsAnimating(true);\n    setShowCalculations(true);\n    \n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < cols; c++) {\n        setHighlightedCell({ row: r, col: c });\n        await new Promise(resolve => setTimeout(resolve, 400));\n      }\n    }\n    \n    setHighlightedCell(null);\n    setIsAnimating(false);\n  };\n  \n  // Reset\n  const reset = () => {\n    setMatrix([[1, 2], [3, 4]]);\n    setScalar(2);\n    setHighlightedCell(null);\n    setShowCalculations(false);\n  };\n  \n  // Randomize\n  const randomize = () => {\n    const newMatrix = matrix.map(row =>\n      row.map(() => Math.floor(Math.random() * 19) - 9)\n    );\n    setMatrix(newMatrix);\n  };\n\n  // Get scalar effect description\n  const getScalarEffect = () => {\n    if (scalar > 1) return { text: `Scale up ${scalar}×`, color: theme.colors.success };\n    if (scalar === 1) return { text: 'No change', color: theme.colors.textMuted };\n    if (scalar > 0 && scalar < 1) return { text: `Scale down ${scalar}×`, color: theme.colors.warning };\n    if (scalar === 0) return { text: 'All zeros', color: theme.colors.error };\n    if (scalar === -1) return { text: 'Flip signs', color: theme.colors.error };\n    if (scalar < 0) return { text: `Flip + scale ${Math.abs(scalar)}×`, color: theme.colors.error };\n    return { text: '', color: theme.colors.textMuted };\n  };\n\n  const scalarEffect = getScalarEffect();\n\n  return (\n    <div\n      style={{\n        minHeight: '100vh',\n        background: theme.colors.background,\n        color: theme.colors.text,\n        fontFamily: theme.font,\n        padding: '32px',\n      }}\n    >\n      <div style={{ maxWidth: '800px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ marginBottom: '32px' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '8px' }}>\n            <Icons.Scaling size={24} color={theme.colors.primary} />\n            <h1 style={{ fontSize: '24px', fontWeight: '600', margin: 0 }}>\n              Scalar Multiplication\n            </h1>\n          </div>\n          <p style={{ color: theme.colors.textSecondary, fontSize: '14px', margin: 0 }}>\n            Multiply every element of a matrix by a single number (scalar)\n          </p>\n        </div>\n        \n        {/* Dimension Controls */}\n        <Card>\n          <div style={{ \n            display: 'flex', \n            justifyContent: 'space-between', \n            alignItems: 'center',\n            marginBottom: '16px',\n          }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, textTransform: 'uppercase', letterSpacing: '0.5px' }}>\n              Matrix Dimensions\n            </div>\n            <div style={{ \n              padding: '6px 12px', \n              background: theme.colors.surfaceAlt, \n              borderRadius: '6px',\n              fontSize: '13px',\n              color: theme.colors.textSecondary,\n            }}>\n              {rows} × {cols}\n            </div>\n          </div>\n          \n          <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n            {[\n              { label: '+ Row', action: addRow, disabled: rows >= 4 },\n              { label: '- Row', action: removeRow, disabled: rows <= 1 },\n              { label: '+ Col', action: addCol, disabled: cols >= 4 },\n              { label: '- Col', action: removeCol, disabled: cols <= 1 },\n            ].map(({ label, action, disabled }) => (\n              <button\n                key={label}\n                onClick={action}\n                disabled={disabled}\n                style={{\n                  padding: '8px 16px',\n                  background: theme.colors.surfaceAlt,\n                  border: `1px solid ${theme.colors.border}`,\n                  borderRadius: '6px',\n                  color: disabled ? theme.colors.textMuted : theme.colors.textSecondary,\n                  fontFamily: theme.font,\n                  fontSize: '13px',\n                  cursor: disabled ? 'not-allowed' : 'pointer',\n                  opacity: disabled ? 0.5 : 1,\n                }}\n              >\n                {label}\n              </button>\n            ))}\n            <button\n              onClick={randomize}\n              style={{\n                padding: '8px 16px',\n                background: theme.colors.surfaceAlt,\n                border: `1px solid ${theme.colors.border}`,\n                borderRadius: '6px',\n                color: theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '13px',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px',\n              }}\n            >\n              <Icons.Shuffle size={14} />\n              Random\n            </button>\n          </div>\n        </Card>\n        \n        {/* Main Visualization */}\n        <Card style={{ marginTop: '16px' }}>\n          <div style={{ \n            display: 'flex', \n            alignItems: 'center', \n            gap: '16px',\n            justifyContent: 'center',\n            flexWrap: 'wrap',\n          }}>\n            {/* Editable Scalar */}\n            <div style={{ textAlign: 'center' }}>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '8px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n              }}>\n                Scalar k\n              </div>\n              <input\n                type=\"number\"\n                step=\"0.5\"\n                value={scalar}\n                onChange={(e) => setScalar(parseFloat(e.target.value) || 0)}\n                style={{\n                  width: '64px',\n                  height: '64px',\n                  background: `${theme.colors.scalar}15`,\n                  border: `2px solid ${theme.colors.scalar}`,\n                  borderRadius: '12px',\n                  color: theme.colors.scalar,\n                  fontFamily: theme.font,\n                  fontSize: '24px',\n                  fontWeight: '700',\n                  textAlign: 'center',\n                  outline: 'none',\n                }}\n              />\n              <div style={{\n                marginTop: '6px',\n                fontSize: '11px',\n                color: scalarEffect.color,\n              }}>\n                {scalarEffect.text}\n              </div>\n            </div>\n            \n            {/* Multiply symbol */}\n            <Icons.X size={20} color={theme.colors.textMuted} />\n            \n            {/* Input Matrix */}\n            <div>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '8px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n                textAlign: 'center',\n              }}>\n                Matrix A\n              </div>\n              <div\n                style={{\n                  display: 'inline-flex',\n                  flexDirection: 'column',\n                  gap: '6px',\n                  padding: '14px',\n                  background: theme.colors.surfaceAlt,\n                  borderRadius: '12px',\n                  border: `1px solid ${theme.colors.border}`,\n                }}\n              >\n                {matrix.map((row, rowIdx) => (\n                  <div key={rowIdx} style={{ display: 'flex', gap: '6px' }}>\n                    {row.map((cell, colIdx) => (\n                      <MatrixCell\n                        key={colIdx}\n                        value={cell}\n                        onChange={(v) => updateMatrix(rowIdx, colIdx, v)}\n                        isHighlighted={highlightedCell?.row === rowIdx && highlightedCell?.col === colIdx}\n                        animationDelay={(rowIdx * cols + colIdx) * 50}\n                      />\n                    ))}\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* Equals */}\n            <Icons.Equal size={20} color={theme.colors.textMuted} />\n            \n            {/* Result Matrix */}\n            <div>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '8px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n                textAlign: 'center',\n              }}>\n                Result kA\n              </div>\n              <div\n                style={{\n                  display: 'inline-flex',\n                  flexDirection: 'column',\n                  gap: '6px',\n                  padding: '14px',\n                  background: theme.colors.surfaceAlt,\n                  borderRadius: '12px',\n                  border: `1px solid ${theme.colors.primary}40`,\n                }}\n              >\n                {resultMatrix.map((row, rowIdx) => (\n                  <div key={rowIdx} style={{ display: 'flex', gap: '6px' }}>\n                    {row.map((cell, colIdx) => (\n                      <MatrixCell\n                        key={colIdx}\n                        value={cell}\n                        isResult={true}\n                        isHighlighted={highlightedCell?.row === rowIdx && highlightedCell?.col === colIdx}\n                        animationDelay={(rowIdx * cols + colIdx) * 50}\n                      />\n                    ))}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          {/* Calculations */}\n          {showCalculations && (\n            <div style={{ marginTop: '24px' }}>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '12px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n              }}>\n                Element-wise Calculations\n              </div>\n              <div style={{ \n                display: 'flex', \n                flexWrap: 'wrap', \n                gap: '8px',\n              }}>\n                {matrix.map((row, rowIdx) => (\n                  row.map((cell, colIdx) => (\n                    <CalculationStep\n                      key={`${rowIdx}-${colIdx}`}\n                      original={cell}\n                      scalar={scalar}\n                      result={resultMatrix[rowIdx][colIdx]}\n                      rowIdx={rowIdx}\n                      colIdx={colIdx}\n                      isActive={highlightedCell === null || (highlightedCell.row === rowIdx && highlightedCell.col === colIdx)}\n                    />\n                  ))\n                ))}\n              </div>\n            </div>\n          )}\n          \n          {/* Controls */}\n          <div style={{ display: 'flex', gap: '12px', marginTop: '24px' }}>\n            <button\n              onClick={animate}\n              disabled={isAnimating}\n              style={{\n                flex: 1,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                padding: '14px 24px',\n                background: theme.colors.primary,\n                border: 'none',\n                borderRadius: '8px',\n                color: theme.colors.secondary,\n                fontFamily: theme.font,\n                fontSize: '14px',\n                fontWeight: '600',\n                cursor: isAnimating ? 'not-allowed' : 'pointer',\n                opacity: isAnimating ? 0.7 : 1,\n              }}\n            >\n              <Icons.Play size={16} />\n              {isAnimating ? 'Animating...' : 'Animate'}\n            </button>\n            \n            <button\n              onClick={() => setShowCalculations(!showCalculations)}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                padding: '14px 24px',\n                background: showCalculations ? `${theme.colors.primary}20` : theme.colors.surfaceAlt,\n                border: `1px solid ${showCalculations ? theme.colors.primary : theme.colors.border}`,\n                borderRadius: '8px',\n                color: showCalculations ? theme.colors.primary : theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '14px',\n                fontWeight: '500',\n                cursor: 'pointer',\n              }}\n            >\n              Math\n            </button>\n            \n            <button\n              onClick={reset}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                padding: '14px 24px',\n                background: theme.colors.surfaceAlt,\n                border: `1px solid ${theme.colors.border}`,\n                borderRadius: '8px',\n                color: theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '14px',\n                fontWeight: '500',\n                cursor: 'pointer',\n              }}\n            >\n              <Icons.RotateCcw size={16} />\n              Reset\n            </button>\n          </div>\n        </Card>\n        \n        {/* Key Concepts */}\n        <Card style={{ marginTop: '16px' }}>\n          <div style={{ \n            fontSize: '11px', \n            color: theme.colors.textMuted, \n            marginBottom: '16px',\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px',\n          }}>\n            Key Concepts\n          </div>\n          \n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n            gap: '16px',\n          }}>\n            <div style={{\n              padding: '16px',\n              background: theme.colors.surfaceAlt,\n              borderRadius: '8px',\n              border: `1px solid ${theme.colors.border}`,\n            }}>\n              <div style={{\n                fontSize: '14px',\n                color: theme.colors.scalar,\n                fontWeight: '600',\n                marginBottom: '8px',\n              }}>\n                Element-wise\n              </div>\n              <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>\n                Every element is multiplied by k\n              </div>\n            </div>\n            \n            <div style={{\n              padding: '16px',\n              background: theme.colors.surfaceAlt,\n              borderRadius: '8px',\n              border: `1px solid ${theme.colors.border}`,\n            }}>\n              <div style={{\n                fontSize: '14px',\n                color: theme.colors.primary,\n                fontWeight: '600',\n                marginBottom: '8px',\n              }}>\n                Shape Preserved\n              </div>\n              <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>\n                {rows}×{cols} → {rows}×{cols}\n              </div>\n            </div>\n            \n            <div style={{\n              padding: '16px',\n              background: theme.colors.surfaceAlt,\n              borderRadius: '8px',\n              border: `1px solid ${theme.colors.border}`,\n            }}>\n              <div style={{\n                fontSize: '14px',\n                color: theme.colors.success,\n                fontWeight: '600',\n                marginBottom: '8px',\n              }}>\n                Special Cases\n              </div>\n              <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>\n                k=0: zeros | k=1: same | k=-1: negate\n              </div>\n            </div>\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}