{
  "problem_id": 60,
  "title": "Implement TF-IDF (Term Frequency-Inverse Document Frequency)",
  "category": "NLP",
  "enabled": true,
  "type": "react",
  "code": "\nimport React, { useState } from 'react';\n\nconst theme = {\n  bg: '#0f172a',\n  surface: '#1e293b',\n  card: '#334155',\n  border: '#475569',\n  text: '#f8fafc',\n  muted: '#94a3b8',\n  dim: '#64748b',\n  tf: '#38bdf8',\n  idf: '#a78bfa',\n  tfidf: '#4ade80',\n  common: '#64748b',\n  rare: '#fbbf24',\n};\n\nconst corpus = [\n  { id: 1, words: [\"the\", \"cat\", \"sat\", \"on\", \"the\", \"mat\"], label: \"Doc 1: Cat on mat\" },\n  { id: 2, words: [\"the\", \"dog\", \"chased\", \"the\", \"cat\"], label: \"Doc 2: Dog chased cat\" },\n  { id: 3, words: [\"the\", \"bird\", \"flew\", \"over\", \"the\", \"mat\"], label: \"Doc 3: Bird over mat\" },\n];\n\nconst getAllWords = () => {\n  const stats = {};\n  const allWords = new Set();\n  corpus.forEach(doc => doc.words.forEach(w => allWords.add(w)));\n  allWords.forEach(word => {\n    const docsContaining = corpus.filter(doc => doc.words.includes(word)).length;\n    stats[word] = {\n      docFreq: docsContaining,\n      isCommon: docsContaining === corpus.length,\n      isRare: docsContaining === 1,\n    };\n  });\n  return stats;\n};\n\nconst wordStats = getAllWords();\n\nconst computeScore = (word, docIdx) => {\n  const doc = corpus[docIdx].words;\n  const count = doc.filter(w => w === word).length;\n  const tf = count / doc.length;\n  const df = wordStats[word]?.docFreq || 0;\n  const idf = Math.log((corpus.length + 1) / (df + 1)) + 1;\n  const tfidf = tf * idf;\n  return { count, tf, df, idf, tfidf, docLength: doc.length };\n};\n\nexport default function App() {\n  const [selectedWord, setSelectedWord] = useState(\"cat\");\n  const [step, setStep] = useState(0);\n\n  const scores = corpus.map((_, i) => computeScore(selectedWord, i));\n  const wordInfo = wordStats[selectedWord];\n  const uniqueWords = [...new Set(corpus.flatMap(d => d.words))].sort();\n  \n  return (\n    <div style={styles.container}>\n      <div style={styles.header}>\n        <h1 style={styles.title}>TF-IDF Explained</h1>\n        <p style={styles.subtitle}>Why \"the\" is boring but \"cat\" is interesting</p>\n      </div>\n\n      <div style={styles.ideaBox}>\n        <div style={styles.ideaTitle}>ðŸ’¡ The Big Idea</div>\n        <div style={styles.ideaText}>\n          Words that appear <span style={{color: theme.tf}}>frequently in ONE document</span> but \n          <span style={{color: theme.idf}}> rarely across ALL documents</span> are the most important.\n        </div>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.sectionTitle}>Pick a word to analyze</div>\n        <div style={styles.wordPicker}>\n          {uniqueWords.map(word => {\n            const info = wordStats[word];\n            return (\n              <div\n                key={word}\n                onClick={() => setSelectedWord(word)}\n                style={{\n                  ...styles.wordChip,\n                  background: selectedWord === word ? theme.tfidf : \n                              info.isCommon ? `${theme.common}30` : \n                              info.isRare ? `${theme.rare}30` : theme.card,\n                  color: selectedWord === word ? '#000' : \n                         info.isCommon ? theme.common : \n                         info.isRare ? theme.rare : theme.text,\n                  borderColor: selectedWord === word ? theme.tfidf : 'transparent',\n                }}\n              >\n                {word}\n                {info.isCommon && <span style={styles.wordTag}>common</span>}\n                {info.isRare && <span style={{...styles.wordTag, background: theme.rare}}>rare</span>}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.sectionTitle}>Where does \"{selectedWord}\" appear?</div>\n        <div style={styles.docsVisual}>\n          {corpus.map((doc, i) => {\n            const count = scores[i].count;\n            const hasWord = count > 0;\n            return (\n              <div key={i} style={{\n                ...styles.docVisual,\n                borderColor: hasWord ? theme.tf : theme.border,\n                opacity: hasWord ? 1 : 0.5,\n              }}>\n                <div style={styles.docVisualHeader}>\n                  <span style={styles.docName}>{doc.label}</span>\n                  {hasWord && <span style={{...styles.countBadge, background: theme.tf}}>{count}Ã—</span>}\n                </div>\n                <div style={styles.docVisualWords}>\n                  {doc.words.map((w, j) => (\n                    <span key={j} style={{\n                      ...styles.docWord,\n                      background: w === selectedWord ? theme.tf : 'transparent',\n                      color: w === selectedWord ? '#000' : theme.dim,\n                      fontWeight: w === selectedWord ? 700 : 400,\n                    }}>{w}</span>\n                  ))}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        <div style={styles.appearsSummary}>\n          \"{selectedWord}\" appears in <span style={{color: theme.idf, fontWeight: 700}}>{wordInfo.docFreq} of {corpus.length}</span> documents\n          {wordInfo.isCommon && <span style={{color: theme.common}}> â†’ Very common (low importance)</span>}\n          {wordInfo.isRare && <span style={{color: theme.rare}}> â†’ Rare (high importance)</span>}\n          {!wordInfo.isCommon && !wordInfo.isRare && <span style={{color: theme.tfidf}}> â†’ Somewhat distinctive</span>}\n        </div>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.sectionTitle}>Step-by-step calculation</div>\n        <div style={styles.stepTabs}>\n          {['Overview', 'Step 1: TF', 'Step 2: IDF', 'Step 3: TFÃ—IDF'].map((label, i) => (\n            <div key={i} onClick={() => setStep(i)} style={{\n              ...styles.stepTab,\n              background: step === i ? theme.tfidf : theme.card,\n              color: step === i ? '#000' : theme.muted,\n            }}>{label}</div>\n          ))}\n        </div>\n\n        <div style={styles.stepContent}>\n          {step === 0 && (\n            <div style={styles.stepBox}>\n              <div style={styles.formulaMain}>\n                <span style={{color: theme.tfidf}}>TF-IDF</span> = \n                <span style={{color: theme.tf}}> TF</span> Ã— \n                <span style={{color: theme.idf}}> IDF</span>\n              </div>\n              <div style={styles.stepExplain}>\n                <div style={styles.explainRow}>\n                  <span style={{...styles.explainLabel, color: theme.tf}}>TF (Term Frequency)</span>\n                  <span style={styles.explainDesc}>How often the word appears in THIS document</span>\n                </div>\n                <div style={styles.explainRow}>\n                  <span style={{...styles.explainLabel, color: theme.idf}}>IDF (Inverse Doc Freq)</span>\n                  <span style={styles.explainDesc}>How rare the word is across ALL documents</span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {step === 1 && (\n            <div style={styles.stepBox}>\n              <div style={styles.stepQuestion}>How often does \"{selectedWord}\" appear in each document?</div>\n              <div style={styles.tfVisual}>\n                {corpus.map((doc, i) => {\n                  const s = scores[i];\n                  return (\n                    <div key={i} style={styles.tfRow}>\n                      <div style={styles.tfDocLabel}>Doc {i+1}</div>\n                      <div style={styles.tfBarContainer}>\n                        <div style={{...styles.tfBar, width: `${s.tf * 100 * 3}%`, background: theme.tf}} />\n                      </div>\n                      <div style={styles.tfCalc}>\n                        {s.count}/{s.docLength} = <span style={{color: theme.tf}}>{s.tf.toFixed(3)}</span>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n              <div style={styles.stepNote}>TF = (times word appears) / (total words in doc)</div>\n            </div>\n          )}\n\n          {step === 2 && (\n            <div style={styles.stepBox}>\n              <div style={styles.stepQuestion}>How rare is \"{selectedWord}\" across all documents?</div>\n              <div style={styles.idfVisual}>\n                <div style={styles.idfDocsRow}>\n                  {corpus.map((_, i) => {\n                    const hasWord = scores[i].count > 0;\n                    return (\n                      <div key={i} style={{\n                        ...styles.idfDocBox,\n                        background: hasWord ? theme.idf : theme.card,\n                        color: hasWord ? '#000' : theme.dim,\n                      }}>\n                        Doc {i+1}\n                        <div style={styles.idfDocStatus}>{hasWord ? 'âœ“' : 'âœ—'}</div>\n                      </div>\n                    );\n                  })}\n                </div>\n                <div style={styles.idfCalcBox}>\n                  <div style={styles.idfFormula}>IDF = log((N+1)/(df+1)) + 1</div>\n                  <div style={styles.idfCalcSteps}>\n                    <div>N = {corpus.length} (total docs), df = {wordInfo.docFreq} (docs with \"{selectedWord}\")</div>\n                    <div style={{marginTop: 8}}>\n                      IDF = log(({corpus.length}+1)/({wordInfo.docFreq}+1)) + 1 = \n                      <span style={{color: theme.idf, fontWeight: 700, fontSize: 18}}> {scores[0].idf.toFixed(3)}</span>\n                    </div>\n                  </div>\n                </div>\n                <div style={styles.idfInterpret}>\n                  {wordInfo.isCommon ? <span>ðŸ“‰ In ALL docs â†’ Low IDF â†’ Less distinctive</span> :\n                   wordInfo.isRare ? <span>ðŸ“ˆ In only 1 doc â†’ High IDF â†’ Very distinctive!</span> :\n                   <span>ðŸ“Š In some docs â†’ Medium IDF</span>}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {step === 3 && (\n            <div style={styles.stepBox}>\n              <div style={styles.stepQuestion}>Final TF-IDF scores for \"{selectedWord}\"</div>\n              <div style={styles.finalVisual}>\n                {corpus.map((doc, i) => {\n                  const s = scores[i];\n                  const maxScore = Math.max(...scores.map(x => x.tfidf));\n                  return (\n                    <div key={i} style={styles.finalRow}>\n                      <div style={styles.finalDocLabel}>{doc.label}</div>\n                      <div style={styles.finalCalcRow}>\n                        <span style={{color: theme.tf}}>{s.tf.toFixed(3)}</span>\n                        <span style={{color: theme.dim}}> Ã— </span>\n                        <span style={{color: theme.idf}}>{s.idf.toFixed(3)}</span>\n                        <span style={{color: theme.dim}}> = </span>\n                        <span style={{color: theme.tfidf, fontWeight: 700, fontSize: s.tfidf === maxScore && s.tfidf > 0 ? 18 : 14}}>\n                          {s.tfidf.toFixed(5)}\n                        </span>\n                        {s.tfidf === maxScore && s.tfidf > 0 && <span style={styles.winnerBadge}>â˜… highest</span>}\n                      </div>\n                      <div style={styles.finalBarContainer}>\n                        <div style={{...styles.finalBar, width: maxScore > 0 ? `${(s.tfidf / maxScore) * 100}%` : '0%'}} />\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n              <div style={styles.finalInsight}>\n                {wordInfo.isCommon ? \n                  <span>ðŸ’¡ \"{selectedWord}\" appears everywhere, so it doesn't help distinguish documents</span> :\n                  <span>ðŸ’¡ \"{selectedWord}\" helps identify specific documents</span>}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div style={styles.insightBox}>\n        <div style={styles.insightTitle}>ðŸŽ¯ Key Insight</div>\n        <div style={styles.insightText}>Compare \"<span style={{color: theme.common}}>the</span>\" vs \"<span style={{color: theme.rare}}>dog</span>\":</div>\n        <div style={styles.compareRow}>\n          <div style={styles.compareCard}>\n            <div style={{color: theme.common, fontWeight: 700}}>\"the\"</div>\n            <div style={styles.compareDetail}>In ALL docs â†’ IDF â‰ˆ 1.0</div>\n            <div style={styles.compareResult}>Not useful for search</div>\n          </div>\n          <div style={styles.compareCard}>\n            <div style={{color: theme.rare, fontWeight: 700}}>\"dog\"</div>\n            <div style={styles.compareDetail}>In 1 doc â†’ IDF â‰ˆ 1.5</div>\n            <div style={styles.compareResult}>Great for finding Doc 2!</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  container: { fontFamily: \"'Inter', -apple-system, sans-serif\", background: theme.bg, color: theme.text, padding: 16, maxWidth: 540, margin: '0 auto', minHeight: '100vh' },\n  header: { textAlign: 'center', marginBottom: 14 },\n  title: { fontSize: 22, fontWeight: 700, margin: 0 },\n  subtitle: { fontSize: 12, color: theme.muted, margin: '4px 0 0' },\n  ideaBox: { background: `linear-gradient(135deg, ${theme.tf}15, ${theme.idf}15)`, borderRadius: 12, padding: 14, marginBottom: 16, border: `1px solid ${theme.border}` },\n  ideaTitle: { fontSize: 13, fontWeight: 700, marginBottom: 6 },\n  ideaText: { fontSize: 12, color: theme.muted, lineHeight: 1.6 },\n  section: { marginBottom: 18 },\n  sectionTitle: { fontSize: 12, color: theme.dim, marginBottom: 10, fontWeight: 600 },\n  wordPicker: { display: 'flex', flexWrap: 'wrap', gap: 8 },\n  wordChip: { padding: '6px 12px', borderRadius: 6, fontSize: 13, cursor: 'pointer', border: '2px solid', display: 'flex', alignItems: 'center', gap: 6 },\n  wordTag: { fontSize: 9, padding: '2px 5px', borderRadius: 4, background: theme.common, color: '#000', fontWeight: 600 },\n  docsVisual: { display: 'flex', flexDirection: 'column', gap: 10 },\n  docVisual: { background: theme.surface, borderRadius: 10, padding: 12, border: '2px solid', transition: 'all 0.2s' },\n  docVisualHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 8 },\n  docName: { fontSize: 11, color: theme.dim },\n  countBadge: { fontSize: 11, padding: '2px 8px', borderRadius: 10, color: '#000', fontWeight: 700 },\n  docVisualWords: { display: 'flex', flexWrap: 'wrap', gap: 6 },\n  docWord: { padding: '3px 8px', borderRadius: 4, fontSize: 13, transition: 'all 0.15s' },\n  appearsSummary: { marginTop: 12, fontSize: 12, color: theme.muted, textAlign: 'center' },\n  stepTabs: { display: 'flex', gap: 6, marginBottom: 12, flexWrap: 'wrap' },\n  stepTab: { padding: '8px 12px', borderRadius: 8, fontSize: 11, cursor: 'pointer', fontWeight: 600, transition: 'all 0.2s' },\n  stepContent: { background: theme.surface, borderRadius: 12, padding: 16 },\n  stepBox: {},\n  stepQuestion: { fontSize: 13, color: theme.text, marginBottom: 14, fontWeight: 500 },\n  stepNote: { fontSize: 11, color: theme.dim, marginTop: 12, fontStyle: 'italic' },\n  formulaMain: { fontSize: 20, textAlign: 'center', marginBottom: 16, fontFamily: 'monospace' },\n  stepExplain: { display: 'flex', flexDirection: 'column', gap: 10 },\n  explainRow: { display: 'flex', flexDirection: 'column', gap: 2 },\n  explainLabel: { fontSize: 13, fontWeight: 600 },\n  explainDesc: { fontSize: 12, color: theme.muted },\n  tfVisual: { display: 'flex', flexDirection: 'column', gap: 10 },\n  tfRow: { display: 'flex', alignItems: 'center', gap: 10 },\n  tfDocLabel: { width: 50, fontSize: 11, color: theme.dim },\n  tfBarContainer: { flex: 1, height: 20, background: theme.card, borderRadius: 4, overflow: 'hidden' },\n  tfBar: { height: '100%', borderRadius: 4, transition: 'width 0.3s' },\n  tfCalc: { width: 120, fontSize: 12, fontFamily: 'monospace', textAlign: 'right', color: theme.muted },\n  idfVisual: {},\n  idfDocsRow: { display: 'flex', gap: 10, marginBottom: 14, justifyContent: 'center' },\n  idfDocBox: { width: 70, height: 70, borderRadius: 10, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', fontSize: 11, fontWeight: 600 },\n  idfDocStatus: { fontSize: 18, marginTop: 4 },\n  idfCalcBox: { background: theme.card, borderRadius: 10, padding: 14, marginBottom: 12 },\n  idfFormula: { fontSize: 12, fontFamily: 'monospace', color: theme.dim, marginBottom: 10 },\n  idfCalcSteps: { fontSize: 12, color: theme.muted, lineHeight: 1.6 },\n  idfInterpret: { fontSize: 12, color: theme.muted, textAlign: 'center' },\n  finalVisual: { display: 'flex', flexDirection: 'column', gap: 14 },\n  finalRow: {},\n  finalDocLabel: { fontSize: 11, color: theme.dim, marginBottom: 4 },\n  finalCalcRow: { display: 'flex', alignItems: 'center', gap: 4, fontFamily: 'monospace', fontSize: 13, marginBottom: 6 },\n  winnerBadge: { marginLeft: 8, fontSize: 10, color: theme.tfidf, fontWeight: 600 },\n  finalBarContainer: { height: 8, background: theme.card, borderRadius: 4, overflow: 'hidden' },\n  finalBar: { height: '100%', background: theme.tfidf, borderRadius: 4, transition: 'width 0.3s' },\n  finalInsight: { marginTop: 14, fontSize: 12, color: theme.muted, textAlign: 'center', fontStyle: 'italic' },\n  insightBox: { background: theme.surface, borderRadius: 12, padding: 14 },\n  insightTitle: { fontSize: 13, fontWeight: 700, marginBottom: 8 },\n  insightText: { fontSize: 12, color: theme.muted, marginBottom: 10 },\n  compareRow: { display: 'flex', gap: 12 },\n  compareCard: { flex: 1, background: theme.card, borderRadius: 8, padding: 12, textAlign: 'center' },\n  compareDetail: { fontSize: 10, color: theme.dim, marginTop: 4 },\n  compareResult: { fontSize: 11, color: theme.muted, marginTop: 6 },\n};\n",
  "settings": {
    "editorHeight": 600,
    "showEditor": false,
    "theme": "auto",
    "showConsole": false,
    "editorWidthPercentage": 35,
    "showPreview": true
  },
  "dependencies": {}
}