{
  "problem_id": 29,
  "title": "Random Shuffle of Dataset",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\n// Each sample has a distinct color\nconst sampleColors = ['#38bdf8', '#a3e635', '#f472b6', '#fbbf24'];\n\n// Seeded shuffle\nconst seededShuffle = (arr, seed) => {\n  const result = [...arr];\n  for (let i = result.length - 1; i > 0; i--) {\n    const x = Math.sin((seed + i) * 9999) * 10000;\n    const j = Math.floor((x - Math.floor(x)) * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  return result;\n};\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [seed, setSeed] = useState(42);\n\n  const numSteps = 4;\n\n  // Original data - each sample is a unit\n  const samples = [\n    { id: 0, X: [1, 2], y: 1 },\n    { id: 1, X: [3, 4], y: 2 },\n    { id: 2, X: [5, 6], y: 3 },\n    { id: 3, X: [7, 8], y: 4 },\n  ];\n\n  // Shuffled indices\n  const shuffledIndices = useMemo(() => seededShuffle([0, 1, 2, 3], seed), [seed]);\n\n  const stepInfo = [\n    { title: 'The Data', desc: 'Each row is ONE sample: features X and label y belong together', color: theme.colors.primary },\n    { title: 'Create Indices', desc: 'Make an index array [0, 1, 2, 3] — one index per sample', color: theme.colors.blue },\n    { title: 'Shuffle Indices', desc: `Randomize the indices → [${shuffledIndices.join(', ')}]`, color: theme.colors.yellow },\n    { title: 'Reorder Both', desc: 'Apply the SAME shuffled indices to X and y — rows stay together!', color: theme.colors.green },\n  ];\n\n  const play = async () => {\n    setPlaying(true);\n    for (let s = 0; s < numSteps; s++) {\n      setStep(s);\n      await new Promise(r => setTimeout(r, 1800));\n    }\n    setPlaying(false);\n  };\n\n  const reset = () => { setStep(0); setPlaying(false); setSeed(42); };\n\n  // Which order to display samples\n  const displayOrder = step >= 3 ? shuffledIndices : [0, 1, 2, 3];\n\n  // Sample card component\n  const SampleCard = ({ sample, position, showIndex }) => {\n    const color = sampleColors[sample.id];\n    return (\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: '12px',\n        padding: '12px 16px',\n        background: color + '15',\n        borderLeft: `5px solid ${color}`,\n        borderRadius: '8px',\n        marginBottom: '8px',\n      }}>\n        {/* Position number */}\n        <div style={{ \n          width: '28px', height: '28px', \n          background: theme.colors.surfaceAlt, \n          borderRadius: '50%',\n          display: 'flex', alignItems: 'center', justifyContent: 'center',\n          fontSize: '14px', fontWeight: '600', color: theme.colors.textMuted\n        }}>\n          {position}\n        </div>\n\n        {/* Sample ID badge */}\n        <div style={{\n          padding: '4px 10px',\n          background: color,\n          borderRadius: '12px',\n          fontSize: '12px',\n          fontWeight: '700',\n          color: theme.colors.background,\n        }}>\n          Sample {sample.id}\n        </div>\n\n        {/* X values */}\n        <div style={{ \n          padding: '8px 14px', \n          background: theme.colors.surfaceAlt, \n          borderRadius: '6px',\n          fontSize: '16px',\n          fontWeight: '600',\n          color: theme.colors.blue,\n        }}>\n          X = [{sample.X.join(', ')}]\n        </div>\n\n        {/* y value */}\n        <div style={{ \n          padding: '8px 14px', \n          background: theme.colors.surfaceAlt, \n          borderRadius: '6px',\n          fontSize: '16px',\n          fontWeight: '600',\n          color: theme.colors.pink,\n        }}>\n          y = {sample.y}\n        </div>\n\n        {/* Arrow showing they stay together */}\n        {step >= 3 && (\n          <div style={{ \n            marginLeft: 'auto',\n            fontSize: '12px',\n            color: theme.colors.green,\n            fontWeight: '600',\n          }}>\n            ✓ paired\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '10px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>Dataset Shuffle</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>Randomize order, keep X-y pairs aligned</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '5px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '18px' : '10px', height: '10px', borderRadius: '5px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer'\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '8px 12px', background: theme.colors.surface, borderLeft: `3px solid ${stepInfo[step].color}`,\n        borderRadius: '0 6px 6px 0', marginBottom: '12px' }}>\n        <span style={{ fontWeight: '600', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title}: </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>{stepInfo[step].desc}</span>\n      </div>\n\n      {/* Main content */}\n      <div style={{ display: 'flex', gap: '16px', marginBottom: '12px' }}>\n        \n        {/* Sample cards */}\n        <div style={{ flex: 1.2 }}>\n          <div style={{ fontSize: '13px', color: theme.colors.textMuted, marginBottom: '10px' }}>\n            {step >= 3 ? 'Shuffled Order' : 'Original Order'}\n          </div>\n          {displayOrder.map((sampleIdx, position) => (\n            <SampleCard \n              key={sampleIdx}\n              sample={samples[sampleIdx]} \n              position={position}\n              showIndex={step >= 1}\n            />\n          ))}\n        </div>\n\n        {/* Index array visualization */}\n        <div style={{ flex: 0.8, display: 'flex', flexDirection: 'column', gap: '10px' }}>\n          \n          {/* Seed control */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px' }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>Random Seed</div>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n              <input type=\"range\" min={1} max={100} value={seed} onChange={e => setSeed(+e.target.value)}\n                style={{ flex: 1, accentColor: theme.colors.primary }} />\n              <span style={{ fontSize: '16px', color: theme.colors.primary, fontWeight: '700', width: '32px' }}>{seed}</span>\n            </div>\n          </div>\n\n          {/* Index transformation */}\n          <div style={{ background: theme.colors.surface, borderRadius: '8px', padding: '12px' }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '12px' }}>Index Array</div>\n            \n            {/* Original indices */}\n            <div style={{ marginBottom: '12px' }}>\n              <div style={{ fontSize: '11px', color: theme.colors.blue, marginBottom: '6px' }}>Original:</div>\n              <div style={{ display: 'flex', gap: '6px' }}>\n                {[0, 1, 2, 3].map(i => (\n                  <div key={i} style={{\n                    width: '36px', height: '36px',\n                    background: step >= 1 ? sampleColors[i] + '30' : theme.colors.surfaceAlt,\n                    border: `2px solid ${step >= 1 ? sampleColors[i] : theme.colors.border}`,\n                    borderRadius: '6px',\n                    display: 'flex', alignItems: 'center', justifyContent: 'center',\n                    fontSize: '16px', fontWeight: '700',\n                    color: step >= 1 ? sampleColors[i] : theme.colors.textMuted,\n                  }}>\n                    {i}\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Arrow */}\n            {step >= 2 && (\n              <div style={{ textAlign: 'center', fontSize: '18px', color: theme.colors.yellow, marginBottom: '12px' }}>\n                ↓ shuffle\n              </div>\n            )}\n\n            {/* Shuffled indices */}\n            {step >= 2 && (\n              <div>\n                <div style={{ fontSize: '11px', color: theme.colors.yellow, marginBottom: '6px' }}>Shuffled:</div>\n                <div style={{ display: 'flex', gap: '6px' }}>\n                  {shuffledIndices.map((idx, i) => (\n                    <div key={i} style={{\n                      width: '36px', height: '36px',\n                      background: sampleColors[idx] + '30',\n                      border: `2px solid ${sampleColors[idx]}`,\n                      borderRadius: '6px',\n                      display: 'flex', alignItems: 'center', justifyContent: 'center',\n                      fontSize: '16px', fontWeight: '700',\n                      color: sampleColors[idx],\n                    }}>\n                      {idx}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Result code */}\n          {step >= 3 && (\n            <div style={{ background: theme.colors.green + '15', borderRadius: '8px', padding: '12px',\n              border: `2px solid ${theme.colors.green}` }}>\n              <div style={{ fontSize: '12px', color: theme.colors.green, marginBottom: '8px', fontWeight: '600' }}>\n                Result\n              </div>\n              <div style={{ fontSize: '12px', color: theme.colors.textSecondary, lineHeight: 1.6 }}>\n                <div><span style={{ color: theme.colors.textMuted }}>X[idx] =</span></div>\n                <div style={{ color: theme.colors.blue, paddingLeft: '10px' }}>\n                  [{shuffledIndices.map(i => `[${samples[i].X.join(',')}]`).join(', ')}]\n                </div>\n                <div style={{ marginTop: '4px' }}><span style={{ color: theme.colors.textMuted }}>y[idx] =</span></div>\n                <div style={{ color: theme.colors.pink, paddingLeft: '10px' }}>\n                  [{shuffledIndices.map(i => samples[i].y).join(', ')}]\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Key Insight */}\n      <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '10px 14px',\n        fontSize: '12px', color: theme.colors.textSecondary, borderLeft: `3px solid ${theme.colors.primary}` }}>\n        <span style={{ color: theme.colors.primary, fontWeight: '600' }}>Key: </span>\n        {step === 0 && 'A dataset has samples. Each sample has features (X) and a label (y). They MUST stay paired — X[i] belongs with y[i]!'}\n        {step === 1 && 'Create an index array [0, 1, 2, 3]. Each number points to one sample. We\\'ll shuffle THIS instead of the data.'}\n        {step === 2 && 'Shuffle the indices randomly. Now we have a new order — but we haven\\'t touched the actual data yet!'}\n        {step === 3 && 'Apply shuffled indices to BOTH X and y. Since both use the same index order, samples stay together. Colors prove it!'}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}