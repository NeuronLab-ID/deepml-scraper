{
  "problem_id": 11,
  "title": "Solve Linear Equations using Jacobi Method",
  "category": "Linear Algebra",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo } from 'react';\n\n// ============================================\n// Design Tokens\n// ============================================\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    positive: '#10b981',\n    negative: '#f43f5e',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nconst varColors = ['#f472b6', '#38bdf8', '#a3e635'];\nconst varNames = ['x', 'y', 'z'];\n\n// ============================================\n// Jacobi Solver\n// ============================================\nfunction solveJacobi(A, b, maxIter) {\n  const n = b.length;\n  const history = [{ iteration: 0, x: new Array(n).fill(0) }];\n  let x = new Array(n).fill(0);\n  \n  for (let iter = 0; iter < maxIter; iter++) {\n    const xNew = new Array(n).fill(0);\n    for (let i = 0; i < n; i++) {\n      let sum = 0;\n      for (let j = 0; j < n; j++) {\n        if (i !== j) sum += A[i][j] * x[j];\n      }\n      xNew[i] = Math.round(((b[i] - sum) / A[i][i]) * 10000) / 10000;\n    }\n    x = [...xNew];\n    history.push({ iteration: iter + 1, x: [...x] });\n  }\n  return history;\n}\n\n// ============================================\n// Equation Display (Human Readable)\n// ============================================\nfunction EquationDisplay({ A, b, x, eqIdx, showSolving, n }) {\n  // Calculate what this equation \"wants\" for its main variable\n  let otherSum = 0;\n  for (let j = 0; j < n; j++) {\n    if (j !== eqIdx) otherSum += A[eqIdx][j] * x[j];\n  }\n  const wantsValue = (b[eqIdx] - otherSum) / A[eqIdx][eqIdx];\n  const currentValue = x[eqIdx];\n  const diff = Math.abs(wantsValue - currentValue);\n  const isHappy = diff < 0.01;\n  \n  // Build the \"other variables\" text dynamically based on actual number of variables\n  const otherVars = [];\n  for (let j = 0; j < n; j++) {\n    if (j !== eqIdx) {\n      otherVars.push(varNames[j]);\n    }\n  }\n  const otherVarsText = otherVars.length === 1 \n    ? otherVars[0] \n    : otherVars.slice(0, -1).join(', ') + ' and ' + otherVars[otherVars.length - 1];\n  \n  return (\n    <div style={{\n      padding: '12px 16px',\n      background: showSolving ? `${varColors[eqIdx]}15` : theme.colors.surface,\n      borderRadius: '10px',\n      border: `2px solid ${showSolving ? varColors[eqIdx] : theme.colors.border}`,\n      transition: 'all 0.3s',\n    }}>\n      {/* The equation in words */}\n      <div style={{ display: 'flex', alignItems: 'center', gap: '6px', flexWrap: 'wrap', fontSize: '13px' }}>\n        {A[eqIdx].map((coef, j) => (\n          <React.Fragment key={j}>\n            {j > 0 && <span style={{ color: theme.colors.textMuted }}>{coef >= 0 ? '+' : '‚àí'}</span>}\n            <span style={{ color: theme.colors.text }}>{j === 0 ? coef : Math.abs(coef)}</span>\n            <span style={{ \n              color: varColors[j], \n              fontWeight: '700',\n              padding: '2px 6px',\n              background: `${varColors[j]}20`,\n              borderRadius: '4px',\n            }}>\n              {varNames[j]}\n            </span>\n          </React.Fragment>\n        ))}\n        <span style={{ color: theme.colors.textMuted }}>=</span>\n        <span style={{ color: theme.colors.green, fontWeight: '700' }}>{b[eqIdx]}</span>\n      </div>\n      \n      {/* What this equation thinks */}\n      {showSolving && (\n        <div style={{\n          marginTop: '10px',\n          padding: '10px 12px',\n          background: theme.colors.background,\n          borderRadius: '8px',\n          fontSize: '12px',\n        }}>\n          <div style={{ color: theme.colors.textSecondary, marginBottom: '6px' }}>\n            üí≠ \"If <span style={{ color: varColors[otherVars.map(v => varNames.indexOf(v))[0]] }}>{otherVarsText}</span> {otherVars.length === 1 ? 'is' : 'are'} correct, then...\"\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flexWrap: 'wrap' }}>\n            <span style={{ color: varColors[eqIdx], fontWeight: '700' }}>{varNames[eqIdx]}</span>\n            <span style={{ color: theme.colors.textMuted }}>should be</span>\n            <span style={{\n              padding: '4px 10px',\n              background: `${varColors[eqIdx]}30`,\n              borderRadius: '6px',\n              color: varColors[eqIdx],\n              fontWeight: '700',\n            }}>\n              {wantsValue.toFixed(4)}\n            </span>\n            {isHappy ? (\n              <span style={{ color: theme.colors.positive }}>‚úì Close!</span>\n            ) : (\n              <span style={{ color: theme.colors.yellow }}>‚Üª Adjusting...</span>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================\n// Variable Status Cards\n// ============================================\nfunction VariableCards({ x, prevX }) {\n  return (\n    <div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>\n      {x.map((val, i) => {\n        const changed = prevX && Math.abs(val - prevX[i]) > 0.0001;\n        const changeAmount = prevX ? val - prevX[i] : 0;\n        \n        return (\n          <div key={i} style={{\n            padding: '12px 16px',\n            background: theme.colors.surface,\n            borderRadius: '10px',\n            border: `2px solid ${varColors[i]}`,\n            textAlign: 'center',\n            minWidth: '80px',\n          }}>\n            <div style={{\n              fontSize: '18px',\n              fontWeight: '700',\n              color: varColors[i],\n              marginBottom: '4px',\n            }}>\n              {varNames[i]}\n            </div>\n            <div style={{\n              fontSize: '16px',\n              fontWeight: '600',\n              color: theme.colors.text,\n            }}>\n              {val.toFixed(3)}\n            </div>\n            {changed && (\n              <div style={{\n                fontSize: '10px',\n                color: changeAmount > 0 ? theme.colors.positive : theme.colors.negative,\n                marginTop: '4px',\n              }}>\n                {changeAmount > 0 ? '‚Üë' : '‚Üì'} {Math.abs(changeAmount).toFixed(3)}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n// ============================================\n// Convergence Visualization\n// ============================================\nfunction ConvergenceViz({ history, currentStep }) {\n  const visibleHistory = history.slice(0, currentStep + 1);\n  const n = history[0].x.length;\n  \n  // Check if converged\n  const isConverged = currentStep > 1 && history[currentStep].x.every((val, i) => \n    Math.abs(val - history[currentStep - 1].x[i]) < 0.001\n  );\n  \n  return (\n    <div style={{\n      padding: '16px',\n      background: theme.colors.surface,\n      borderRadius: '10px',\n    }}>\n      <div style={{\n        fontSize: '11px',\n        color: theme.colors.textMuted,\n        marginBottom: '12px',\n        textAlign: 'center',\n      }}>\n        Watch the values stabilize over iterations\n      </div>\n      \n      {/* Visual bars for each variable */}\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n        {Array.from({ length: n }).map((_, varIdx) => {\n          const allVals = history.map(h => h.x[varIdx]);\n          const minVal = Math.min(...allVals, 0);\n          const maxVal = Math.max(...allVals);\n          const range = maxVal - minVal || 1;\n          \n          return (\n            <div key={varIdx}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                <span style={{ color: varColors[varIdx], fontWeight: '700', fontSize: '12px', width: '20px' }}>\n                  {varNames[varIdx]}\n                </span>\n                <div style={{\n                  flex: 1,\n                  height: '24px',\n                  background: theme.colors.background,\n                  borderRadius: '12px',\n                  position: 'relative',\n                  overflow: 'hidden',\n                }}>\n                  {/* Trail of previous values */}\n                  {visibleHistory.map((h, i) => {\n                    const pos = ((h.x[varIdx] - minVal) / range) * 100;\n                    const isLatest = i === visibleHistory.length - 1;\n                    return (\n                      <div\n                        key={i}\n                        style={{\n                          position: 'absolute',\n                          left: `${pos}%`,\n                          top: '50%',\n                          transform: 'translate(-50%, -50%)',\n                          width: isLatest ? '16px' : '8px',\n                          height: isLatest ? '16px' : '8px',\n                          borderRadius: '50%',\n                          background: varColors[varIdx],\n                          opacity: isLatest ? 1 : 0.3,\n                          transition: 'all 0.3s',\n                          border: isLatest ? '2px solid #fff' : 'none',\n                        }}\n                      />\n                    );\n                  })}\n                </div>\n                <span style={{ color: theme.colors.text, fontSize: '11px', width: '50px', textAlign: 'right' }}>\n                  {visibleHistory[visibleHistory.length - 1]?.x[varIdx].toFixed(3)}\n                </span>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      \n      {isConverged && (\n        <div style={{\n          marginTop: '12px',\n          padding: '10px',\n          background: `${theme.colors.positive}20`,\n          borderRadius: '8px',\n          textAlign: 'center',\n          color: theme.colors.positive,\n          fontSize: '12px',\n        }}>\n          üéØ Converged! The values have stabilized.\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================\n// Step Indicator\n// ============================================\nfunction StepIndicator({ step, total }) {\n  return (\n    <div style={{ display: 'flex', gap: '4px', justifyContent: 'center' }}>\n      {Array.from({ length: total + 1 }).map((_, i) => (\n        <div\n          key={i}\n          style={{\n            width: i === step ? '24px' : '8px',\n            height: '8px',\n            borderRadius: '4px',\n            background: i <= step ? theme.colors.primary : theme.colors.border,\n            transition: 'all 0.3s',\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\n// ============================================\n// Main App\n// ============================================\nexport default function JacobiPlayground() {\n  const [exampleIdx, setExampleIdx] = useState(0);\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  \n  const examples = [\n    {\n      name: '3 Variables',\n      A: [[5, -2, 3], [-3, 9, 1], [2, -1, -7]],\n      b: [-1, 2, 3],\n      iterations: 6,\n    },\n    {\n      name: '2 Variables',\n      A: [[4, 1], [2, 3]],\n      b: [1, 2],\n      iterations: 8,\n    },\n  ];\n  \n  const ex = examples[exampleIdx];\n  const history = useMemo(() => solveJacobi(ex.A, ex.b, ex.iterations), [exampleIdx]);\n  const n = ex.A.length;\n  \n  const reset = () => { setStep(0); setPlaying(false); };\n  const next = () => step < history.length - 1 && setStep(step + 1);\n  const prev = () => step > 0 && setStep(step - 1);\n  \n  const auto = async () => {\n    setPlaying(true);\n    for (let s = step; s < history.length; s++) {\n      setStep(s);\n      await new Promise(r => setTimeout(r, 1000));\n    }\n    setPlaying(false);\n  };\n\n  const currentX = history[step].x;\n  const prevX = step > 0 ? history[step - 1].x : null;\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      background: theme.colors.background,\n      color: theme.colors.text,\n      fontFamily: theme.font,\n      padding: '16px',\n    }}>\n      <div style={{ maxWidth: '500px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ textAlign: 'center', marginBottom: '16px' }}>\n          <h1 style={{ fontSize: '18px', fontWeight: '700', margin: 0 }}>Jacobi Method</h1>\n          <p style={{ color: theme.colors.textSecondary, fontSize: '11px', marginTop: '4px' }}>\n            Solve equations by iterative refinement\n          </p>\n        </div>\n        \n        {/* Example Tabs */}\n        <div style={{ display: 'flex', gap: '8px', justifyContent: 'center', marginBottom: '16px' }}>\n          {examples.map((e, idx) => (\n            <button\n              key={idx}\n              onClick={() => { setExampleIdx(idx); reset(); }}\n              style={{\n                padding: '8px 16px',\n                background: exampleIdx === idx ? theme.colors.primary : theme.colors.surface,\n                border: 'none',\n                borderRadius: '8px',\n                color: exampleIdx === idx ? '#fff' : theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '12px',\n                cursor: 'pointer',\n              }}\n            >\n              {e.name}\n            </button>\n          ))}\n        </div>\n        \n        {/* Main Card */}\n        <div style={{ background: theme.colors.surfaceAlt, borderRadius: '12px', padding: '16px' }}>\n          \n          {/* The Idea */}\n          {step === 0 && (\n            <div style={{\n              padding: '16px',\n              background: `${theme.colors.primary}15`,\n              borderRadius: '10px',\n              marginBottom: '16px',\n              borderLeft: `4px solid ${theme.colors.primary}`,\n            }}>\n              <div style={{ fontSize: '13px', color: theme.colors.text, marginBottom: '8px', fontWeight: '600' }}>\n                üí° The Idea\n              </div>\n              <div style={{ fontSize: '12px', color: theme.colors.textSecondary, lineHeight: 1.6 }}>\n                We have {n} equations with {n} unknowns. Each equation can tell us what ONE variable \n                should be ‚Äî if we knew all the others. So we start with a guess, let each equation \n                \"vote\" on its variable, then repeat until everyone agrees!\n              </div>\n            </div>\n          )}\n          \n          {/* Current Values */}\n          <div style={{ marginBottom: '16px' }}>\n            <div style={{ fontSize: '10px', color: theme.colors.textMuted, marginBottom: '8px', textAlign: 'center' }}>\n              {step === 0 ? 'STARTING GUESS' : `AFTER ITERATION ${step}`}\n            </div>\n            <VariableCards x={currentX} prevX={prevX} />\n          </div>\n          \n          {/* Convergence - NOW BEFORE EQUATIONS */}\n          {step > 0 && (\n            <div style={{ marginBottom: '16px' }}>\n              <ConvergenceViz history={history} currentStep={step} />\n            </div>\n          )}\n          \n          {/* How it works explanation */}\n          {step > 0 && step < 3 && (\n            <div style={{\n              padding: '12px',\n              background: theme.colors.surface,\n              borderRadius: '8px',\n              marginBottom: '16px',\n              fontSize: '11px',\n              color: theme.colors.textSecondary,\n              lineHeight: 1.6,\n            }}>\n              <strong style={{ color: theme.colors.yellow }}>What just happened?</strong>\n              <br />\n              Each equation looked at the current values of the OTHER variables, \n              then calculated what ITS variable should be. All updates happen \n              simultaneously using the OLD values ‚Äî that's the Jacobi way!\n            </div>\n          )}\n          \n          {/* Equations - NOW AFTER CONVERGENCE */}\n          <div style={{ marginBottom: '16px' }}>\n            <div style={{ fontSize: '10px', color: theme.colors.textMuted, marginBottom: '8px', textAlign: 'center' }}>\n              THE EQUATIONS\n            </div>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n              {ex.A.map((_, i) => (\n                <EquationDisplay\n                  key={i}\n                  A={ex.A}\n                  b={ex.b}\n                  x={currentX}\n                  eqIdx={i}\n                  showSolving={step > 0}\n                  n={n}\n                />\n              ))}\n            </div>\n          </div>\n          \n          {/* Step Indicator */}\n          <div style={{ marginBottom: '16px' }}>\n            <StepIndicator step={step} total={history.length - 1} />\n          </div>\n          \n          {/* Controls */}\n          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n            <button onClick={prev} disabled={step <= 0} style={{\n              padding: '10px 14px',\n              background: theme.colors.surface,\n              border: 'none',\n              borderRadius: '8px',\n              color: step <= 0 ? theme.colors.textMuted : theme.colors.text,\n              cursor: step <= 0 ? 'not-allowed' : 'pointer',\n              fontSize: '14px',\n            }}>\n              ‚Üê\n            </button>\n            \n            <button onClick={next} disabled={step >= history.length - 1} style={{\n              flex: 1,\n              padding: '12px',\n              background: step < history.length - 1 ? theme.colors.primary : theme.colors.positive,\n              border: 'none',\n              borderRadius: '8px',\n              color: '#fff',\n              fontFamily: theme.font,\n              fontSize: '12px',\n              fontWeight: '600',\n              cursor: step < history.length - 1 ? 'pointer' : 'default',\n            }}>\n              {step === 0 ? 'üöÄ Start Iterating' : step < history.length - 1 ? 'Next Iteration ‚Üí' : '‚úì Complete!'}\n            </button>\n            \n            <button onClick={auto} disabled={playing || step >= history.length - 1} style={{\n              padding: '10px 14px',\n              background: theme.colors.surface,\n              border: 'none',\n              borderRadius: '8px',\n              color: playing || step >= history.length - 1 ? theme.colors.textMuted : theme.colors.text,\n              cursor: playing || step >= history.length - 1 ? 'not-allowed' : 'pointer',\n              fontSize: '12px',\n            }}>\n              ‚ñ∂‚ñ∂\n            </button>\n            \n            <button onClick={reset} style={{\n              padding: '10px 14px',\n              background: theme.colors.surface,\n              border: 'none',\n              borderRadius: '8px',\n              color: theme.colors.text,\n              cursor: 'pointer',\n              fontSize: '14px',\n            }}>\n              ‚Ü∫\n            </button>\n          </div>\n        </div>\n        \n        {/* Key Insight */}\n        <div style={{\n          marginTop: '12px',\n          padding: '12px 16px',\n          background: theme.colors.surface,\n          borderRadius: '8px',\n          fontSize: '11px',\n          color: theme.colors.textSecondary,\n          textAlign: 'center',\n        }}>\n          <strong style={{ color: theme.colors.text }}>Key insight:</strong> Each equation \"adjusts\" its variable based on the others. \n          Repeat until all equations are satisfied ‚Äî that's when the values stop changing!\n        </div>\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}