{
  "problem_id": 36,
  "title": "Calculate Accuracy Score",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useEffect } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n    red: '#f87171',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [currentIdx, setCurrentIdx] = useState(-1);\n  const [yTrue, setYTrue] = useState([1, 0, 1, 1, 0, 1]);\n  const [yPred, setYPred] = useState([1, 0, 0, 1, 0, 1]);\n\n  const n = yTrue.length;\n  const numSteps = 4;\n\n  // Calculate matches\n  const matches = yTrue.map((t, i) => t === yPred[i]);\n  const correctCount = matches.filter(m => m).length;\n  const accuracy = correctCount / n;\n\n  // Count up to currentIdx\n  const currentCorrect = step >= 2 \n    ? matches.slice(0, currentIdx + 1).filter(m => m).length \n    : 0;\n\n  const stepInfo = [\n    { title: 'The Data', desc: `${n} predictions to evaluate`, color: theme.colors.primary },\n    { title: 'Compare', desc: 'Check if y_pred[i] == y_true[i] for each position', color: theme.colors.blue },\n    { title: 'Count Matches', desc: `${currentCorrect} correct so far...`, color: theme.colors.yellow },\n    { title: 'Calculate Accuracy', desc: `${correctCount}/${n} = ${(accuracy * 100).toFixed(1)}%`, color: theme.colors.green },\n  ];\n\n  // Animate comparison in step 2\n  useEffect(() => {\n    if (step === 2 && currentIdx < n - 1) {\n      const timer = setTimeout(() => {\n        setCurrentIdx(i => i + 1);\n      }, 500);\n      return () => clearTimeout(timer);\n    }\n  }, [step, currentIdx, n]);\n\n  useEffect(() => {\n    if (step === 2) setCurrentIdx(0);\n    else if (step >= 3) setCurrentIdx(n - 1);\n    else setCurrentIdx(-1);\n  }, [step, n]);\n\n  const play = async () => {\n    setPlaying(true);\n    setCurrentIdx(-1);\n    for (let s = 0; s < numSteps; s++) {\n      setStep(s);\n      if (s === 2) {\n        await new Promise(r => setTimeout(r, n * 500 + 500));\n      } else {\n        await new Promise(r => setTimeout(r, 1500));\n      }\n    }\n    setPlaying(false);\n  };\n\n  const reset = () => { \n    setStep(0); \n    setPlaying(false); \n    setCurrentIdx(-1);\n  };\n\n  const togglePred = (idx) => {\n    const newPred = [...yPred];\n    newPred[idx] = newPred[idx] === 1 ? 0 : 1;\n    setYPred(newPred);\n  };\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '10px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>Accuracy Score</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>Fraction of correct predictions</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '5px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '18px' : '10px', height: '10px', borderRadius: '5px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer'\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '8px 12px', background: theme.colors.surface, borderLeft: `3px solid ${stepInfo[step].color}`,\n        borderRadius: '0 6px 6px 0', marginBottom: '12px' }}>\n        <span style={{ fontWeight: '600', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title}: </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>{stepInfo[step].desc}</span>\n      </div>\n\n      {/* Main comparison grid */}\n      <div style={{ background: theme.colors.surface, borderRadius: '10px', padding: '16px', marginBottom: '12px' }}>\n        \n        {/* Index header */}\n        <div style={{ display: 'flex', gap: '8px', marginBottom: '8px', marginLeft: '90px' }}>\n          {yTrue.map((_, i) => (\n            <div key={i} style={{\n              width: '50px', textAlign: 'center',\n              fontSize: '12px', color: theme.colors.textMuted, fontWeight: '600'\n            }}>\n              [{i}]\n            </div>\n          ))}\n        </div>\n\n        {/* y_true row */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\n          <div style={{ width: '82px', fontSize: '13px', color: theme.colors.blue, fontWeight: '600' }}>\n            y_true\n          </div>\n          {yTrue.map((val, i) => {\n            const isChecked = step >= 1 && i <= currentIdx;\n            return (\n              <div key={i} style={{\n                width: '50px', height: '44px', borderRadius: '8px',\n                background: theme.colors.blue + '20',\n                border: `2px solid ${theme.colors.blue}`,\n                display: 'flex', alignItems: 'center', justifyContent: 'center',\n                fontSize: '20px', fontWeight: '700', color: theme.colors.blue,\n              }}>\n                {val}\n              </div>\n            );\n          })}\n        </div>\n\n        {/* y_pred row (clickable) */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '12px' }}>\n          <div style={{ width: '82px', fontSize: '13px', color: theme.colors.pink, fontWeight: '600' }}>\n            y_pred\n          </div>\n          {yPred.map((val, i) => {\n            const isMatch = val === yTrue[i];\n            const isChecked = step >= 2 && i <= currentIdx;\n            const isCurrent = step === 2 && i === currentIdx;\n            return (\n              <div key={i} onClick={() => togglePred(i)} style={{\n                width: '50px', height: '44px', borderRadius: '8px',\n                background: isChecked \n                  ? (isMatch ? theme.colors.green + '30' : theme.colors.red + '30')\n                  : theme.colors.pink + '20',\n                border: `2px solid ${isChecked ? (isMatch ? theme.colors.green : theme.colors.red) : theme.colors.pink}`,\n                display: 'flex', alignItems: 'center', justifyContent: 'center',\n                fontSize: '20px', fontWeight: '700',\n                color: isChecked ? (isMatch ? theme.colors.green : theme.colors.red) : theme.colors.pink,\n                cursor: 'pointer',\n                transform: isCurrent ? 'scale(1.1)' : 'scale(1)',\n                boxShadow: isCurrent ? `0 0 12px ${isMatch ? theme.colors.green : theme.colors.red}` : 'none',\n                transition: 'all 0.3s ease',\n              }}>\n                {val}\n              </div>\n            );\n          })}\n          <div style={{ fontSize: '11px', color: theme.colors.textMuted, marginLeft: '8px' }}>\n            (click to toggle)\n          </div>\n        </div>\n\n        {/* Match indicator row */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <div style={{ width: '82px', fontSize: '13px', color: theme.colors.yellow, fontWeight: '600' }}>\n            match?\n          </div>\n          {matches.map((isMatch, i) => {\n            const isChecked = step >= 2 && i <= currentIdx;\n            const isCurrent = step === 2 && i === currentIdx;\n            return (\n              <div key={i} style={{\n                width: '50px', height: '44px', borderRadius: '8px',\n                background: isChecked \n                  ? (isMatch ? theme.colors.green : theme.colors.red)\n                  : theme.colors.surfaceAlt,\n                display: 'flex', alignItems: 'center', justifyContent: 'center',\n                fontSize: '18px', fontWeight: '700',\n                color: isChecked ? theme.colors.background : theme.colors.border,\n                transform: isCurrent ? 'scale(1.1)' : 'scale(1)',\n                transition: 'all 0.3s ease',\n              }}>\n                {isChecked ? (isMatch ? '✓' : '✗') : '?'}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Calculation */}\n      <div style={{ display: 'flex', gap: '12px', marginBottom: '12px' }}>\n        \n        {/* Running count */}\n        <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '16px',\n          border: step >= 2 ? `2px solid ${theme.colors.yellow}` : `1px solid ${theme.colors.border}` }}>\n          <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>Count</div>\n          <div style={{ display: 'flex', alignItems: 'baseline', gap: '8px' }}>\n            <span style={{ fontSize: '36px', fontWeight: '700', color: theme.colors.green }}>\n              {step >= 2 ? currentCorrect : '?'}\n            </span>\n            <span style={{ fontSize: '20px', color: theme.colors.textMuted }}>/</span>\n            <span style={{ fontSize: '24px', fontWeight: '600', color: theme.colors.text }}>\n              {step >= 2 ? Math.min(currentIdx + 1, n) : n}\n            </span>\n            <span style={{ fontSize: '14px', color: theme.colors.textMuted, marginLeft: '8px' }}>\n              correct\n            </span>\n          </div>\n        </div>\n\n        {/* Final accuracy */}\n        <div style={{ flex: 1, background: step >= 3 ? theme.colors.green + '15' : theme.colors.surface, \n          borderRadius: '8px', padding: '16px',\n          border: step >= 3 ? `2px solid ${theme.colors.green}` : `1px solid ${theme.colors.border}` }}>\n          <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>Accuracy</div>\n          <div style={{ display: 'flex', alignItems: 'baseline', gap: '8px' }}>\n            <span style={{ fontSize: '36px', fontWeight: '700', color: step >= 3 ? theme.colors.green : theme.colors.textMuted }}>\n              {step >= 3 ? (accuracy * 100).toFixed(1) : '?'}\n            </span>\n            <span style={{ fontSize: '20px', color: step >= 3 ? theme.colors.green : theme.colors.textMuted }}>%</span>\n          </div>\n          {step >= 3 && (\n            <div style={{ fontSize: '12px', color: theme.colors.textSecondary, marginTop: '4px' }}>\n              = {correctCount} / {n} = {accuracy.toFixed(4)}\n            </div>\n          )}\n        </div>\n\n        {/* Formula */}\n        <div style={{ width: '200px', background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '16px' }}>\n          <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>Formula</div>\n          <div style={{ fontSize: '13px', color: theme.colors.textSecondary, lineHeight: 1.6 }}>\n            <div style={{ color: theme.colors.primary, fontWeight: '600' }}>\n              accuracy = \n            </div>\n            <div style={{ paddingLeft: '12px' }}>\n              Σ(y_true == y_pred)\n            </div>\n            <div style={{ borderTop: `1px solid ${theme.colors.border}`, margin: '4px 0' }} />\n            <div style={{ paddingLeft: '12px' }}>\n              len(y_true)\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Key Insight */}\n      <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '10px 14px',\n        fontSize: '12px', color: theme.colors.textSecondary, borderLeft: `3px solid ${theme.colors.primary}` }}>\n        <span style={{ color: theme.colors.primary, fontWeight: '600' }}>Key: </span>\n        {step === 0 && 'Accuracy measures how often the model\\'s predictions match the true labels. Simple but widely used!'}\n        {step === 1 && 'Compare each position: does y_pred[i] equal y_true[i]? Green = match ✓, Red = mismatch ✗'}\n        {step === 2 && `Position ${currentIdx}: y_true=${yTrue[Math.max(0, currentIdx)]}, y_pred=${yPred[Math.max(0, currentIdx)]} → ${matches[Math.max(0, currentIdx)] ? 'Match! ✓' : 'Wrong ✗'}`}\n        {step === 3 && `${correctCount} out of ${n} predictions correct = ${(accuracy * 100).toFixed(1)}% accuracy. Warning: Can be misleading on imbalanced data!`}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}