{
  "problem_id": 4,
  "title": "Calculate Mean by Row or Column",
  "category": "Linear Algebra",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo } from 'react';\n\n// ============================================\n// Inline SVG Icons\n// ============================================\nconst Icons = {\n  Rows: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\"/><path d=\"M3 9h18\"/><path d=\"M3 15h18\"/>\n    </svg>\n  ),\n  Columns: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\"/><path d=\"M9 3v18\"/><path d=\"M15 3v18\"/>\n    </svg>\n  ),\n  Play: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <polygon points=\"5 3 19 12 5 21 5 3\"/>\n    </svg>\n  ),\n  RotateCcw: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\"/><path d=\"M3 3v5h5\"/>\n    </svg>\n  ),\n  Shuffle: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22\"/><path d=\"m18 2 4 4-4 4\"/><path d=\"M2 6h1.9c1.5 0 2.9.9 3.6 2.2\"/><path d=\"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8\"/><path d=\"m18 14 4 4-4 4\"/>\n    </svg>\n  ),\n  ArrowRight: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M5 12h14\"/><path d=\"m12 5 7 7-7 7\"/>\n    </svg>\n  ),\n  Calculator: ({ size = 24, color = 'currentColor' }) => (\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <rect x=\"4\" y=\"2\" width=\"16\" height=\"20\" rx=\"2\"/><line x1=\"8\" y1=\"6\" x2=\"16\" y2=\"6\"/><line x1=\"8\" y1=\"10\" x2=\"8\" y2=\"10\"/><line x1=\"12\" y1=\"10\" x2=\"12\" y2=\"10\"/><line x1=\"16\" y1=\"10\" x2=\"16\" y2=\"10\"/><line x1=\"8\" y1=\"14\" x2=\"8\" y2=\"14\"/><line x1=\"12\" y1=\"14\" x2=\"12\" y2=\"14\"/><line x1=\"16\" y1=\"14\" x2=\"16\" y2=\"14\"/><line x1=\"8\" y1=\"18\" x2=\"8\" y2=\"18\"/><line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"18\"/><line x1=\"16\" y1=\"18\" x2=\"16\" y2=\"18\"/>\n    </svg>\n  ),\n};\n\n// ============================================\n// Design Tokens\n// ============================================\nconst theme = {\n  colors: {\n    primary: '#6366f1',\n    primaryHover: '#4f46e5',\n    secondary: '#ffffff',\n    background: '#000000',\n    surface: '#0a0a0a',\n    surfaceAlt: '#111111',\n    border: '#1f1f1f',\n    borderLight: '#2a2a2a',\n    text: '#ffffff',\n    textSecondary: '#a1a1aa',\n    textMuted: '#71717a',\n    success: '#22c55e',\n    error: '#ef4444',\n    warning: '#f59e0b',\n    row: '#3b82f6',\n    column: '#22c55e',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\n// Row colors\nconst rowColors = ['#ef4444', '#f59e0b', '#22c55e', '#3b82f6', '#8b5cf6'];\n// Column colors  \nconst colColors = ['#06b6d4', '#10b981', '#84cc16', '#eab308', '#f97316'];\n\n// ============================================\n// Card Component\n// ============================================\nfunction Card({ children, style = {} }) {\n  return (\n    <div\n      style={{\n        background: theme.colors.surface,\n        border: `1px solid ${theme.colors.border}`,\n        borderRadius: '12px',\n        padding: '24px',\n        ...style,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\n// ============================================\n// Mode Toggle\n// ============================================\nfunction ModeToggle({ mode, onChange }) {\n  return (\n    <div style={{\n      display: 'flex',\n      background: theme.colors.surfaceAlt,\n      borderRadius: '8px',\n      padding: '4px',\n      border: `1px solid ${theme.colors.border}`,\n    }}>\n      <button\n        onClick={() => onChange('row')}\n        style={{\n          flex: 1,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: '8px',\n          padding: '12px 20px',\n          background: mode === 'row' ? theme.colors.row : 'transparent',\n          border: 'none',\n          borderRadius: '6px',\n          color: mode === 'row' ? theme.colors.secondary : theme.colors.textSecondary,\n          fontFamily: theme.font,\n          fontSize: '14px',\n          fontWeight: '600',\n          cursor: 'pointer',\n          transition: 'all 0.2s',\n        }}\n      >\n        <Icons.Rows size={18} />\n        Row Mean\n      </button>\n      <button\n        onClick={() => onChange('column')}\n        style={{\n          flex: 1,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: '8px',\n          padding: '12px 20px',\n          background: mode === 'column' ? theme.colors.column : 'transparent',\n          border: 'none',\n          borderRadius: '6px',\n          color: mode === 'column' ? theme.colors.secondary : theme.colors.textSecondary,\n          fontFamily: theme.font,\n          fontSize: '14px',\n          fontWeight: '600',\n          cursor: 'pointer',\n          transition: 'all 0.2s',\n        }}\n      >\n        <Icons.Columns size={18} />\n        Column Mean\n      </button>\n    </div>\n  );\n}\n\n// ============================================\n// Matrix Cell\n// ============================================\nfunction MatrixCell({ value, onChange, isHighlighted, highlightColor }) {\n  return (\n    <input\n      type=\"number\"\n      value={value}\n      onChange={(e) => onChange(parseFloat(e.target.value) || 0)}\n      style={{\n        width: '52px',\n        height: '52px',\n        background: isHighlighted ? `${highlightColor}25` : theme.colors.surfaceAlt,\n        border: `2px solid ${isHighlighted ? highlightColor : theme.colors.border}`,\n        borderRadius: '8px',\n        color: isHighlighted ? highlightColor : theme.colors.text,\n        fontFamily: theme.font,\n        fontSize: '16px',\n        fontWeight: '600',\n        textAlign: 'center',\n        outline: 'none',\n        transition: 'all 0.2s ease',\n        transform: isHighlighted ? 'scale(1.05)' : 'scale(1)',\n      }}\n    />\n  );\n}\n\n// ============================================\n// Result Bar\n// ============================================\nfunction ResultBar({ value, maxValue, index, color, label, isHighlighted }) {\n  const percentage = Math.min(Math.abs(value) / Math.max(maxValue, 0.1) * 100, 100);\n  \n  return (\n    <div style={{ \n      display: 'flex', \n      alignItems: 'center', \n      gap: '12px',\n      opacity: isHighlighted ? 1 : 0.5,\n      transition: 'opacity 0.2s',\n    }}>\n      <div style={{\n        minWidth: '70px',\n        fontSize: '12px',\n        color: theme.colors.textSecondary,\n      }}>\n        {label}\n      </div>\n      <div style={{\n        flex: 1,\n        height: '28px',\n        background: theme.colors.surfaceAlt,\n        borderRadius: '6px',\n        overflow: 'hidden',\n        position: 'relative',\n      }}>\n        <div\n          style={{\n            position: 'absolute',\n            left: 0,\n            top: 0,\n            height: '100%',\n            width: `${percentage}%`,\n            background: `linear-gradient(90deg, ${color}80, ${color})`,\n            borderRadius: '6px',\n            transition: 'width 0.3s ease',\n          }}\n        />\n      </div>\n      <div style={{\n        minWidth: '60px',\n        textAlign: 'right',\n        fontFamily: theme.font,\n        fontSize: '14px',\n        fontWeight: '700',\n        color: isHighlighted ? color : theme.colors.text,\n      }}>\n        {value.toFixed(2)}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Calculation Display\n// ============================================\nfunction CalculationDisplay({ elements, index, mode, color }) {\n  const sum = elements.reduce((a, b) => a + b, 0);\n  const mean = sum / elements.length;\n  \n  return (\n    <div style={{\n      background: `${color}10`,\n      border: `1px solid ${color}30`,\n      borderRadius: '8px',\n      padding: '12px 16px',\n    }}>\n      <div style={{\n        fontSize: '11px',\n        color: theme.colors.textMuted,\n        textTransform: 'uppercase',\n        letterSpacing: '0.5px',\n        marginBottom: '8px',\n      }}>\n        {mode === 'row' ? `Row ${index + 1}` : `Column ${index + 1}`} Calculation\n      </div>\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: 'wrap',\n        gap: '6px',\n        fontFamily: theme.font,\n        fontSize: '13px',\n      }}>\n        <span style={{ color: theme.colors.textMuted }}>μ = (</span>\n        {elements.map((val, i) => (\n          <React.Fragment key={i}>\n            {i > 0 && <span style={{ color: theme.colors.textMuted }}>+</span>}\n            <span style={{ color: color, fontWeight: '600' }}>{val}</span>\n          </React.Fragment>\n        ))}\n        <span style={{ color: theme.colors.textMuted }}>) / {elements.length}</span>\n        <span style={{ color: theme.colors.textMuted }}>=</span>\n        <span style={{ color: theme.colors.textMuted }}>{sum} / {elements.length}</span>\n        <span style={{ color: theme.colors.textMuted }}>=</span>\n        <span style={{\n          color: color,\n          fontWeight: '700',\n          background: `${color}20`,\n          padding: '2px 8px',\n          borderRadius: '4px',\n        }}>\n          {mean.toFixed(2)}\n        </span>\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Main Component\n// ============================================\nexport default function MatrixMean() {\n  const [matrix, setMatrix] = useState([\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9],\n  ]);\n  const [mode, setMode] = useState('row');\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [highlightedIndex, setHighlightedIndex] = useState(-1);\n  const [showCalculations, setShowCalculations] = useState(false);\n  \n  const rows = matrix.length;\n  const cols = matrix[0].length;\n  \n  // Compute means\n  const rowMeans = useMemo(() => {\n    return matrix.map(row => row.reduce((a, b) => a + b, 0) / row.length);\n  }, [matrix]);\n  \n  const colMeans = useMemo(() => {\n    return matrix[0].map((_, colIdx) => {\n      const colSum = matrix.reduce((sum, row) => sum + row[colIdx], 0);\n      return colSum / matrix.length;\n    });\n  }, [matrix]);\n  \n  const means = mode === 'row' ? rowMeans : colMeans;\n  const maxMean = Math.max(...means.map(Math.abs), 1);\n  \n  // Get color for current mode\n  const getHighlightColor = (idx) => {\n    return mode === 'row' ? rowColors[idx % rowColors.length] : colColors[idx % colColors.length];\n  };\n  \n  // Check if cell should be highlighted\n  const isCellHighlighted = (rowIdx, colIdx) => {\n    if (highlightedIndex === -1) return false;\n    return mode === 'row' ? rowIdx === highlightedIndex : colIdx === highlightedIndex;\n  };\n  \n  // Get highlight color for cell\n  const getCellHighlightColor = (rowIdx, colIdx) => {\n    if (mode === 'row') {\n      return rowColors[rowIdx % rowColors.length];\n    } else {\n      return colColors[colIdx % colColors.length];\n    }\n  };\n  \n  // Update matrix cell\n  const updateMatrix = (rowIdx, colIdx, value) => {\n    const newMatrix = matrix.map((row, r) =>\n      row.map((cell, c) => (r === rowIdx && c === colIdx ? value : cell))\n    );\n    setMatrix(newMatrix);\n  };\n  \n  // Dimension controls\n  const addRow = () => {\n    if (rows < 5) {\n      setMatrix([...matrix, Array(cols).fill(0)]);\n    }\n  };\n  \n  const removeRow = () => {\n    if (rows > 1) {\n      setMatrix(matrix.slice(0, -1));\n    }\n  };\n  \n  const addCol = () => {\n    if (cols < 5) {\n      setMatrix(matrix.map(row => [...row, 0]));\n    }\n  };\n  \n  const removeCol = () => {\n    if (cols > 1) {\n      setMatrix(matrix.map(row => row.slice(0, -1)));\n    }\n  };\n  \n  // Animation\n  const animate = async () => {\n    setIsAnimating(true);\n    setShowCalculations(true);\n    \n    const count = mode === 'row' ? rows : cols;\n    for (let i = 0; i < count; i++) {\n      setHighlightedIndex(i);\n      await new Promise(r => setTimeout(r, 800));\n    }\n    \n    setHighlightedIndex(-1);\n    setIsAnimating(false);\n  };\n  \n  // Reset\n  const reset = () => {\n    setMatrix([[1, 2, 3], [4, 5, 6], [7, 8, 9]]);\n    setMode('row');\n    setHighlightedIndex(-1);\n    setShowCalculations(false);\n  };\n  \n  // Randomize\n  const randomize = () => {\n    const newMatrix = matrix.map(row =>\n      row.map(() => Math.floor(Math.random() * 19) - 9)\n    );\n    setMatrix(newMatrix);\n  };\n\n  return (\n    <div\n      style={{\n        minHeight: '100vh',\n        background: theme.colors.background,\n        color: theme.colors.text,\n        fontFamily: theme.font,\n        padding: '32px',\n      }}\n    >\n      <div style={{ maxWidth: '800px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ marginBottom: '32px' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '8px' }}>\n            <Icons.Calculator size={24} color={theme.colors.primary} />\n            <h1 style={{ fontSize: '24px', fontWeight: '600', margin: 0 }}>\n              Matrix Mean by Row or Column\n            </h1>\n          </div>\n          <p style={{ color: theme.colors.textSecondary, fontSize: '14px', margin: 0 }}>\n            Calculate the average of elements along rows or columns\n          </p>\n        </div>\n        \n        {/* Mode Toggle */}\n        <Card>\n          <div style={{ \n            fontSize: '12px', \n            color: theme.colors.textMuted, \n            textTransform: 'uppercase', \n            letterSpacing: '0.5px',\n            marginBottom: '12px',\n          }}>\n            Select Mode\n          </div>\n          <ModeToggle mode={mode} onChange={setMode} />\n          \n          <div style={{\n            marginTop: '16px',\n            padding: '12px 16px',\n            background: theme.colors.surfaceAlt,\n            borderRadius: '8px',\n            fontSize: '13px',\n            color: theme.colors.textSecondary,\n          }}>\n            {mode === 'row' ? (\n              <>\n                <strong style={{ color: theme.colors.row }}>Row mean:</strong> Average each row → {rows} results\n              </>\n            ) : (\n              <>\n                <strong style={{ color: theme.colors.column }}>Column mean:</strong> Average each column → {cols} results\n              </>\n            )}\n          </div>\n        </Card>\n        \n        {/* Dimension Controls */}\n        <Card style={{ marginTop: '16px' }}>\n          <div style={{ \n            display: 'flex', \n            justifyContent: 'space-between', \n            alignItems: 'center',\n            marginBottom: '16px',\n          }}>\n            <div style={{ fontSize: '12px', color: theme.colors.textMuted, textTransform: 'uppercase', letterSpacing: '0.5px' }}>\n              Matrix Dimensions\n            </div>\n            <div style={{ \n              padding: '6px 12px', \n              background: theme.colors.surfaceAlt, \n              borderRadius: '6px',\n              fontSize: '13px',\n              color: theme.colors.textSecondary,\n            }}>\n              {rows} × {cols}\n            </div>\n          </div>\n          \n          <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n            {[\n              { label: '+ Row', action: addRow, disabled: rows >= 5 },\n              { label: '- Row', action: removeRow, disabled: rows <= 1 },\n              { label: '+ Col', action: addCol, disabled: cols >= 5 },\n              { label: '- Col', action: removeCol, disabled: cols <= 1 },\n            ].map(({ label, action, disabled }) => (\n              <button\n                key={label}\n                onClick={action}\n                disabled={disabled}\n                style={{\n                  padding: '8px 16px',\n                  background: theme.colors.surfaceAlt,\n                  border: `1px solid ${theme.colors.border}`,\n                  borderRadius: '6px',\n                  color: disabled ? theme.colors.textMuted : theme.colors.textSecondary,\n                  fontFamily: theme.font,\n                  fontSize: '13px',\n                  cursor: disabled ? 'not-allowed' : 'pointer',\n                  opacity: disabled ? 0.5 : 1,\n                }}\n              >\n                {label}\n              </button>\n            ))}\n            <button\n              onClick={randomize}\n              style={{\n                padding: '8px 16px',\n                background: theme.colors.surfaceAlt,\n                border: `1px solid ${theme.colors.border}`,\n                borderRadius: '6px',\n                color: theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '13px',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px',\n              }}\n            >\n              <Icons.Shuffle size={14} />\n              Random\n            </button>\n          </div>\n        </Card>\n        \n        {/* Main Visualization */}\n        <Card style={{ marginTop: '16px' }}>\n          <div style={{ \n            display: 'flex', \n            alignItems: 'flex-start', \n            gap: '32px',\n            justifyContent: 'center',\n            flexWrap: 'wrap',\n          }}>\n            {/* Matrix with row/column indicators */}\n            <div>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '8px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n                textAlign: 'center',\n              }}>\n                Matrix\n              </div>\n              \n              {/* Column indicators (for column mode) */}\n              {mode === 'column' && (\n                <div style={{ display: 'flex', gap: '6px', marginBottom: '8px', marginLeft: '0px' }}>\n                  {Array.from({ length: cols }, (_, i) => (\n                    <div\n                      key={i}\n                      style={{\n                        width: '52px',\n                        height: '20px',\n                        background: highlightedIndex === i ? colColors[i % colColors.length] : `${colColors[i % colColors.length]}30`,\n                        borderRadius: '4px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: '10px',\n                        fontWeight: '600',\n                        color: highlightedIndex === i ? '#000' : colColors[i % colColors.length],\n                        transition: 'all 0.2s',\n                      }}\n                    >\n                      C{i + 1}\n                    </div>\n                  ))}\n                </div>\n              )}\n              \n              <div style={{ display: 'flex', gap: '8px' }}>\n                {/* Row indicators (for row mode) */}\n                {mode === 'row' && (\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>\n                    {Array.from({ length: rows }, (_, i) => (\n                      <div\n                        key={i}\n                        style={{\n                          width: '28px',\n                          height: '52px',\n                          background: highlightedIndex === i ? rowColors[i % rowColors.length] : `${rowColors[i % rowColors.length]}30`,\n                          borderRadius: '4px',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          fontSize: '10px',\n                          fontWeight: '600',\n                          color: highlightedIndex === i ? '#000' : rowColors[i % rowColors.length],\n                          transition: 'all 0.2s',\n                        }}\n                      >\n                        R{i + 1}\n                      </div>\n                    ))}\n                  </div>\n                )}\n                \n                {/* Matrix grid */}\n                <div\n                  style={{\n                    display: 'inline-flex',\n                    flexDirection: 'column',\n                    gap: '6px',\n                    padding: '16px',\n                    background: theme.colors.surfaceAlt,\n                    borderRadius: '12px',\n                    border: `1px solid ${theme.colors.border}`,\n                  }}\n                >\n                  {matrix.map((row, rowIdx) => (\n                    <div key={rowIdx} style={{ display: 'flex', gap: '6px' }}>\n                      {row.map((cell, colIdx) => (\n                        <MatrixCell\n                          key={colIdx}\n                          value={cell}\n                          onChange={(v) => updateMatrix(rowIdx, colIdx, v)}\n                          isHighlighted={isCellHighlighted(rowIdx, colIdx)}\n                          highlightColor={getCellHighlightColor(rowIdx, colIdx)}\n                        />\n                      ))}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n            \n            {/* Arrow */}\n            <div style={{ \n              display: 'flex', \n              flexDirection: 'column', \n              alignItems: 'center',\n              gap: '8px',\n              paddingTop: mode === 'column' ? '48px' : '20px',\n            }}>\n              <div style={{\n                padding: '6px 12px',\n                background: `${mode === 'row' ? theme.colors.row : theme.colors.column}20`,\n                border: `1px solid ${mode === 'row' ? theme.colors.row : theme.colors.column}40`,\n                borderRadius: '6px',\n                fontSize: '11px',\n                color: mode === 'row' ? theme.colors.row : theme.colors.column,\n                fontWeight: '600',\n              }}>\n                mean\n              </div>\n              <Icons.ArrowRight size={24} color={theme.colors.textMuted} />\n            </div>\n            \n            {/* Results */}\n            <div style={{ minWidth: '200px' }}>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '8px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n              }}>\n                Result ({mode === 'row' ? rows : cols} means)\n              </div>\n              <div style={{\n                padding: '16px',\n                background: theme.colors.surfaceAlt,\n                borderRadius: '12px',\n                border: `1px solid ${mode === 'row' ? theme.colors.row : theme.colors.column}40`,\n              }}>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                  {means.map((mean, idx) => (\n                    <ResultBar\n                      key={idx}\n                      value={mean}\n                      maxValue={maxMean}\n                      index={idx}\n                      color={getHighlightColor(idx)}\n                      label={mode === 'row' ? `Row ${idx + 1}` : `Col ${idx + 1}`}\n                      isHighlighted={highlightedIndex === -1 || highlightedIndex === idx}\n                    />\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Calculations */}\n          {showCalculations && (\n            <div style={{ marginTop: '24px' }}>\n              <div style={{ \n                fontSize: '11px', \n                color: theme.colors.textMuted, \n                marginBottom: '12px',\n                textTransform: 'uppercase',\n                letterSpacing: '0.5px',\n              }}>\n                Calculations\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                {mode === 'row' ? (\n                  matrix.map((row, idx) => (\n                    (highlightedIndex === -1 || highlightedIndex === idx) && (\n                      <CalculationDisplay\n                        key={idx}\n                        elements={row}\n                        index={idx}\n                        mode={mode}\n                        color={rowColors[idx % rowColors.length]}\n                      />\n                    )\n                  ))\n                ) : (\n                  matrix[0].map((_, colIdx) => (\n                    (highlightedIndex === -1 || highlightedIndex === colIdx) && (\n                      <CalculationDisplay\n                        key={colIdx}\n                        elements={matrix.map(row => row[colIdx])}\n                        index={colIdx}\n                        mode={mode}\n                        color={colColors[colIdx % colColors.length]}\n                      />\n                    )\n                  ))\n                )}\n              </div>\n            </div>\n          )}\n          \n          {/* Controls */}\n          <div style={{ display: 'flex', gap: '12px', marginTop: '24px' }}>\n            <button\n              onClick={animate}\n              disabled={isAnimating}\n              style={{\n                flex: 1,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                padding: '14px 24px',\n                background: mode === 'row' ? theme.colors.row : theme.colors.column,\n                border: 'none',\n                borderRadius: '8px',\n                color: theme.colors.secondary,\n                fontFamily: theme.font,\n                fontSize: '14px',\n                fontWeight: '600',\n                cursor: isAnimating ? 'not-allowed' : 'pointer',\n                opacity: isAnimating ? 0.7 : 1,\n              }}\n            >\n              <Icons.Play size={16} />\n              {isAnimating ? 'Animating...' : `Animate ${mode === 'row' ? 'Rows' : 'Columns'}`}\n            </button>\n            \n            <button\n              onClick={() => setShowCalculations(!showCalculations)}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                padding: '14px 24px',\n                background: showCalculations ? `${theme.colors.primary}20` : theme.colors.surfaceAlt,\n                border: `1px solid ${showCalculations ? theme.colors.primary : theme.colors.border}`,\n                borderRadius: '8px',\n                color: showCalculations ? theme.colors.primary : theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '14px',\n                fontWeight: '500',\n                cursor: 'pointer',\n              }}\n            >\n              <Icons.Calculator size={16} />\n              Math\n            </button>\n            \n            <button\n              onClick={reset}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                padding: '14px 24px',\n                background: theme.colors.surfaceAlt,\n                border: `1px solid ${theme.colors.border}`,\n                borderRadius: '8px',\n                color: theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '14px',\n                fontWeight: '500',\n                cursor: 'pointer',\n              }}\n            >\n              <Icons.RotateCcw size={16} />\n              Reset\n            </button>\n          </div>\n        </Card>\n        \n        {/* Formula Reference */}\n        <Card style={{ marginTop: '16px' }}>\n          <div style={{ \n            fontSize: '11px', \n            color: theme.colors.textMuted, \n            marginBottom: '16px',\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px',\n          }}>\n            Mean Formulas\n          </div>\n          \n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\n            gap: '16px',\n          }}>\n            <div style={{\n              padding: '16px',\n              background: `${theme.colors.row}10`,\n              border: `1px solid ${theme.colors.row}30`,\n              borderRadius: '8px',\n            }}>\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px',\n                marginBottom: '12px',\n              }}>\n                <Icons.Rows size={16} color={theme.colors.row} />\n                <span style={{ fontSize: '14px', color: theme.colors.row, fontWeight: '600' }}>\n                  Row Mean\n                </span>\n              </div>\n              <div style={{\n                fontFamily: theme.font,\n                fontSize: '14px',\n                color: theme.colors.text,\n                background: theme.colors.background,\n                padding: '12px',\n                borderRadius: '6px',\n              }}>\n                μ<sub>row i</sub> = (1/n) × Σ a<sub>ij</sub>\n              </div>\n              <div style={{\n                marginTop: '8px',\n                fontSize: '12px',\n                color: theme.colors.textSecondary,\n              }}>\n                Sum elements in row, divide by column count (n)\n              </div>\n            </div>\n            \n            <div style={{\n              padding: '16px',\n              background: `${theme.colors.column}10`,\n              border: `1px solid ${theme.colors.column}30`,\n              borderRadius: '8px',\n            }}>\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px',\n                marginBottom: '12px',\n              }}>\n                <Icons.Columns size={16} color={theme.colors.column} />\n                <span style={{ fontSize: '14px', color: theme.colors.column, fontWeight: '600' }}>\n                  Column Mean\n                </span>\n              </div>\n              <div style={{\n                fontFamily: theme.font,\n                fontSize: '14px',\n                color: theme.colors.text,\n                background: theme.colors.background,\n                padding: '12px',\n                borderRadius: '6px',\n              }}>\n                μ<sub>col j</sub> = (1/m) × Σ a<sub>ij</sub>\n              </div>\n              <div style={{\n                marginTop: '8px',\n                fontSize: '12px',\n                color: theme.colors.textSecondary,\n              }}>\n                Sum elements in column, divide by row count (m)\n              </div>\n            </div>\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}