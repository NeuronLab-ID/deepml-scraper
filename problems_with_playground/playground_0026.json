{
  "problem_id": 26,
  "title": "Implementing Basic Autograd Operations",
  "category": "Deep Learning",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo } from 'react';\n\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#111111',\n    surfaceAlt: '#1a1a1a',\n    border: '#2a2a2a',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    blue: '#38bdf8',\n    yellow: '#fbbf24',\n    pink: '#f472b6',\n    green: '#a3e635',\n    orange: '#fb923c',\n    red: '#f43f5e',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nexport default function App() {\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  const [a, setA] = useState(2);\n  const [b, setB] = useState(3);\n  const [c, setC] = useState(10);\n\n  const numSteps = 5;\n\n  const compute = useMemo(() => {\n    const bc = b * c;\n    const sum = a + bc;\n    const e = Math.max(0, sum);\n    const blocked = sum <= 0;\n    const a_grad = blocked ? 0 : 1;\n    const b_grad = blocked ? 0 : c;\n    const c_grad = blocked ? 0 : b;\n    return { bc, sum, e, a_grad, b_grad, c_grad, blocked };\n  }, [a, b, c]);\n\n  const { bc, sum, e, a_grad, b_grad, c_grad, blocked } = compute;\n\n  const stepInfo = [\n    { title: 'Explore', desc: 'Adjust inputs. Try making a + bÃ—c negative!', color: theme.colors.primary },\n    { title: 'Forward', desc: 'Compute left â†’ right', color: theme.colors.blue },\n    { title: 'Start Backward', desc: 'Output gradient = 1', color: theme.colors.yellow },\n    { title: 'Chain Rule', desc: blocked ? 'ðŸš« ReLU blocks (input â‰¤ 0)' : 'Multiply gradients backward', color: theme.colors.orange },\n    { title: 'Result', desc: 'Final gradients on each input', color: theme.colors.green },\n  ];\n\n  const play = async () => {\n    setPlaying(true);\n    for (let s = 0; s < numSteps; s++) {\n      setStep(s);\n      await new Promise(r => setTimeout(r, 1600));\n    }\n    setPlaying(false);\n  };\n\n  const reset = () => { setStep(0); setPlaying(false); setA(2); setB(3); setC(10); };\n\n  return (\n    <div style={{ background: theme.colors.background, minHeight: '100vh', padding: '12px', fontFamily: theme.font, color: theme.colors.text }}>\n      \n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '8px' }}>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: '700' }}>Autograd: Backpropagation</div>\n          <div style={{ fontSize: '12px', color: theme.colors.textSecondary }}>e = relu(a + b Ã— c)</div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}\n            style={{ padding: '6px 12px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: step === 0 ? theme.colors.textMuted : theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'<'}</button>\n          <div style={{ display: 'flex', gap: '5px' }}>\n            {Array.from({ length: numSteps }, (_, i) => (\n              <div key={i} onClick={() => setStep(i)} style={{\n                width: i === step ? '18px' : '10px', height: '10px', borderRadius: '5px',\n                background: i <= step ? stepInfo[i].color : theme.colors.border, cursor: 'pointer'\n              }} />\n            ))}\n          </div>\n          <button onClick={() => setStep(Math.min(numSteps - 1, step + 1))} disabled={step === numSteps - 1}\n            style={{ padding: '6px 12px', background: step === numSteps - 1 ? theme.colors.surface : theme.colors.primary,\n              border: 'none', borderRadius: '6px', color: theme.colors.text, fontSize: '14px', cursor: 'pointer' }}>{'>'}</button>\n          <button onClick={play} disabled={playing}\n            style={{ padding: '6px 12px', background: playing ? theme.colors.green : theme.colors.surface,\n              border: 'none', borderRadius: '6px', color: playing ? theme.colors.background : theme.colors.text,\n              fontSize: '12px', cursor: 'pointer' }}>{playing ? '...' : 'Play'}</button>\n          <button onClick={reset}\n            style={{ padding: '6px 10px', background: theme.colors.surface, border: 'none', borderRadius: '6px',\n              color: theme.colors.textSecondary, fontSize: '14px', cursor: 'pointer' }}>~</button>\n        </div>\n      </div>\n\n      {/* Step info */}\n      <div style={{ padding: '8px 12px', background: theme.colors.surface, borderLeft: `3px solid ${stepInfo[step].color}`,\n        borderRadius: '0 6px 6px 0', marginBottom: '8px' }}>\n        <span style={{ fontWeight: '600', color: stepInfo[step].color, fontSize: '14px' }}>{stepInfo[step].title}: </span>\n        <span style={{ color: theme.colors.textSecondary, fontSize: '13px' }}>{stepInfo[step].desc}</span>\n      </div>\n\n      {/* Main Graph - Clean horizontal layout */}\n      <div style={{ background: theme.colors.surface, borderRadius: '10px', padding: '12px', marginBottom: '8px' }}>\n        <svg viewBox=\"0 0 750 200\" style={{ width: '100%', height: '200px' }}>\n          <rect x=\"0\" y=\"0\" width=\"750\" height=\"200\" fill={theme.colors.surfaceAlt} rx=\"8\" />\n\n          {/* Row 1: b â†’ Ã— */}\n          {/* Node b */}\n          <circle cx=\"70\" cy=\"50\" r=\"32\" fill={theme.colors.surfaceAlt} stroke={step >= 4 ? (blocked ? theme.colors.red : theme.colors.green) : theme.colors.blue} strokeWidth=\"3\" />\n          <text x=\"70\" y=\"43\" textAnchor=\"middle\" fill={theme.colors.textMuted} fontSize=\"14\">b</text>\n          <text x=\"70\" y=\"62\" textAnchor=\"middle\" fill={theme.colors.blue} fontSize=\"20\" fontWeight=\"bold\">{b}</text>\n          {step >= 4 && <text x=\"70\" y=\"100\" textAnchor=\"middle\" fill={blocked ? theme.colors.red : theme.colors.green} fontSize=\"16\" fontWeight=\"bold\">âˆ‡{b_grad}</text>}\n          \n          {/* Arrow b â†’ Ã— */}\n          <line x1=\"102\" y1=\"50\" x2=\"148\" y2=\"50\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n          \n          {/* Node Ã— */}\n          <rect x=\"150\" y=\"25\" width=\"50\" height=\"50\" rx=\"8\" fill={theme.colors.surfaceAlt} stroke={step >= 1 ? theme.colors.yellow : theme.colors.border} strokeWidth=\"3\" />\n          <text x=\"175\" y=\"58\" textAnchor=\"middle\" fill={theme.colors.text} fontSize=\"22\" fontWeight=\"bold\">Ã—</text>\n          {step >= 1 && <text x=\"225\" y=\"35\" textAnchor=\"start\" fill={theme.colors.yellow} fontSize=\"16\" fontWeight=\"bold\">{bc}</text>}\n          \n          {/* Node c */}\n          <circle cx=\"70\" cy=\"150\" r=\"32\" fill={theme.colors.surfaceAlt} stroke={step >= 4 ? (blocked ? theme.colors.red : theme.colors.green) : theme.colors.blue} strokeWidth=\"3\" />\n          <text x=\"70\" y=\"143\" textAnchor=\"middle\" fill={theme.colors.textMuted} fontSize=\"14\">c</text>\n          <text x=\"70\" y=\"162\" textAnchor=\"middle\" fill={theme.colors.blue} fontSize=\"20\" fontWeight=\"bold\">{c}</text>\n          {step >= 4 && <text x=\"70\" y=\"195\" textAnchor=\"middle\" fill={blocked ? theme.colors.red : theme.colors.green} fontSize=\"16\" fontWeight=\"bold\">âˆ‡{c_grad}</text>}\n          \n          {/* Arrow c â†’ Ã— */}\n          <line x1=\"102\" y1=\"150\" x2=\"148\" y2=\"150\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n          <line x1=\"175\" y1=\"75\" x2=\"175\" y2=\"125\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n          <line x1=\"148\" y1=\"150\" x2=\"175\" y2=\"150\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n          <line x1=\"175\" y1=\"125\" x2=\"175\" y2=\"150\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n\n          {/* Arrow Ã— â†’ + */}\n          <line x1=\"200\" y1=\"50\" x2=\"280\" y2=\"100\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n\n          {/* Node a */}\n          <circle cx=\"220\" cy=\"150\" r=\"32\" fill={theme.colors.surfaceAlt} stroke={step >= 4 ? (blocked ? theme.colors.red : theme.colors.green) : theme.colors.blue} strokeWidth=\"3\" />\n          <text x=\"220\" y=\"143\" textAnchor=\"middle\" fill={theme.colors.textMuted} fontSize=\"14\">a</text>\n          <text x=\"220\" y=\"162\" textAnchor=\"middle\" fill={theme.colors.blue} fontSize=\"20\" fontWeight=\"bold\">{a}</text>\n          {step >= 4 && <text x=\"220\" y=\"195\" textAnchor=\"middle\" fill={blocked ? theme.colors.red : theme.colors.green} fontSize=\"16\" fontWeight=\"bold\">âˆ‡{a_grad}</text>}\n\n          {/* Arrow a â†’ + */}\n          <line x1=\"252\" y1=\"150\" x2=\"280\" y2=\"125\" stroke={step >= 1 ? theme.colors.blue : theme.colors.border} strokeWidth=\"3\" />\n\n          {/* Node + */}\n          <rect x=\"280\" y=\"85\" width=\"50\" height=\"50\" rx=\"8\" fill={theme.colors.surfaceAlt} stroke={step >= 1 ? theme.colors.yellow : theme.colors.border} strokeWidth=\"3\" />\n          <text x=\"305\" y=\"118\" textAnchor=\"middle\" fill={theme.colors.text} fontSize=\"22\" fontWeight=\"bold\">+</text>\n          {step >= 1 && <text x=\"355\" y=\"95\" textAnchor=\"start\" fill={theme.colors.yellow} fontSize=\"16\" fontWeight=\"bold\">{sum}</text>}\n\n          {/* Arrow + â†’ relu */}\n          <line x1=\"330\" y1=\"110\" x2=\"400\" y2=\"110\" stroke={step >= 1 ? theme.colors.yellow : theme.colors.border} strokeWidth=\"3\" />\n\n          {/* Node relu */}\n          <rect x=\"400\" y=\"85\" width=\"70\" height=\"50\" rx=\"8\" fill={theme.colors.surfaceAlt} stroke={step >= 1 ? theme.colors.yellow : theme.colors.border} strokeWidth=\"3\" />\n          <text x=\"435\" y=\"118\" textAnchor=\"middle\" fill={theme.colors.text} fontSize=\"18\" fontWeight=\"bold\">relu</text>\n\n          {/* Arrow relu â†’ e */}\n          <line x1=\"470\" y1=\"110\" x2=\"530\" y2=\"110\" stroke={step >= 1 ? theme.colors.pink : theme.colors.border} strokeWidth=\"3\" />\n\n          {/* Node e (output) */}\n          <circle cx=\"565\" cy=\"110\" r=\"35\" fill={step >= 2 ? (blocked ? theme.colors.red + '25' : theme.colors.green + '25') : theme.colors.surfaceAlt} \n            stroke={step >= 1 ? theme.colors.pink : theme.colors.border} strokeWidth=\"3\" />\n          <text x=\"565\" y=\"103\" textAnchor=\"middle\" fill={theme.colors.textMuted} fontSize=\"14\">e</text>\n          {step >= 1 && <text x=\"565\" y=\"125\" textAnchor=\"middle\" fill={theme.colors.pink} fontSize=\"24\" fontWeight=\"bold\">{e}</text>}\n          {step >= 2 && <text x=\"565\" y=\"160\" textAnchor=\"middle\" fill={theme.colors.yellow} fontSize=\"16\" fontWeight=\"bold\">âˆ‡1</text>}\n\n          {/* BACKWARD FLOW - Simple horizontal arrows below */}\n          {step >= 3 && (\n            <>\n              {/* e â†’ relu */}\n              <line x1=\"530\" y1=\"155\" x2=\"470\" y2=\"155\" stroke={blocked ? theme.colors.red : theme.colors.orange} strokeWidth=\"2.5\" markerEnd=\"url(#backArrow)\" />\n              <text x=\"500\" y=\"172\" textAnchor=\"middle\" fill={blocked ? theme.colors.red : theme.colors.orange} fontSize=\"13\" fontWeight=\"bold\">Ã—1</text>\n              \n              {/* relu â†’ + */}\n              <line x1=\"400\" y1=\"155\" x2=\"330\" y2=\"155\" stroke={blocked ? theme.colors.red : theme.colors.orange} strokeWidth=\"2.5\" markerEnd=\"url(#backArrow)\" />\n              <text x=\"365\" y=\"172\" textAnchor=\"middle\" fill={blocked ? theme.colors.red : theme.colors.orange} fontSize=\"13\" fontWeight=\"bold\">{blocked ? 'Ã—0' : 'Ã—1'}</text>\n            </>\n          )}\n\n          {step >= 4 && !blocked && (\n            <>\n              {/* + â†’ a */}\n              <line x1=\"280\" y1=\"155\" x2=\"252\" y2=\"155\" stroke={theme.colors.orange} strokeWidth=\"2.5\" markerEnd=\"url(#backArrow)\" />\n              <text x=\"266\" y=\"172\" textAnchor=\"middle\" fill={theme.colors.orange} fontSize=\"12\" fontWeight=\"bold\">Ã—1</text>\n              \n              {/* + â†’ Ã— */}\n              <line x1=\"280\" y1=\"60\" x2=\"200\" y2=\"60\" stroke={theme.colors.orange} strokeWidth=\"2.5\" markerEnd=\"url(#backArrow)\" />\n              <text x=\"240\" y=\"55\" textAnchor=\"middle\" fill={theme.colors.orange} fontSize=\"12\" fontWeight=\"bold\">Ã—1</text>\n              \n              {/* Ã— â†’ b */}\n              <line x1=\"150\" y1=\"35\" x2=\"102\" y2=\"35\" stroke={theme.colors.orange} strokeWidth=\"2.5\" markerEnd=\"url(#backArrow)\" />\n              <text x=\"126\" y=\"28\" textAnchor=\"middle\" fill={theme.colors.orange} fontSize=\"12\" fontWeight=\"bold\">Ã—c</text>\n              \n              {/* Ã— â†’ c */}\n              <line x1=\"150\" y1=\"165\" x2=\"102\" y2=\"165\" stroke={theme.colors.orange} strokeWidth=\"2.5\" markerEnd=\"url(#backArrow)\" />\n              <text x=\"126\" y=\"182\" textAnchor=\"middle\" fill={theme.colors.orange} fontSize=\"12\" fontWeight=\"bold\">Ã—b</text>\n            </>\n          )}\n\n          <defs>\n            <marker id=\"backArrow\" markerWidth=\"8\" markerHeight=\"6\" refX=\"0\" refY=\"3\" orient=\"auto\">\n              <polygon points=\"8 3, 0 0, 0 6\" fill={blocked ? theme.colors.red : theme.colors.orange} />\n            </marker>\n          </defs>\n        </svg>\n      </div>\n\n      {/* Bottom panels */}\n      <div style={{ display: 'flex', gap: '10px', marginBottom: '8px' }}>\n        {/* Inputs */}\n        <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '10px',\n          border: step === 0 ? `2px solid ${theme.colors.primary}` : `1px solid ${theme.colors.border}` }}>\n          <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>\n            Inputs {step === 0 && <span style={{ color: theme.colors.primary }}>(adjust)</span>}\n          </div>\n          {[{ n: 'a', v: a, s: setA }, { n: 'b', v: b, s: setB }, { n: 'c', v: c, s: setC }].map((p, i) => (\n            <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '6px' }}>\n              <span style={{ width: '16px', fontSize: '14px', color: theme.colors.blue, fontWeight: '600' }}>{p.n}</span>\n              <input type=\"range\" min={-5} max={10} value={p.v} onChange={e => p.s(+e.target.value)} disabled={step > 0}\n                style={{ flex: 1, accentColor: theme.colors.blue, opacity: step > 0 ? 0.4 : 1 }} />\n              <span style={{ width: '28px', fontSize: '14px', color: theme.colors.blue, fontWeight: '600', textAlign: 'right' }}>{p.v}</span>\n            </div>\n          ))}\n        </div>\n\n        {/* Chain rule breakdown */}\n        <div style={{ flex: 1, background: theme.colors.surface, borderRadius: '8px', padding: '10px' }}>\n          <div style={{ fontSize: '12px', color: theme.colors.textMuted, marginBottom: '8px' }}>Chain Rule</div>\n          <div style={{ fontSize: '13px', lineHeight: 1.7 }}>\n            <div style={{ opacity: step >= 3 ? 1 : 0.3 }}>\n              <span style={{ color: theme.colors.yellow }}>relu':</span> {sum > 0 ? '1 (pass)' : '0 (block)'}\n            </div>\n            <div style={{ opacity: step >= 4 ? 1 : 0.3 }}>\n              <span style={{ color: theme.colors.yellow }}>âˆ‚(a+x)/âˆ‚a:</span> 1\n            </div>\n            <div style={{ opacity: step >= 4 ? 1 : 0.3 }}>\n              <span style={{ color: theme.colors.yellow }}>âˆ‚(bÃ—c)/âˆ‚b:</span> c = {c}\n            </div>\n            <div style={{ opacity: step >= 4 ? 1 : 0.3 }}>\n              <span style={{ color: theme.colors.yellow }}>âˆ‚(bÃ—c)/âˆ‚c:</span> b = {b}\n            </div>\n          </div>\n        </div>\n\n        {/* Results */}\n        <div style={{ flex: 1, background: step >= 4 ? (blocked ? theme.colors.red + '15' : theme.colors.green + '15') : theme.colors.surface, \n          borderRadius: '8px', padding: '10px', border: step >= 4 ? `2px solid ${blocked ? theme.colors.red : theme.colors.green}` : `1px solid ${theme.colors.border}` }}>\n          <div style={{ fontSize: '12px', color: step >= 4 ? (blocked ? theme.colors.red : theme.colors.green) : theme.colors.textMuted, marginBottom: '8px', fontWeight: '600' }}>\n            {blocked && step >= 4 ? 'Blocked!' : 'Gradients'}\n          </div>\n          <div style={{ fontSize: '14px', color: theme.colors.text, opacity: step >= 4 ? 1 : 0.3 }}>\n            <div>a.grad = <span style={{ fontWeight: '700' }}>{a_grad}</span></div>\n            <div>b.grad = <span style={{ fontWeight: '700' }}>{b_grad}</span></div>\n            <div>c.grad = <span style={{ fontWeight: '700' }}>{c_grad}</span></div>\n          </div>\n        </div>\n      </div>\n\n      {/* Key Insight */}\n      <div style={{ background: theme.colors.surfaceAlt, borderRadius: '8px', padding: '10px 14px',\n        fontSize: '12px', color: theme.colors.textSecondary, borderLeft: `3px solid ${theme.colors.primary}` }}>\n        <span style={{ color: theme.colors.primary, fontWeight: '600' }}>Key: </span>\n        {step === 0 && 'Each op stores inputs (_prev) and gradient function (_backward). Try a=-5, b=1, c=1 to see blocking!'}\n        {step === 1 && `Forward: bÃ—c=${bc}, then +a=${sum}, then relu=${e}`}\n        {step === 2 && 'backward() starts at output. Gradient = 1 means \"how much does e change when e changes?\"'}\n        {step === 3 && (blocked ? `ReLU derivative is 0 when input (${sum}) â‰¤ 0. All gradients blocked!` : 'Each op multiplies incoming gradient by local derivative.')}\n        {step === 4 && (blocked ? 'Dying ReLU! No learning signal. Make a+bÃ—c positive.' : `b.grad = âˆ‚e/âˆ‚b = 1Ã—1Ã—1Ã—c = ${c}`)}\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}