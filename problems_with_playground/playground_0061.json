{
  "problem_id": 61,
  "title": "Implement F-Score Calculation for Binary Classification",
  "category": "Machine Learning",
  "enabled": true,
  "type": "react",
  "code": "\nimport React, { useState } from 'react';\n\nconst theme = {\n  bg: '#0f172a',\n  surface: '#1e293b',\n  card: '#334155',\n  border: '#475569',\n  text: '#f8fafc',\n  muted: '#94a3b8',\n  dim: '#64748b',\n  tp: '#4ade80',\n  fp: '#f87171',\n  fn: '#fbbf24',\n  tn: '#475569',\n  precision: '#38bdf8',\n  recall: '#a78bfa',\n  fscore: '#f472b6',\n  positive: '#4ade80',\n  negative: '#64748b',\n};\n\nexport default function App() {\n  const [samples, setSamples] = useState([\n    { actual: 1, predicted: 1 },\n    { actual: 1, predicted: 1 },\n    { actual: 1, predicted: 0 },\n    { actual: 1, predicted: 1 },\n    { actual: 0, predicted: 0 },\n    { actual: 0, predicted: 1 },\n    { actual: 0, predicted: 0 },\n    { actual: 0, predicted: 0 },\n  ]);\n  const [beta, setBeta] = useState(1);\n  const [showFormulas, setShowFormulas] = useState(false);\n\n  const tp = samples.filter(s => s.actual === 1 && s.predicted === 1).length;\n  const fp = samples.filter(s => s.actual === 0 && s.predicted === 1).length;\n  const fn = samples.filter(s => s.actual === 1 && s.predicted === 0).length;\n  const tn = samples.filter(s => s.actual === 0 && s.predicted === 0).length;\n\n  const precision = tp + fp > 0 ? tp / (tp + fp) : 0;\n  const recall = tp + fn > 0 ? tp / (tp + fn) : 0;\n  const betaSq = beta * beta;\n  const fscore = precision + recall > 0 \n    ? (1 + betaSq) * (precision * recall) / ((betaSq * precision) + recall) : 0;\n\n  const togglePrediction = (idx) => {\n    const newSamples = [...samples];\n    newSamples[idx].predicted = newSamples[idx].predicted === 1 ? 0 : 1;\n    setSamples(newSamples);\n  };\n\n  const getCategory = (s) => {\n    if (s.actual === 1 && s.predicted === 1) return { key: 'tp', color: theme.tp };\n    if (s.actual === 0 && s.predicted === 1) return { key: 'fp', color: theme.fp };\n    if (s.actual === 1 && s.predicted === 0) return { key: 'fn', color: theme.fn };\n    return { key: 'tn', color: theme.tn };\n  };\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.header}>\n        <h1 style={styles.title}>F-Score Explorer</h1>\n        <p style={styles.subtitle}>Click samples to change predictions</p>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.gridHeader}>\n          <span>üéØ Actual Labels</span>\n          <span style={{fontSize: 10, color: theme.dim}}>Click to toggle prediction</span>\n        </div>\n        \n        <div style={styles.samplesContainer}>\n          <div style={styles.sampleRow}>\n            <div style={styles.rowLabel}>\n              <div style={{...styles.rowLabelDot, background: theme.positive}} />\n              <span>Actually Positive</span>\n            </div>\n            <div style={styles.sampleIcons}>\n              {samples.filter(s => s.actual === 1).map((s, i) => {\n                const realIdx = samples.findIndex((x, idx) => x.actual === 1 && samples.slice(0, idx).filter(y => y.actual === 1).length === i);\n                const cat = getCategory(s);\n                return (\n                  <div key={i} onClick={() => togglePrediction(realIdx)} style={{...styles.sampleIcon, background: cat.color, transform: s.predicted === 1 ? 'scale(1)' : 'scale(0.85)'}}>\n                    <span style={styles.sampleEmoji}>{s.predicted === 1 ? '‚úì' : '‚úó'}</span>\n                    <span style={styles.sampleTip}>{s.predicted === 1 ? 'TP' : 'FN'}</span>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          <div style={styles.sampleRow}>\n            <div style={styles.rowLabel}>\n              <div style={{...styles.rowLabelDot, background: theme.negative}} />\n              <span>Actually Negative</span>\n            </div>\n            <div style={styles.sampleIcons}>\n              {samples.filter(s => s.actual === 0).map((s, i) => {\n                const realIdx = samples.findIndex((x, idx) => x.actual === 0 && samples.slice(0, idx).filter(y => y.actual === 0).length === i);\n                const cat = getCategory(s);\n                return (\n                  <div key={i} onClick={() => togglePrediction(realIdx)} style={{...styles.sampleIcon, background: cat.color, transform: s.predicted === 1 ? 'scale(1)' : 'scale(0.85)'}}>\n                    <span style={styles.sampleEmoji}>{s.predicted === 1 ? '‚úì' : '‚úó'}</span>\n                    <span style={styles.sampleTip}>{s.predicted === 1 ? 'FP' : 'TN'}</span>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n\n        <div style={styles.legend}>\n          <div style={styles.legendItem}><div style={{...styles.legendDot, background: theme.tp}}/><span>TP: Found correctly</span></div>\n          <div style={styles.legendItem}><div style={{...styles.legendDot, background: theme.fn}}/><span>FN: Missed</span></div>\n          <div style={styles.legendItem}><div style={{...styles.legendDot, background: theme.fp}}/><span>FP: False alarm</span></div>\n          <div style={styles.legendItem}><div style={{...styles.legendDot, background: theme.tn}}/><span>TN: Correct reject</span></div>\n        </div>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.matrixContainer}>\n          <div style={styles.matrixLabels}>\n            <div style={styles.matrixCorner}></div>\n            <div style={styles.matrixColLabel}>Pred +</div>\n            <div style={styles.matrixColLabel}>Pred ‚àí</div>\n          </div>\n          <div style={styles.matrixRowWrapper}>\n            <div style={styles.matrixRowLabel}>Real +</div>\n            <div style={{...styles.matrixCell, background: theme.tp}}><span style={styles.matrixNum}>{tp}</span><span style={styles.matrixCellLabel}>TP</span></div>\n            <div style={{...styles.matrixCell, background: theme.fn}}><span style={styles.matrixNum}>{fn}</span><span style={styles.matrixCellLabel}>FN</span></div>\n          </div>\n          <div style={styles.matrixRowWrapper}>\n            <div style={styles.matrixRowLabel}>Real ‚àí</div>\n            <div style={{...styles.matrixCell, background: theme.fp}}><span style={styles.matrixNum}>{fp}</span><span style={styles.matrixCellLabel}>FP</span></div>\n            <div style={{...styles.matrixCell, background: theme.tn}}><span style={styles.matrixNum}>{tn}</span><span style={styles.matrixCellLabel}>TN</span></div>\n          </div>\n        </div>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.gaugesRow}>\n          <div style={styles.gaugeCard}>\n            <div style={styles.gaugeTitle}><span style={{color: theme.precision}}>Precision</span></div>\n            <div style={styles.gaugeVisual}>\n              <svg width=\"100\" height=\"100\" viewBox=\"0 0 100 100\">\n                <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"none\" stroke={theme.card} strokeWidth=\"12\" />\n                <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"none\" stroke={theme.precision} strokeWidth=\"12\"\n                  strokeDasharray={`${precision * 251} 251`} strokeLinecap=\"round\" transform=\"rotate(-90 50 50)\"\n                  style={{transition: 'stroke-dasharray 0.4s ease'}} />\n                <text x=\"50\" y=\"55\" textAnchor=\"middle\" fill={theme.precision} fontSize=\"20\" fontWeight=\"700\">{(precision * 100).toFixed(0)}%</text>\n              </svg>\n            </div>\n            <div style={styles.gaugeExplain}>Of <span style={{color: theme.tp}}>{tp}</span>+<span style={{color: theme.fp}}>{fp}</span> predicted +, <span style={{color: theme.tp}}>{tp}</span> correct</div>\n          </div>\n\n          <div style={styles.gaugeCard}>\n            <div style={styles.gaugeTitle}><span style={{color: theme.recall}}>Recall</span></div>\n            <div style={styles.gaugeVisual}>\n              <svg width=\"100\" height=\"100\" viewBox=\"0 0 100 100\">\n                <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"none\" stroke={theme.card} strokeWidth=\"12\" />\n                <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"none\" stroke={theme.recall} strokeWidth=\"12\"\n                  strokeDasharray={`${recall * 251} 251`} strokeLinecap=\"round\" transform=\"rotate(-90 50 50)\"\n                  style={{transition: 'stroke-dasharray 0.4s ease'}} />\n                <text x=\"50\" y=\"55\" textAnchor=\"middle\" fill={theme.recall} fontSize=\"20\" fontWeight=\"700\">{(recall * 100).toFixed(0)}%</text>\n              </svg>\n            </div>\n            <div style={styles.gaugeExplain}>Of <span style={{color: theme.tp}}>{tp}</span>+<span style={{color: theme.fn}}>{fn}</span> actual +, found <span style={{color: theme.tp}}>{tp}</span></div>\n          </div>\n        </div>\n      </div>\n\n      <div style={styles.section}>\n        <div style={styles.betaSection}>\n          <div style={styles.betaHeader}>\n            <span>Œ≤ weight</span>\n            <span style={{color: theme.fscore, fontWeight: 700}}>Œ≤ = {beta}</span>\n          </div>\n          <div style={styles.betaSliderContainer}>\n            <input type=\"range\" min=\"0.5\" max=\"2\" step=\"0.5\" value={beta} onChange={(e) => setBeta(parseFloat(e.target.value))} style={styles.betaSlider} />\n            <div style={styles.betaLabels}>\n              <span>Precision</span>\n              <span>Balanced</span>\n              <span>Recall</span>\n            </div>\n          </div>\n          <div style={styles.betaExplain}>\n            {beta < 1 && 'üéØ Favoring precision: Avoid false alarms (e.g., spam filter)'}\n            {beta === 1 && '‚öñÔ∏è Balanced F1: Equal weight to precision and recall'}\n            {beta > 1 && 'üîç Favoring recall: Don\\'t miss positives (e.g., disease screening)'}\n          </div>\n        </div>\n      </div>\n\n      <div style={styles.fscoreSection}>\n        <div style={styles.fscoreHeader}>F{beta === 1 ? '1' : <sub>Œ≤={beta}</sub>} Score</div>\n        <div style={styles.fscoreValue}>{fscore.toFixed(3)}</div>\n        <div style={styles.fscoreBarContainer}>\n          <div style={{...styles.fscoreBar, width: `${fscore * 100}%`}} />\n          <div style={styles.fscoreMarkers}>\n            <span style={{left: '0%'}}>0</span>\n            <span style={{left: '50%'}}>0.5</span>\n            <span style={{left: '100%'}}>1</span>\n          </div>\n        </div>\n        <div style={styles.fscoreInterpret}>\n          {fscore >= 0.8 ? 'üåü Excellent' : fscore >= 0.6 ? 'üëç Good' : fscore >= 0.4 ? 'üìä Fair' : '‚ö†Ô∏è Needs work'}\n        </div>\n        \n        <div onClick={() => setShowFormulas(!showFormulas)} style={styles.formulaToggle}>\n          {showFormulas ? '‚ñº Hide formula' : '‚ñ∂ Show formula'}\n        </div>\n        \n        {showFormulas && (\n          <div style={styles.formulaBox}>\n            <div style={styles.formulaLine}>F<sub>Œ≤</sub> = (1 + Œ≤¬≤) √ó <span style={{color: theme.precision}}>P</span> √ó <span style={{color: theme.recall}}>R</span> / (Œ≤¬≤ √ó <span style={{color: theme.precision}}>P</span> + <span style={{color: theme.recall}}>R</span>)</div>\n            <div style={styles.formulaCalc}>= (1 + {betaSq}) √ó {precision.toFixed(3)} √ó {recall.toFixed(3)} / ({betaSq} √ó {precision.toFixed(3)} + {recall.toFixed(3)})</div>\n            <div style={styles.formulaResult}>= <span style={{color: theme.fscore}}>{fscore.toFixed(3)}</span></div>\n          </div>\n        )}\n      </div>\n\n      <div style={styles.insightBox}>\n        <div style={styles.insightTitle}>üí° Try This</div>\n        <div style={styles.insightText}>‚Ä¢ Toggle predictions on \"Actually Positive\" row to see how <span style={{color: theme.fn}}>FN</span> affects <span style={{color: theme.recall}}>Recall</span></div>\n        <div style={styles.insightText}>‚Ä¢ Toggle predictions on \"Actually Negative\" row to see how <span style={{color: theme.fp}}>FP</span> affects <span style={{color: theme.precision}}>Precision</span></div>\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  container: { fontFamily: \"'Inter', -apple-system, sans-serif\", background: theme.bg, color: theme.text, padding: 16, maxWidth: 520, margin: '0 auto', minHeight: '100vh' },\n  header: { textAlign: 'center', marginBottom: 16 },\n  title: { fontSize: 22, fontWeight: 700, margin: 0 },\n  subtitle: { fontSize: 12, color: theme.muted, margin: '4px 0 0' },\n  section: { marginBottom: 16 },\n  gridHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 10, fontSize: 12, color: theme.muted },\n  samplesContainer: { background: theme.surface, borderRadius: 12, padding: 14 },\n  sampleRow: { marginBottom: 12 },\n  rowLabel: { display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8, fontSize: 11, color: theme.dim },\n  rowLabelDot: { width: 10, height: 10, borderRadius: 5 },\n  sampleIcons: { display: 'flex', gap: 10, flexWrap: 'wrap' },\n  sampleIcon: { width: 48, height: 48, borderRadius: 12, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', cursor: 'pointer', transition: 'all 0.2s', position: 'relative' },\n  sampleEmoji: { fontSize: 18, color: '#000', fontWeight: 700 },\n  sampleTip: { fontSize: 9, color: 'rgba(0,0,0,0.6)', fontWeight: 600 },\n  legend: { display: 'flex', justifyContent: 'center', gap: 14, marginTop: 12, flexWrap: 'wrap' },\n  legendItem: { display: 'flex', alignItems: 'center', gap: 4, fontSize: 10, color: theme.dim },\n  legendDot: { width: 10, height: 10, borderRadius: 3 },\n  matrixContainer: { background: theme.surface, borderRadius: 12, padding: 14, display: 'inline-block', width: '100%' },\n  matrixLabels: { display: 'flex', marginBottom: 6 },\n  matrixCorner: { width: 60 },\n  matrixColLabel: { flex: 1, textAlign: 'center', fontSize: 10, color: theme.dim, fontWeight: 600 },\n  matrixRowWrapper: { display: 'flex', alignItems: 'center', marginBottom: 6 },\n  matrixRowLabel: { width: 60, fontSize: 10, color: theme.dim, fontWeight: 600 },\n  matrixCell: { flex: 1, height: 60, borderRadius: 8, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', margin: '0 3px' },\n  matrixNum: { fontSize: 24, fontWeight: 700, color: '#000' },\n  matrixCellLabel: { fontSize: 10, color: 'rgba(0,0,0,0.5)', fontWeight: 600 },\n  gaugesRow: { display: 'flex', gap: 12 },\n  gaugeCard: { flex: 1, background: theme.surface, borderRadius: 12, padding: 14, textAlign: 'center' },\n  gaugeTitle: { fontSize: 14, fontWeight: 700, marginBottom: 8 },\n  gaugeVisual: { display: 'flex', justifyContent: 'center', marginBottom: 8 },\n  gaugeExplain: { fontSize: 10, color: theme.dim },\n  betaSection: { background: theme.surface, borderRadius: 12, padding: 14 },\n  betaHeader: { display: 'flex', justifyContent: 'space-between', marginBottom: 10, fontSize: 13 },\n  betaSliderContainer: { marginBottom: 10 },\n  betaSlider: { width: '100%', height: 6, borderRadius: 3, appearance: 'none', background: theme.card, outline: 'none', cursor: 'pointer' },\n  betaLabels: { display: 'flex', justifyContent: 'space-between', fontSize: 9, color: theme.dim, marginTop: 4 },\n  betaExplain: { fontSize: 11, color: theme.muted, textAlign: 'center' },\n  fscoreSection: { background: `linear-gradient(135deg, ${theme.fscore}20, ${theme.precision}10)`, borderRadius: 14, padding: 18, textAlign: 'center', marginBottom: 16 },\n  fscoreHeader: { fontSize: 14, color: theme.muted, marginBottom: 6 },\n  fscoreValue: { fontSize: 48, fontWeight: 700, color: theme.fscore, marginBottom: 10 },\n  fscoreBarContainer: { position: 'relative', height: 12, background: theme.card, borderRadius: 6, marginBottom: 8, overflow: 'visible' },\n  fscoreBar: { height: '100%', background: `linear-gradient(90deg, ${theme.precision}, ${theme.fscore}, ${theme.recall})`, borderRadius: 6, transition: 'width 0.4s ease' },\n  fscoreMarkers: { position: 'absolute', top: 16, left: 0, right: 0, display: 'flex', justifyContent: 'space-between', fontSize: 9, color: theme.dim },\n  fscoreInterpret: { fontSize: 14, marginTop: 12, marginBottom: 10 },\n  formulaToggle: { fontSize: 11, color: theme.dim, cursor: 'pointer' },\n  formulaBox: { background: theme.surface, borderRadius: 8, padding: 12, marginTop: 10, textAlign: 'left' },\n  formulaLine: { fontSize: 12, fontFamily: 'monospace', color: theme.muted, marginBottom: 6 },\n  formulaCalc: { fontSize: 10, fontFamily: 'monospace', color: theme.dim, marginBottom: 4 },\n  formulaResult: { fontSize: 12, fontFamily: 'monospace' },\n  insightBox: { background: theme.surface, borderRadius: 12, padding: 14 },\n  insightTitle: { fontSize: 12, fontWeight: 700, marginBottom: 8 },\n  insightText: { fontSize: 11, color: theme.muted, marginBottom: 4, lineHeight: 1.5 },\n};\n",
  "settings": {
    "editorHeight": 600,
    "showEditor": false,
    "theme": "auto",
    "showConsole": false,
    "showPreview": true,
    "editorWidthPercentage": 35
  },
  "dependencies": {}
}