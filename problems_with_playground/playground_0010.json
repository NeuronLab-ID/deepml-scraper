{
  "problem_id": 10,
  "title": "Calculate Covariance Matrix",
  "category": "Statistics",
  "enabled": true,
  "type": "react",
  "code": "import React, { useState, useMemo, useRef, useEffect } from 'react';\n\n// ============================================\n// Design Tokens\n// ============================================\nconst theme = {\n  colors: {\n    primary: '#8b5cf6',\n    background: '#0a0a0a',\n    surface: '#141414',\n    surfaceAlt: '#1a1a1a',\n    border: '#262626',\n    text: '#fafafa',\n    textSecondary: '#a1a1aa',\n    textMuted: '#52525b',\n    positive: '#10b981',\n    negative: '#f43f5e',\n    accent1: '#f472b6',\n    accent2: '#38bdf8',\n    accent3: '#a3e635',\n  },\n  font: \"'JetBrains Mono', monospace\",\n};\n\nconst sampleColors = ['#f472b6', '#38bdf8', '#a3e635', '#fbbf24', '#a78bfa', '#fb7185'];\n\n// ============================================\n// Main Visualization - Connected Scatter\n// ============================================\nfunction RelationshipViz({ data, features, featureX, featureY, means }) {\n  const canvasRef = useRef(null);\n  const size = 380;\n  const padding = 50;\n  \n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Clear\n    ctx.fillStyle = theme.colors.surface;\n    ctx.fillRect(0, 0, size, size);\n    \n    if (featureX < 0 || featureY < 0) return;\n    \n    const xVals = data[featureX];\n    const yVals = data[featureY];\n    const meanX = means[featureX];\n    const meanY = means[featureY];\n    const n = xVals.length;\n    \n    // Compute covariance for trend\n    let cov = 0;\n    for (let i = 0; i < n; i++) {\n      cov += (xVals[i] - meanX) * (yVals[i] - meanY);\n    }\n    cov /= (n - 1);\n    \n    // Scaling\n    const allX = [...xVals, meanX];\n    const allY = [...yVals, meanY];\n    const xMin = Math.min(...allX) - 1;\n    const xMax = Math.max(...allX) + 1;\n    const yMin = Math.min(...allY) - 1;\n    const yMax = Math.max(...allY) + 1;\n    \n    const scaleX = (v) => padding + ((v - xMin) / (xMax - xMin)) * (size - 2 * padding);\n    const scaleY = (v) => size - padding - ((v - yMin) / (yMax - yMin)) * (size - 2 * padding);\n    \n    const meanXc = scaleX(meanX);\n    const meanYc = scaleY(meanY);\n    \n    // Subtle quadrant shading\n    ctx.globalAlpha = 0.06;\n    ctx.fillStyle = theme.colors.positive;\n    ctx.fillRect(meanXc, padding, size - padding - meanXc, meanYc - padding);\n    ctx.fillRect(padding, meanYc, meanXc - padding, size - padding - meanYc);\n    ctx.fillStyle = theme.colors.negative;\n    ctx.fillRect(padding, padding, meanXc - padding, meanYc - padding);\n    ctx.fillRect(meanXc, meanYc, size - padding - meanXc, size - padding - meanYc);\n    ctx.globalAlpha = 1;\n    \n    // Grid\n    ctx.strokeStyle = theme.colors.border;\n    ctx.lineWidth = 1;\n    for (let i = 0; i <= 5; i++) {\n      const pos = padding + (i / 5) * (size - 2 * padding);\n      ctx.beginPath();\n      ctx.moveTo(pos, padding);\n      ctx.lineTo(pos, size - padding);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(padding, pos);\n      ctx.lineTo(size - padding, pos);\n      ctx.stroke();\n    }\n    \n    // Mean lines\n    ctx.strokeStyle = theme.colors.textMuted;\n    ctx.lineWidth = 2;\n    ctx.setLineDash([8, 6]);\n    ctx.beginPath();\n    ctx.moveTo(meanXc, padding);\n    ctx.lineTo(meanXc, size - padding);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(padding, meanYc);\n    ctx.lineTo(size - padding, meanYc);\n    ctx.stroke();\n    ctx.setLineDash([]);\n    \n    // Mean intersection\n    ctx.fillStyle = theme.colors.textMuted;\n    ctx.beginPath();\n    ctx.arc(meanXc, meanYc, 6, 0, Math.PI * 2);\n    ctx.fill();\n    \n    // Draw points with glow\n    xVals.forEach((x, i) => {\n      const y = yVals[i];\n      const cx = scaleX(x);\n      const cy = scaleY(y);\n      \n      const devX = x - meanX;\n      const devY = y - meanY;\n      const contribution = devX * devY;\n      const isPositive = contribution >= 0;\n      \n      // Glow\n      const gradient = ctx.createRadialGradient(cx, cy, 0, cx, cy, 24);\n      gradient.addColorStop(0, isPositive ? 'rgba(16, 185, 129, 0.3)' : 'rgba(244, 63, 94, 0.3)');\n      gradient.addColorStop(1, 'transparent');\n      ctx.fillStyle = gradient;\n      ctx.beginPath();\n      ctx.arc(cx, cy, 24, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // Point\n      ctx.fillStyle = sampleColors[i % sampleColors.length];\n      ctx.beginPath();\n      ctx.arc(cx, cy, 10, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // Border\n      ctx.strokeStyle = theme.colors.surface;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n      \n      // Label\n      ctx.fillStyle = theme.colors.text;\n      ctx.font = 'bold 11px JetBrains Mono';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(`${i + 1}`, cx, cy);\n    });\n    \n    // Axis labels\n    ctx.fillStyle = theme.colors.text;\n    ctx.font = '13px JetBrains Mono';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'top';\n    ctx.fillText(features[featureX], size / 2, size - 18);\n    \n    ctx.save();\n    ctx.translate(16, size / 2);\n    ctx.rotate(-Math.PI / 2);\n    ctx.textBaseline = 'middle';\n    ctx.fillText(features[featureY], 0, 0);\n    ctx.restore();\n    \n    // Covariance indicator\n    const covColor = cov >= 0 ? theme.colors.positive : theme.colors.negative;\n    const covSign = cov >= 0 ? '+' : '';\n    ctx.fillStyle = covColor;\n    ctx.font = 'bold 14px JetBrains Mono';\n    ctx.textAlign = 'right';\n    ctx.fillText(`Cov: ${covSign}${cov.toFixed(1)}`, size - padding, padding - 12);\n    \n  }, [data, features, featureX, featureY, means]);\n  \n  return (\n    <canvas\n      ref={canvasRef}\n      width={size}\n      height={size}\n      style={{ borderRadius: '12px', display: 'block' }}\n    />\n  );\n}\n\n// ============================================\n// Variance Visualization\n// ============================================\nfunction VarianceViz({ data, features, featureIdx, mean }) {\n  const canvasRef = useRef(null);\n  const size = 380;\n  \n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    ctx.fillStyle = theme.colors.surface;\n    ctx.fillRect(0, 0, size, size);\n    \n    if (featureIdx < 0) return;\n    \n    const vals = data[featureIdx];\n    const n = vals.length;\n    \n    // Compute variance\n    let variance = 0;\n    for (let i = 0; i < n; i++) {\n      variance += Math.pow(vals[i] - mean, 2);\n    }\n    variance /= (n - 1);\n    \n    const padding = 60;\n    const centerY = size / 2;\n    const minVal = Math.min(...vals, mean) - 2;\n    const maxVal = Math.max(...vals, mean) + 2;\n    \n    const scaleX = (v) => padding + ((v - minVal) / (maxVal - minVal)) * (size - 2 * padding);\n    const meanXc = scaleX(mean);\n    \n    // Number line\n    ctx.strokeStyle = theme.colors.border;\n    ctx.lineWidth = 3;\n    ctx.lineCap = 'round';\n    ctx.beginPath();\n    ctx.moveTo(padding, centerY);\n    ctx.lineTo(size - padding, centerY);\n    ctx.stroke();\n    \n    // Tick marks\n    ctx.fillStyle = theme.colors.textMuted;\n    ctx.font = '10px JetBrains Mono';\n    ctx.textAlign = 'center';\n    for (let v = Math.ceil(minVal); v <= Math.floor(maxVal); v++) {\n      const x = scaleX(v);\n      ctx.beginPath();\n      ctx.moveTo(x, centerY - 6);\n      ctx.lineTo(x, centerY + 6);\n      ctx.stroke();\n      ctx.fillText(v.toString(), x, centerY + 22);\n    }\n    \n    // Mean marker\n    ctx.fillStyle = theme.colors.primary;\n    ctx.beginPath();\n    ctx.moveTo(meanXc, centerY - 20);\n    ctx.lineTo(meanXc - 8, centerY - 35);\n    ctx.lineTo(meanXc + 8, centerY - 35);\n    ctx.closePath();\n    ctx.fill();\n    \n    ctx.font = 'bold 11px JetBrains Mono';\n    ctx.fillText(`Œº = ${mean.toFixed(1)}`, meanXc, centerY - 45);\n    \n    // Draw spread lines from mean to each point\n    vals.forEach((v, i) => {\n      const x = scaleX(v);\n      const yOffset = (i - (n - 1) / 2) * 30;\n      const pointY = centerY + 60 + yOffset;\n      \n      // Connection line\n      ctx.strokeStyle = `${sampleColors[i]}60`;\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(meanXc, centerY);\n      ctx.lineTo(x, pointY);\n      ctx.stroke();\n      \n      // Horizontal deviation line\n      ctx.strokeStyle = sampleColors[i];\n      ctx.lineWidth = 3;\n      ctx.beginPath();\n      ctx.moveTo(meanXc, pointY);\n      ctx.lineTo(x, pointY);\n      ctx.stroke();\n      \n      // Point\n      ctx.fillStyle = sampleColors[i];\n      ctx.beginPath();\n      ctx.arc(x, pointY, 12, 0, Math.PI * 2);\n      ctx.fill();\n      \n      ctx.fillStyle = theme.colors.surface;\n      ctx.font = 'bold 11px JetBrains Mono';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(`${i + 1}`, x, pointY);\n      \n      // Deviation label\n      const dev = v - mean;\n      ctx.fillStyle = theme.colors.textSecondary;\n      ctx.font = '10px JetBrains Mono';\n      ctx.fillText(`${dev >= 0 ? '+' : ''}${dev.toFixed(1)}`, (meanXc + x) / 2, pointY - 18);\n    });\n    \n    // Feature label\n    ctx.fillStyle = theme.colors.text;\n    ctx.font = '14px JetBrains Mono';\n    ctx.textAlign = 'center';\n    ctx.fillText(features[featureIdx], size / 2, 30);\n    \n    // Variance\n    ctx.fillStyle = theme.colors.primary;\n    ctx.font = 'bold 13px JetBrains Mono';\n    ctx.fillText(`Variance: ${variance.toFixed(1)}`, size / 2, size - 25);\n    \n  }, [data, features, featureIdx, mean]);\n  \n  return (\n    <canvas\n      ref={canvasRef}\n      width={size}\n      height={size}\n      style={{ borderRadius: '12px', display: 'block' }}\n    />\n  );\n}\n\n// ============================================\n// Sample Cards\n// ============================================\nfunction SampleCards({ data, features, highlightPair }) {\n  const n = data[0].length;\n  \n  return (\n    <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', justifyContent: 'center' }}>\n      {Array.from({ length: n }).map((_, i) => (\n        <div\n          key={i}\n          style={{\n            background: theme.colors.surfaceAlt,\n            borderRadius: '10px',\n            padding: '10px 14px',\n            border: `2px solid ${sampleColors[i]}40`,\n            minWidth: '70px',\n          }}\n        >\n          <div style={{\n            width: '24px',\n            height: '24px',\n            borderRadius: '50%',\n            background: sampleColors[i],\n            margin: '0 auto 8px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: '12px',\n            fontWeight: '700',\n            color: theme.colors.surface,\n          }}>\n            {i + 1}\n          </div>\n          {features.map((f, fIdx) => {\n            const isHighlighted = highlightPair && (highlightPair.i === fIdx || highlightPair.j === fIdx);\n            return (\n              <div key={fIdx} style={{\n                fontSize: '11px',\n                marginBottom: '4px',\n                opacity: isHighlighted || !highlightPair ? 1 : 0.4,\n              }}>\n                <span style={{ color: theme.colors.textMuted }}>{f.slice(0, 3)}: </span>\n                <span style={{ color: theme.colors.text, fontWeight: '600' }}>{data[fIdx][i]}</span>\n              </div>\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// ============================================\n// Covariance Matrix Mini\n// ============================================\nfunction CovMatrixMini({ matrix, features, highlightCell, revealedCells }) {\n  return (\n    <div style={{\n      display: 'inline-flex',\n      flexDirection: 'column',\n      gap: '4px',\n      padding: '12px',\n      background: theme.colors.surfaceAlt,\n      borderRadius: '12px',\n    }}>\n      {/* Header */}\n      <div style={{ display: 'flex', gap: '4px', marginLeft: '44px' }}>\n        {features.map((f, j) => (\n          <div key={j} style={{\n            width: '44px',\n            textAlign: 'center',\n            fontSize: '9px',\n            color: theme.colors.textMuted,\n            fontWeight: '600',\n          }}>\n            {f.slice(0, 4)}\n          </div>\n        ))}\n      </div>\n      \n      {matrix.map((row, i) => (\n        <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n          <div style={{\n            width: '40px',\n            textAlign: 'right',\n            fontSize: '9px',\n            color: theme.colors.textMuted,\n            fontWeight: '600',\n          }}>\n            {features[i].slice(0, 4)}\n          </div>\n          {row.map((val, j) => {\n            const isHighlighted = highlightCell?.i === i && highlightCell?.j === j;\n            const isRevealed = !revealedCells || revealedCells.some(c => c.i === i && c.j === j);\n            const isDiag = i === j;\n            \n            let bg = theme.colors.background;\n            let color = theme.colors.textMuted;\n            \n            if (isRevealed) {\n              if (val > 0.1) color = theme.colors.positive;\n              else if (val < -0.1) color = theme.colors.negative;\n              else color = theme.colors.textSecondary;\n            }\n            \n            if (isHighlighted) {\n              bg = theme.colors.primary;\n              color = theme.colors.surface;\n            } else if (isDiag && isRevealed) {\n              bg = `${theme.colors.primary}20`;\n            }\n            \n            return (\n              <div\n                key={j}\n                style={{\n                  width: '44px',\n                  height: '32px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  background: bg,\n                  borderRadius: '6px',\n                  color,\n                  fontSize: '11px',\n                  fontWeight: '600',\n                  transition: 'all 0.2s',\n                  transform: isHighlighted ? 'scale(1.1)' : 'scale(1)',\n                }}\n              >\n                {isRevealed ? val.toFixed(1) : '?'}\n              </div>\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// ============================================\n// Insight Box\n// ============================================\nfunction InsightBox({ text, type }) {\n  const colors = {\n    positive: { bg: `${theme.colors.positive}15`, border: theme.colors.positive, icon: 'üìà' },\n    negative: { bg: `${theme.colors.negative}15`, border: theme.colors.negative, icon: 'üìâ' },\n    neutral: { bg: `${theme.colors.primary}15`, border: theme.colors.primary, icon: 'üìä' },\n  };\n  const style = colors[type] || colors.neutral;\n  \n  return (\n    <div style={{\n      padding: '14px 18px',\n      background: style.bg,\n      borderLeft: `4px solid ${style.border}`,\n      borderRadius: '0 10px 10px 0',\n      fontSize: '13px',\n      color: theme.colors.text,\n      lineHeight: 1.5,\n    }}>\n      <span style={{ marginRight: '8px' }}>{style.icon}</span>\n      {text}\n    </div>\n  );\n}\n\n// ============================================\n// Step Controls\n// ============================================\nfunction Controls({ step, total, onPrev, onNext, onReset, onAuto, playing }) {\n  return (\n    <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n      <div style={{\n        padding: '8px 14px',\n        background: theme.colors.surfaceAlt,\n        borderRadius: '8px',\n        fontSize: '12px',\n        color: theme.colors.textSecondary,\n      }}>\n        <span style={{ color: theme.colors.text, fontWeight: '600' }}>{step}</span> / {total}\n      </div>\n      \n      <button onClick={onPrev} disabled={step <= 0} style={{\n        padding: '10px 14px',\n        background: theme.colors.surfaceAlt,\n        border: 'none',\n        borderRadius: '8px',\n        color: step <= 0 ? theme.colors.textMuted : theme.colors.text,\n        cursor: step <= 0 ? 'not-allowed' : 'pointer',\n        fontSize: '16px',\n      }}>\n        ‚Üê\n      </button>\n      \n      <button onClick={onNext} disabled={step >= total} style={{\n        flex: 1,\n        padding: '12px 20px',\n        background: step < total ? theme.colors.primary : theme.colors.surfaceAlt,\n        border: 'none',\n        borderRadius: '8px',\n        color: step < total ? '#fff' : theme.colors.textMuted,\n        fontFamily: theme.font,\n        fontSize: '13px',\n        fontWeight: '600',\n        cursor: step < total ? 'pointer' : 'not-allowed',\n      }}>\n        {step === 0 ? 'Start ‚Üí' : step < total ? 'Next ‚Üí' : 'Done!'}\n      </button>\n      \n      <button onClick={onAuto} disabled={playing || step >= total} style={{\n        padding: '10px 14px',\n        background: theme.colors.surfaceAlt,\n        border: 'none',\n        borderRadius: '8px',\n        color: playing || step >= total ? theme.colors.textMuted : theme.colors.text,\n        cursor: playing || step >= total ? 'not-allowed' : 'pointer',\n        fontSize: '14px',\n      }}>\n        ‚ñ∂‚ñ∂\n      </button>\n      \n      <button onClick={onReset} style={{\n        padding: '10px 14px',\n        background: theme.colors.surfaceAlt,\n        border: 'none',\n        borderRadius: '8px',\n        color: theme.colors.text,\n        cursor: 'pointer',\n        fontSize: '14px',\n      }}>\n        ‚Ü∫\n      </button>\n    </div>\n  );\n}\n\n// ============================================\n// Main App\n// ============================================\nexport default function CovariancePlayground() {\n  const [exampleIdx, setExampleIdx] = useState(0);\n  const [step, setStep] = useState(0);\n  const [playing, setPlaying] = useState(false);\n  \n  const examples = [\n    {\n      name: 'Students',\n      icon: 'üéì',\n      features: ['Study', 'Sleep', 'Grade'],\n      data: [[2, 4, 6, 8], [8, 7, 5, 4], [55, 70, 80, 95]],\n      insights: {\n        '0-0': { text: 'Students vary in study habits ‚Äî some cram, others coast.', type: 'neutral' },\n        '0-1': { text: 'More study = less sleep. The classic student tradeoff!', type: 'negative' },\n        '0-2': { text: 'Study pays off! More hours studying = better grades.', type: 'positive' },\n        '1-1': { text: 'Sleep varies ‚Äî night owls vs early birds.', type: 'neutral' },\n        '1-2': { text: 'Less sleep = higher grades... but at what cost?', type: 'negative' },\n        '2-2': { text: 'Grades are spread out ‚Äî a mix of strugglers and stars.', type: 'neutral' },\n      },\n    },\n    {\n      name: 'Houses',\n      icon: 'üè†',\n      features: ['SqFt', 'Beds', 'Price'],\n      data: [[1200, 1600, 2000, 2800], [2, 3, 3, 5], [180, 260, 320, 480]],\n      insights: {\n        '0-0': { text: 'Houses range from cozy apartments to spacious homes.', type: 'neutral' },\n        '0-1': { text: 'Bigger houses have more bedrooms. Makes sense!', type: 'positive' },\n        '0-2': { text: 'Size matters for price ‚Äî every square foot counts!', type: 'positive' },\n        '1-1': { text: 'Bedroom count varies from 2 to 5.', type: 'neutral' },\n        '1-2': { text: 'More bedrooms = higher price tag.', type: 'positive' },\n        '2-2': { text: 'Prices range widely in this market.', type: 'neutral' },\n      },\n    },\n    {\n      name: 'Weather',\n      icon: '‚òÄÔ∏è',\n      features: ['Temp', 'Sales', 'Rain'],\n      data: [[55, 70, 85, 95], [80, 180, 320, 400], [4, 2, 0, 0]],\n      insights: {\n        '0-0': { text: 'Temperature swings from chilly to scorching.', type: 'neutral' },\n        '0-1': { text: 'Hot days = ice cream bonanza! Sales soar with temp.', type: 'positive' },\n        '0-2': { text: 'Hot days are dry days ‚Äî less rain when its warm.', type: 'negative' },\n        '1-1': { text: 'Sales vary wildly based on conditions.', type: 'neutral' },\n        '1-2': { text: 'Rain kills sales ‚Äî who wants ice cream in a storm?', type: 'negative' },\n        '2-2': { text: 'Some days are soggy, others bone dry.', type: 'neutral' },\n      },\n    },\n  ];\n  \n  const ex = examples[exampleIdx];\n  const nFeatures = ex.features.length;\n  const totalSteps = (nFeatures * (nFeatures + 1)) / 2;\n  \n  const means = useMemo(() => \n    ex.data.map(f => f.reduce((a, b) => a + b, 0) / f.length),\n    [ex.data]\n  );\n  \n  const covMatrix = useMemo(() => {\n    const n = ex.data[0].length;\n    const mat = ex.features.map(() => ex.features.map(() => 0));\n    for (let i = 0; i < nFeatures; i++) {\n      for (let j = 0; j < nFeatures; j++) {\n        let sum = 0;\n        for (let k = 0; k < n; k++) {\n          sum += (ex.data[i][k] - means[i]) * (ex.data[j][k] - means[j]);\n        }\n        mat[i][j] = sum / (n - 1);\n      }\n    }\n    return mat;\n  }, [ex, means, nFeatures]);\n  \n  const stepInfo = useMemo(() => {\n    if (step === 0) return null;\n    let s = 0;\n    for (let i = 0; i < nFeatures; i++) {\n      for (let j = i; j < nFeatures; j++) {\n        s++;\n        if (s === step) return { i, j };\n      }\n    }\n    return null;\n  }, [step, nFeatures]);\n  \n  const revealed = useMemo(() => {\n    const cells = [];\n    let s = 0;\n    for (let i = 0; i < nFeatures; i++) {\n      for (let j = i; j < nFeatures; j++) {\n        s++;\n        if (s <= step) {\n          cells.push({ i, j });\n          if (i !== j) cells.push({ i: j, j: i });\n        }\n      }\n    }\n    return cells;\n  }, [step, nFeatures]);\n  \n  const reset = () => { setStep(0); setPlaying(false); };\n  const next = () => step < totalSteps && setStep(step + 1);\n  const prev = () => step > 0 && setStep(step - 1);\n  const auto = async () => {\n    setPlaying(true);\n    for (let s = step; s < totalSteps; s++) {\n      setStep(s + 1);\n      await new Promise(r => setTimeout(r, 1200));\n    }\n    setPlaying(false);\n  };\n  \n  const isDiag = stepInfo?.i === stepInfo?.j;\n  const insightKey = stepInfo ? `${stepInfo.i}-${stepInfo.j}` : null;\n  const insight = insightKey ? ex.insights[insightKey] : null;\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      background: theme.colors.background,\n      color: theme.colors.text,\n      fontFamily: theme.font,\n      padding: '24px',\n    }}>\n      <div style={{ maxWidth: '900px', margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ textAlign: 'center', marginBottom: '20px' }}>\n          <h1 style={{ fontSize: '22px', fontWeight: '700', margin: 0, letterSpacing: '-0.5px' }}>\n            Covariance Matrix\n          </h1>\n          <p style={{ color: theme.colors.textSecondary, fontSize: '13px', marginTop: '6px' }}>\n            Do these features move together, or pull apart?\n          </p>\n        </div>\n        \n        {/* Example Tabs */}\n        <div style={{ display: 'flex', gap: '10px', justifyContent: 'center', marginBottom: '20px' }}>\n          {examples.map((e, idx) => (\n            <button\n              key={idx}\n              onClick={() => { setExampleIdx(idx); reset(); }}\n              style={{\n                padding: '10px 20px',\n                background: exampleIdx === idx ? theme.colors.primary : theme.colors.surface,\n                border: `1px solid ${exampleIdx === idx ? theme.colors.primary : theme.colors.border}`,\n                borderRadius: '10px',\n                color: exampleIdx === idx ? '#fff' : theme.colors.textSecondary,\n                fontFamily: theme.font,\n                fontSize: '13px',\n                fontWeight: '500',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '6px',\n              }}\n            >\n              <span>{e.icon}</span> {e.name}\n            </button>\n          ))}\n        </div>\n        \n        {/* Sample Cards */}\n        <div style={{\n          background: theme.colors.surface,\n          borderRadius: '16px',\n          padding: '20px',\n          marginBottom: '16px',\n        }}>\n          <div style={{\n            fontSize: '11px',\n            color: theme.colors.textMuted,\n            textTransform: 'uppercase',\n            letterSpacing: '1px',\n            marginBottom: '12px',\n            textAlign: 'center',\n          }}>\n            Sample Data\n          </div>\n          <SampleCards data={ex.data} features={ex.features} highlightPair={stepInfo} />\n        </div>\n        \n        {/* Main Content */}\n        <div style={{\n          background: theme.colors.surface,\n          borderRadius: '16px',\n          padding: '24px',\n        }}>\n          {step === 0 ? (\n            <div style={{ textAlign: 'center', padding: '40px 20px' }}>\n              <div style={{ fontSize: '40px', marginBottom: '16px' }}>üîç</div>\n              <div style={{ fontSize: '16px', color: theme.colors.text, marginBottom: '8px' }}>\n                Ready to explore?\n              </div>\n              <div style={{ fontSize: '13px', color: theme.colors.textSecondary, maxWidth: '400px', margin: '0 auto' }}>\n                Click <strong>Start</strong> to see how {ex.features.join(', ')} relate to each other.\n              </div>\n            </div>\n          ) : (\n            <div style={{ display: 'flex', gap: '24px', alignItems: 'flex-start' }}>\n              {/* Visualization */}\n              <div style={{ flex: 1 }}>\n                {isDiag ? (\n                  <VarianceViz\n                    data={ex.data}\n                    features={ex.features}\n                    featureIdx={stepInfo.i}\n                    mean={means[stepInfo.i]}\n                  />\n                ) : (\n                  <RelationshipViz\n                    data={ex.data}\n                    features={ex.features}\n                    featureX={stepInfo.i}\n                    featureY={stepInfo.j}\n                    means={means}\n                  />\n                )}\n              </div>\n              \n              {/* Matrix */}\n              <div>\n                <CovMatrixMini\n                  matrix={covMatrix}\n                  features={ex.features}\n                  highlightCell={stepInfo}\n                  revealedCells={revealed}\n                />\n              </div>\n            </div>\n          )}\n          \n          {/* Insight */}\n          {insight && (\n            <div style={{ marginTop: '20px' }}>\n              <InsightBox text={insight.text} type={insight.type} />\n            </div>\n          )}\n          \n          {/* Controls */}\n          <div style={{ marginTop: '20px' }}>\n            <Controls\n              step={step}\n              total={totalSteps}\n              onPrev={prev}\n              onNext={next}\n              onReset={reset}\n              onAuto={auto}\n              playing={playing}\n            />\n          </div>\n        </div>\n        \n        {/* Legend */}\n        <div style={{\n          display: 'flex',\n          justifyContent: 'center',\n          gap: '24px',\n          marginTop: '16px',\n          fontSize: '12px',\n          color: theme.colors.textSecondary,\n        }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n            <div style={{ width: '12px', height: '12px', borderRadius: '3px', background: theme.colors.positive }} />\n            Positive (move together)\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n            <div style={{ width: '12px', height: '12px', borderRadius: '3px', background: theme.colors.negative }} />\n            Negative (opposite)\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\n            <div style={{ width: '12px', height: '12px', borderRadius: '3px', background: `${theme.colors.primary}50` }} />\n            Diagonal (variance)\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}",
  "settings": {
    "editorHeight": 600,
    "showPreview": true,
    "theme": "auto",
    "showEditor": false,
    "editorWidthPercentage": 35,
    "showConsole": false
  },
  "dependencies": {}
}